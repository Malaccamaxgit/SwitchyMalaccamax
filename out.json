[{"filePath":"E:\\Github\\SwitchyMalaccamax\\.eslintrc.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\eslint.config.cjs","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":24,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\scripts\\generate-icons.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\scripts\\pre-commit-security.js","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":62,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":62,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":74,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":74,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":112,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":112,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/**\n * Pre-commit security scanner\n * Checks for common security issues before allowing commits\n */\n\nimport { execSync } from 'child_process';\nimport fs from 'fs';\nimport path from 'path';\n\nconst RED = '\\x1b[31m';\nconst YELLOW = '\\x1b[33m';\nconst GREEN = '\\x1b[32m';\nconst RESET = '\\x1b[0m';\nconst BOLD = '\\x1b[1m';\n\n// Security patterns to block\nconst SECURITY_PATTERNS = [\n  {\n    pattern: /console\\.log(?!\\s*\\()/gi,\n    severity: 'warning',\n    message: 'Found console.log - consider using Logger utility',\n    excludePaths: ['src/utils/Logger.ts', 'scripts/', 'tests/']\n  },\n  {\n    pattern: /innerHTML|dangerouslySetInnerHTML/gi,\n    severity: 'error',\n    message: 'Found innerHTML usage - XSS risk! Use textContent or Vue data binding',\n    excludePaths: ['scripts/']\n  },\n  {\n    pattern: /eval\\s*\\(/gi,\n    severity: 'error',\n    message: 'Found eval() usage - code injection risk!',\n    excludePaths: ['scripts/']\n  },\n  {\n    pattern: /v-html/gi,\n    severity: 'error',\n    message: 'Found v-html directive - XSS risk! Use v-text or {{}} syntax',\n    excludePaths: ['scripts/']\n  },\n  {\n    pattern: /\\.fromCharCode\\(/gi,\n    severity: 'warning',\n    message: 'Found fromCharCode - potential obfuscation',\n    excludePaths: ['src/utils/crypto.ts', 'tests/']\n  },\n  {\n    pattern: /(?<!errors\\.(?:value\\.)?)(api[_-]?key|secret|password|token)\\s*[:=]\\s*[\"'][^\"']+[\"']/gi,\n    severity: 'error',\n    message: 'Possible hardcoded secret detected!',\n    excludePaths: ['tests/', 'scripts/']\n  },\n  {\n    pattern: /chrome\\.storage\\.(sync|local)\\.get.*\\)\\.then/gi,\n    severity: 'warning',\n    message: 'Unvalidated storage access - ensure data validation'\n  }\n];\n\nfunction getStagedFiles() {\n  try {\n    const output = execSync('git diff --cached --name-only --diff-filter=ACM', { encoding: 'utf8' });\n    return output.trim().split('\\n').filter(file => {\n      return file && (file.endsWith('.ts') || file.endsWith('.js') || file.endsWith('.vue'));\n    });\n  } catch (error) {\n    console.error(`${RED}Error getting staged files:${RESET}`, error.message);\n    return [];\n  }\n}\n\nfunction scanFile(filePath, patterns) {\n  if (!fs.existsSync(filePath)) {\n    return [];\n  }\n\n  // Always exclude the security scanner script itself\n  if (filePath.includes('pre-commit-security.js')) {\n    return [];\n  }\n\n  const content = fs.readFileSync(filePath, 'utf8');\n  const lines = content.split('\\n');\n  const issues = [];\n\n  patterns.forEach(({ pattern, severity, message, excludePaths = [] }) => {\n    // Check if file should be excluded\n    const shouldExclude = excludePaths.some(excludePath => \n      filePath.includes(excludePath.replace(/\\//g, path.sep))\n    );\n    \n    if (shouldExclude) return;\n\n    lines.forEach((line, index) => {\n      if (pattern.test(line)) {\n        issues.push({\n          file: filePath,\n          line: index + 1,\n          severity,\n          message,\n          code: line.trim()\n        });\n      }\n    });\n  });\n\n  return issues;\n}\n\nfunction main() {\n  console.log(`${BOLD}≡ƒöÆ Running security pre-commit checks...${RESET}\\n`);\n\n  const stagedFiles = getStagedFiles();\n\n  if (stagedFiles.length === 0 || stagedFiles[0] === '') {\n    console.log(`${YELLOW}No staged TypeScript/JavaScript files to scan.${RESET}`);\n    process.exit(0);\n  }\n\n  console.log(`Scanning ${stagedFiles.length} file(s)...\\n`);\n\n  let hasErrors = false;\n  let hasWarnings = false;\n\n  stagedFiles.forEach(file => {\n    const issues = scanFile(file, SECURITY_PATTERNS);\n\n    if (issues.length > 0) {\n      console.log(`${BOLD}${file}${RESET}`);\n      issues.forEach(issue => {\n        if (issue.severity === 'error') {\n          hasErrors = true;\n          console.log(`  ${RED}Γ£ù ERROR${RESET} Line ${issue.line}: ${issue.message}`);\n        } else {\n          hasWarnings = true;\n          console.log(`  ${YELLOW}ΓÜá WARNING${RESET} Line ${issue.line}: ${issue.message}`);\n        }\n        console.log(`    ${issue.code}`);\n      });\n      console.log('');\n    }\n  });\n\n  // Run npm audit\n  console.log(`${BOLD}≡ƒôª Running npm audit...${RESET}`);\n  try {\n    execSync('npm audit --audit-level=moderate', { stdio: 'inherit' });\n  } catch (err) {\n    hasErrors = true;\n    console.log(`${RED}Γ£ù npm audit found vulnerabilities${RESET}\\n`);\n    console.error(err.message || err);\n  }\n\n  // Summary\n  if (hasErrors) {\n    console.log(`${RED}${BOLD}Γ¥î Commit blocked due to security issues!${RESET}`);\n    console.log(`${RED}Please fix the errors above before committing.${RESET}\\n`);\n    process.exit(1);\n  } else if (hasWarnings) {\n    console.log(`${YELLOW}${BOLD}ΓÜá∩╕Å  Warnings detected but commit allowed.${RESET}`);\n    console.log(`${YELLOW}Consider addressing these issues for better security.${RESET}\\n`);\n    process.exit(0);\n  } else {\n    console.log(`${GREEN}${BOLD}Γ£ô All security checks passed!${RESET}\\n`);\n    process.exit(0);\n  }\n}\n\nmain();\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\scripts\\production-logger.js","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":8,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":8,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":9,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":9,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\scripts\\secret-scanner.js","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":127,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":127,"endColumn":23},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":131,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":131,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":143,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":143,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":163,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":163,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":208,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":208,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":218,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":218,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\r\n/**\r\n * Secret Scanner - Prevents accidental commit of sensitive data\r\n * Scans staged files for common secret patterns\r\n */\r\n\r\nimport fs from 'fs';\r\nimport { execSync } from 'child_process';\r\n\r\n// ANSI color codes\r\nconst RED = '\\x1b[31m';\r\nconst YELLOW = '\\x1b[33m';\r\nconst GREEN = '\\x1b[32m';\r\nconst RESET = '\\x1b[0m';\r\nconst BOLD = '\\x1b[1m';\r\n\r\n// Secret patterns to detect\r\nconst SECRET_PATTERNS = [\r\n  // API Keys and Tokens\r\n  {\r\n    name: 'Generic API Key',\r\n    pattern: /[a-zA-Z0-9_-]*api[_-]?key[a-zA-Z0-9_-]*['\"\\s]*[:=]\\s*['\"]([a-zA-Z0-9-]{20,})['\"]/gi,\r\n    severity: 'HIGH',\r\n  },\r\n  {\r\n    name: 'Generic Secret/Token',\r\n    pattern: /[a-zA-Z0-9_-]*secret[a-zA-Z0-9_-]*['\"\\s]*[:=]\\s*['\"]([a-zA-Z0-9-]{20,})['\"]/gi,\r\n    severity: 'HIGH',\r\n  },\r\n  {\r\n    name: 'Generic Token',\r\n    pattern: /[a-zA-Z0-9_-]*token[a-zA-Z0-9_-]*['\"\\s]*[:=]\\s*['\"]([a-zA-Z0-9-]{20,})['\"]/gi,\r\n    severity: 'HIGH',\r\n  },\r\n  \r\n  // AWS\r\n  {\r\n    name: 'AWS Access Key',\r\n    pattern: /(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,\r\n    severity: 'CRITICAL',\r\n  },\r\n  {\r\n    name: 'AWS Secret Key',\r\n    pattern: /aws[_-]?secret[_-]?access[_-]?key['\"\\s]*[:=]\\s*['\"]([a-zA-Z0-9/+=]{40})['\"]/gi,\r\n    severity: 'CRITICAL',\r\n  },\r\n  \r\n  // Private Keys\r\n  {\r\n    name: 'RSA Private Key',\r\n    pattern: /-----BEGIN RSA PRIVATE KEY-----/g,\r\n    severity: 'CRITICAL',\r\n  },\r\n  {\r\n    name: 'SSH Private Key',\r\n    pattern: /-----BEGIN OPENSSH PRIVATE KEY-----/g,\r\n    severity: 'CRITICAL',\r\n  },\r\n  {\r\n    name: 'PGP Private Key',\r\n    pattern: /-----BEGIN PGP PRIVATE KEY BLOCK-----/g,\r\n    severity: 'CRITICAL',\r\n  },\r\n  \r\n  // Passwords\r\n  {\r\n    name: 'Password Assignment',\r\n    pattern: /[a-zA-Z0-9_-]*password[a-zA-Z0-9_-]*['\"\\s]*[:=]\\s*['\"]([^'\"]{8,})['\"]/gi,\r\n    severity: 'HIGH',\r\n    // Skip test files and examples\r\n    exclude: /test|spec|example|demo|mock/i,\r\n  },\r\n  \r\n  // Database Connections\r\n  {\r\n    name: 'Database Connection String',\r\n    pattern: /(postgres|mysql|mongodb|redis):\\/\\/[^:]+:[^@]+@[^/]+/gi,\r\n    severity: 'CRITICAL',\r\n  },\r\n  \r\n  // OAuth/JWT\r\n  {\r\n    name: 'JWT Token',\r\n    pattern: /eyJ[a-zA-Z0-9_-]*\\.eyJ[a-zA-Z0-9_-]*\\.[a-zA-Z0-9_-]*/g,\r\n    severity: 'MEDIUM',\r\n  },\r\n  \r\n  // GitHub\r\n  {\r\n    name: 'GitHub Token',\r\n    pattern: /gh[pousr]_[a-zA-Z0-9]{36,}/g,\r\n    severity: 'CRITICAL',\r\n  },\r\n  \r\n  // Generic Base64 Credentials\r\n  {\r\n    name: 'Base64 Basic Auth',\r\n    pattern: /['\"]?authorization['\"]?\\s*:\\s*['\"]?basic\\s+([a-zA-Z0-9+/]{40,}={0,2})['\"]?/gi,\r\n    severity: 'HIGH',\r\n  },\r\n];\r\n\r\n// Whitelist patterns (legitimate uses that shouldn't trigger alerts)\r\nconst WHITELIST_PATTERNS = [\r\n  /example\\.com/i,\r\n  /placeholder/i,\r\n  /your[_-]?api[_-]?key/i,\r\n  /your[_-]?password/i,\r\n  /your[_-]?token/i,\r\n  /\\*+/,  // Masked values like ********\r\n  /xxx+/i,\r\n  /test[_-]?key/i,\r\n  /dummy/i,\r\n  /fake/i,\r\n  /mock/i,\r\n];\r\n\r\n// File extensions to scan\r\nconst SCANNABLE_EXTENSIONS = [\r\n  '.js', '.ts', '.jsx', '.tsx', '.vue',\r\n  '.json', '.env', '.yml', '.yaml',\r\n  '.sh', '.bash', '.py', '.rb',\r\n  '.php', '.go', '.java', '.cs',\r\n  '.xml', '.properties', '.conf', '.config',\r\n];\r\n\r\nfunction isWhitelisted(match) {\r\n  return WHITELIST_PATTERNS.some(pattern => pattern.test(match));\r\n}\r\n\r\nfunction getStagedFiles() {\r\n  try {\r\n    const output = execSync('git diff --cached --name-only --diff-filter=ACM', {\r\n      encoding: 'utf8',\r\n    });\r\n    return output.trim().split('\\n').filter(Boolean);\r\n  } catch (error) {\r\n    console.error(`${RED}Failed to get staged files:${RESET}`, error.message);\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction shouldScanFile(filename) {\r\n  // Skip non-text files\r\n  if (filename.includes('node_modules/')) return false;\r\n  if (filename.includes('.git/')) return false;\r\n  if (filename.includes('dist/')) return false;\r\n  if (filename.includes('build/')) return false;\r\n  if (filename.endsWith('.map')) return false;\r\n  if (filename.endsWith('.min.js')) return false;\r\n  if (filename.endsWith('.png')) return false;\r\n  if (filename.endsWith('.jpg')) return false;\r\n  if (filename.endsWith('.ico')) return false;\r\n  \r\n  // Skip the scanner itself (contains example patterns)\r\n  if (filename.includes('secret-scanner.js')) return false;\r\n  \r\n  // Check extension\r\n  const ext = '.' + filename.split('.').pop();\r\n  return SCANNABLE_EXTENSIONS.includes(ext);\r\n}\r\n\r\nfunction scanFile(filename) {\r\n  try {\r\n    const content = fs.readFileSync(filename, 'utf8');\r\n    const findings = [];\r\n    \r\n    for (const pattern of SECRET_PATTERNS) {\r\n      // Skip if file matches exclude pattern\r\n      if (pattern.exclude && pattern.exclude.test(filename)) {\r\n        continue;\r\n      }\r\n      \r\n      let match;\r\n      const regex = new RegExp(pattern.pattern.source, pattern.pattern.flags);\r\n      \r\n      while ((match = regex.exec(content)) !== null) {\r\n        const matchText = match[0];\r\n        \r\n        // Skip whitelisted matches\r\n        if (isWhitelisted(matchText)) {\r\n          continue;\r\n        }\r\n        \r\n        // Find line number\r\n        const beforeMatch = content.substring(0, match.index);\r\n        const lineNumber = beforeMatch.split('\\n').length;\r\n        \r\n        findings.push({\r\n          file: filename,\r\n          line: lineNumber,\r\n          type: pattern.name,\r\n          severity: pattern.severity,\r\n          match: matchText.substring(0, 100), // Truncate long matches\r\n        });\r\n      }\r\n    }\r\n    \r\n    return findings;\r\n  } catch (error) {\r\n    if (error.code !== 'ENOENT') {\r\n      console.warn(`${YELLOW}Warning: Could not read ${filename}${RESET}`);\r\n    }\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction getSeverityColor(severity) {\r\n  switch (severity) {\r\n    case 'CRITICAL': return RED;\r\n    case 'HIGH': return RED;\r\n    case 'MEDIUM': return YELLOW;\r\n    case 'LOW': return YELLOW;\r\n    default: return RESET;\r\n  }\r\n}\r\n\r\nfunction main() {\r\n  console.log(`${BOLD}≡ƒöì Secret Scanner - Checking staged files...${RESET}\\n`);\r\n  \r\n  const stagedFiles = getStagedFiles();\r\n  \r\n  if (stagedFiles.length === 0) {\r\n    console.log(`${YELLOW}No staged files to scan.${RESET}`);\r\n    return 0;\r\n  }\r\n  \r\n  const scannableFiles = stagedFiles.filter(shouldScanFile);\r\n  console.log(`Scanning ${scannableFiles.length} file(s)...\\n`);\r\n  \r\n  const allFindings = [];\r\n  \r\n  for (const file of scannableFiles) {\r\n    const findings = scanFile(file);\r\n    allFindings.push(...findings);\r\n  }\r\n  \r\n  if (allFindings.length === 0) {\r\n    console.log(`${GREEN}Γ£ô No secrets detected${RESET}\\n`);\r\n    return 0;\r\n  }\r\n  \r\n  // Group findings by severity\r\n  const critical = allFindings.filter(f => f.severity === 'CRITICAL');\r\n  const high = allFindings.filter(f => f.severity === 'HIGH');\r\n  const medium = allFindings.filter(f => f.severity === 'MEDIUM');\r\n  \r\n  console.log(`${RED}${BOLD}ΓÜá SECRETS DETECTED!${RESET}\\n`);\r\n  \r\n  if (critical.length > 0) {\r\n    console.log(`${getSeverityColor('CRITICAL')}${BOLD}CRITICAL (${critical.length}):${RESET}`);\r\n    critical.forEach(f => {\r\n      const color = getSeverityColor(f.severity);\r\n      console.log(`${color}  ${f.file}:${f.line} - ${f.type}${RESET}`);\r\n      console.log(`${color}    ${f.match.substring(0, 80)}...${RESET}`);\r\n    });\r\n    console.log();\r\n  }\r\n  \r\n  if (high.length > 0) {\r\n    console.log(`${getSeverityColor('HIGH')}${BOLD}HIGH (${high.length}):${RESET}`);\r\n    high.forEach(f => {\r\n      const color = getSeverityColor(f.severity);\r\n      console.log(`${color}  ${f.file}:${f.line} - ${f.type}${RESET}`);\r\n    });\r\n    console.log();\r\n  }\r\n  \r\n  if (medium.length > 0) {\r\n    console.log(`${getSeverityColor('MEDIUM')}${BOLD}MEDIUM (${medium.length}):${RESET}`);\r\n    medium.forEach(f => {\r\n      const color = getSeverityColor(f.severity);\r\n      console.log(`${color}  ${f.file}:${f.line} - ${f.type}${RESET}`);\r\n    });\r\n    console.log();\r\n  }\r\n  \r\n  console.log(`${RED}${BOLD}Commit aborted to prevent secret exposure.${RESET}`);\r\n  console.log(`\\nIf these are false positives:`);\r\n  console.log(`1. Review the detected patterns`);\r\n  console.log(`2. Use placeholder values (e.g., 'your-api-key', 'example.com')`);\r\n  console.log(`3. Store real secrets in environment variables`);\r\n  console.log(`4. Use .env files (and add to .gitignore)\\n`);\r\n  \r\n  return 1;\r\n}\r\n\r\nprocess.exit(main());\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\background\\service-worker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6859,6862],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6859,6862],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":219,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7717,7720],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7717,7720],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":281,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":281,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9828,9831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9828,9831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":365,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":365,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":388,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":388,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13760,13763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13760,13763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Service Worker for SwitchyMalaccamax\r\n * Handles proxy settings and background tasks\r\n */\r\nimport { Logger } from '../utils/Logger';\r\nimport { migrateToEncryptedStorage } from '../utils/migration';\r\nimport { generatePacScript } from '@/core/pac/pac-generator';\r\n\r\nLogger.setComponentPrefix('Background');\r\nLogger.info('Service worker initialized');\r\n\r\n// ============================================================================\r\n// MESSAGE TYPES (Security Enhancement)\r\n// ============================================================================\r\n\r\ninterface BaseMessage {\r\n  action: string;\r\n}\r\n\r\ninterface SetProxyMessage extends BaseMessage {\r\n  action: 'setProxy';\r\n  config: chrome.proxy.ProxyConfig;\r\n  profileColor?: string;\r\n}\r\n\r\ninterface CheckConflictsMessage extends BaseMessage {\r\n  action: 'checkConflicts';\r\n}\r\n\r\ntype ExtensionMessage = SetProxyMessage | CheckConflictsMessage;\r\n\r\n// Action whitelist for validation\r\nconst ALLOWED_ACTIONS = ['setProxy', 'checkConflicts'] as const;\r\ntype AllowedAction = typeof ALLOWED_ACTIONS[number];\r\n\r\nfunction isAllowedAction(action: unknown): action is AllowedAction {\r\n  return typeof action === 'string' && ALLOWED_ACTIONS.includes(action as AllowedAction);\r\n}\r\n\r\n// Rate limiting map: senderId -> last message timestamp\r\nconst messageRateLimit = new Map<string, number>();\r\nconst RATE_LIMIT_MS = 100; // Max 10 messages per second per sender\r\n\r\n// Run storage encryption migration on startup\r\nmigrateToEncryptedStorage().catch(error => {\r\n  Logger.error('Failed to migrate storage to encryption', error);\r\n});\r\n\r\n// ============================================================================\r\n// MESSAGE VALIDATION\r\n// ============================================================================\r\n\r\n/**\r\n * Validate proxy configuration structure\r\n */\r\nfunction isValidProxyConfig(config: unknown): config is chrome.proxy.ProxyConfig {\r\n  if (!config || typeof config !== 'object') return false;\r\n\r\n  const cfg = config as Record<string, unknown>;\r\n\r\n  // Must have valid mode\r\n  const validModes = ['direct', 'auto_detect', 'pac_script', 'fixed_servers', 'system'];\r\n  if (!cfg.mode || typeof cfg.mode !== 'string' || !validModes.includes(cfg.mode)) return false;\r\n\r\n  // pac_script mode requires pacScript\r\n  if (cfg.mode === 'pac_script') {\r\n    const pac = cfg.pacScript as Record<string, unknown> | undefined;\r\n    if (!pac || typeof pac !== 'object') return false;\r\n    if (!pac.data && !pac.url) return false;\r\n  }\r\n\r\n  // fixed_servers mode requires rules\r\n  if (cfg.mode === 'fixed_servers') {\r\n    if (!cfg.rules || typeof cfg.rules !== 'object') return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Validate color value (must be from allowed set)\r\n */\r\nfunction isValidColor(color: unknown): boolean {\r\n  const allowedColors = ['gray', 'blue', 'green', 'red', 'yellow', 'purple'];\r\n  return typeof color === 'string' && allowedColors.includes(color);\r\n}\r\n\r\n// ============================================================================\r\n// ICON MANAGEMENT\r\n// ============================================================================\r\n\r\n/**\r\n * Initialize icon color based on active profile\r\n */\r\nasync function initializeIconColor(): Promise<void> {\r\n  try {\r\n    const syncResult = await chrome.storage.sync.get(['activeProfileId']);\r\n    const localResult = await chrome.storage.local.get(['profiles']);\r\n    const profiles = localResult.profiles || [];\r\n    const activeProfile = (profiles as Array<Record<string, unknown>>).find(p => (p.id as string) === syncResult.activeProfileId);\r\n    \r\n    if (activeProfile && (activeProfile as unknown as Record<string, unknown>).color) {\r\n      updateIconColor((activeProfile as unknown as Record<string, unknown>).color as string);\r\n      Logger.info('Initialized icon with profile color', { color: (activeProfile as unknown as Record<string, unknown>).color });\r\n    } else {\r\n      updateIconColor('blue'); // Default color\r\n      Logger.info('Initialized icon with default color: blue');\r\n    }\r\n  } catch (error) {\r\n    Logger.error('Failed to initialize icon color', error);\r\n    updateIconColor('blue'); // Fallback to default\r\n  }\r\n}\r\n\r\n/**\r\n * Generate colored icon and update extension icon\r\n */\r\nfunction updateIconColor(color: string): void {\r\n  const colors: Record<string, string> = {\r\n    gray: '#9ca3af',\r\n    blue: '#3b82f6',\r\n    green: '#22c55e',\r\n    red: '#ef4444',\r\n    yellow: '#eab308',\r\n    purple: '#a855f7',\r\n  };\r\n  \r\n  const hexColor = colors[color] || colors.blue;\r\n  \r\n  // Generate icons for different sizes\r\n  const sizes = [16, 48, 128];\r\n  const imageData: Record<number, ImageData> = {};\r\n  \r\n  sizes.forEach(size => {\r\n    const canvas = new OffscreenCanvas(size, size);\r\n    const ctx = canvas.getContext('2d');\r\n    \r\n    if (ctx) {\r\n      // Clear canvas\r\n      ctx.clearRect(0, 0, size, size);\r\n      \r\n      // Draw circle\r\n      const centerX = size / 2;\r\n      const centerY = size / 2;\r\n      const radius = size * 0.35;\r\n      \r\n      // Outer circle (border)\r\n      ctx.beginPath();\r\n      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\r\n      ctx.fillStyle = hexColor;\r\n      ctx.fill();\r\n      \r\n      // Inner circle (white)\r\n      ctx.beginPath();\r\n      ctx.arc(centerX, centerY, radius * 0.5, 0, 2 * Math.PI);\r\n      ctx.fillStyle = '#ffffff';\r\n      ctx.fill();\r\n      \r\n      // Draw arrow-like symbol\r\n      ctx.strokeStyle = hexColor;\r\n      ctx.lineWidth = size * 0.08;\r\n      ctx.lineCap = 'round';\r\n      ctx.lineJoin = 'round';\r\n      \r\n      const arrowSize = radius * 0.3;\r\n      ctx.beginPath();\r\n      ctx.moveTo(centerX - arrowSize, centerY - arrowSize * 0.5);\r\n      ctx.lineTo(centerX, centerY + arrowSize * 0.5);\r\n      ctx.lineTo(centerX + arrowSize, centerY - arrowSize * 0.5);\r\n      ctx.stroke();\r\n      \r\n      // Get image data\r\n      imageData[size] = ctx.getImageData(0, 0, size, size);\r\n    }\r\n  });\r\n  \r\n  // Update icon\r\n  chrome.action.setIcon({ imageData });\r\n  Logger.debug('Icon updated with color', { color, hexColor });\r\n}\r\n\r\n/**\r\n * Apply startup profile on extension initialization\r\n */\r\nasync function applyStartupProfile(): Promise<void> {\r\n  try {\r\n    const syncResult = await chrome.storage.sync.get(['settings', 'activeProfileId']);\r\n    const localResult = await chrome.storage.local.get(['profiles']);\r\n    \r\n    const profiles = localResult.profiles || [];\r\n    const settings = syncResult.settings || {};\r\n    const startupProfileId = settings.startupProfile;\r\n    \r\n    Logger.debug('Checking startup profile', { \r\n      startupProfileId, \r\n      currentActiveProfileId: syncResult.activeProfileId \r\n    });\r\n    \r\n    // If there's a startup profile set and it's different from current, apply it\r\n    if (startupProfileId && startupProfileId !== syncResult.activeProfileId) {\r\n      const startupProfile = profiles.find((p: any) => p.id === startupProfileId);\r\n      \r\n      if (startupProfile) {\r\n        Logger.info('Applying startup profile', { name: startupProfile.name });\r\n        \r\n        // Update active profile\r\n        await chrome.storage.sync.set({ activeProfileId: startupProfileId });\r\n        \r\n        // Build and apply proxy config\r\n        let config: chrome.proxy.ProxyConfig;\r\n        \r\n        if (startupProfile.profileType === 'DirectProfile') {\r\n          config = { mode: 'direct' };\r\n        } else if (startupProfile.profileType === 'SystemProfile') {\r\n          config = { mode: 'system' };\r\n        } else if (startupProfile.profileType === 'FixedProfile') {\r\n          const bypassList: string[] = [];\r\n          if (startupProfile.bypassList && Array.isArray(startupProfile.bypassList)) {\r\n            startupProfile.bypassList.forEach((condition: any) => {\r\n              if (condition.conditionType === 'BypassCondition' && condition.pattern) {\r\n                bypassList.push(condition.pattern);\r\n              }\r\n            });\r\n          }\r\n          \r\n          config = {\r\n            mode: 'fixed_servers',\r\n            rules: {\r\n              singleProxy: {\r\n                scheme: startupProfile.proxyType?.toLowerCase() || 'http',\r\n                host: startupProfile.host || 'localhost',\r\n                port: startupProfile.port || 8080,\r\n              },\r\n              bypassList: bypassList.length > 0 ? bypassList : undefined,\r\n            },\r\n          };\r\n        } else if (startupProfile.profileType === 'SwitchProfile') {\r\n          // Generate PAC script for switch profile\r\n          try {\r\n            const pacScript = generatePacScript(startupProfile, profiles);\r\n            config = {\r\n              mode: 'pac_script',\r\n              pacScript: { data: pacScript }\r\n            };\r\n          } catch (err) {\r\n            Logger.error('Failed to generate PAC for startup SwitchProfile', err);\r\n            config = { mode: 'direct' };\r\n          }\r\n        } else {\r\n          config = { mode: 'direct' };\r\n        }\r\n        \r\n        await handleSetProxy(config);\r\n        \r\n        // Update icon color\r\n        if (startupProfile.color) {\r\n          updateIconColor(startupProfile.color);\r\n        }\r\n      }\r\n    } else {\r\n      Logger.debug('No startup profile change needed');\r\n    }\r\n  } catch (error) {\r\n    Logger.error('Failed to apply startup profile', error);\r\n  }\r\n}\r\n\r\n// Check conflicts immediately on startup\r\ncheckProxyConflicts();\r\n\r\n// Initialize icon color based on active profile\r\ninitializeIconColor();\r\n\r\n// Apply startup profile\r\napplyStartupProfile();\r\n\r\n// Listen for network errors to capture failed requests and aid debugging\r\n// Note: Requires \"webRequest\" permission and appropriate host permissions in manifest\r\ntry {\r\n  if (chrome.webRequest && chrome.webRequest.onErrorOccurred && chrome.webRequest.onErrorOccurred.addListener) {\r\n    chrome.webRequest.onErrorOccurred.addListener((details: any) => {\r\n      try {\r\n        Logger.warn('Request failed', {\r\n          url: details.url,\r\n          error: details.error,\r\n          method: details.method,\r\n          tabId: details.tabId,\r\n          frameId: details.frameId,\r\n          requestId: details.requestId,\r\n          timeStamp: details.timeStamp\r\n        });\r\n      } catch (err) {\r\n        Logger.error('Error logging request failure', err);\r\n      }\r\n    }, { urls: ['<all_urls>'] });\r\n  }\r\n} catch (e) {\r\n  Logger.error('Failed to register webRequest.onErrorOccurred listener', e);\r\n}\r\n\r\n// Listen for extension installation\r\nchrome.runtime.onInstalled.addListener((details) => {\r\n  if (details.reason === 'install') {\r\n    Logger.info('Extension installed');\r\n    // Initialize default settings including log level\r\n    chrome.storage.local.set({\r\n      logLevel: 1, // LogLevel.INFO\r\n      logMaxLines: 1000\r\n    });\r\n    chrome.storage.sync.set({\r\n      profiles: [],\r\n      activeProfile: 'direct',\r\n    });\r\n  }\r\n  // Check for conflicts on install/update\r\n  checkProxyConflicts();\r\n});\r\n\r\n// Listen for messages from popup/options\r\nchrome.runtime.onMessage.addListener((message: ExtensionMessage, sender, sendResponse) => {\r\n  // Security: Validate sender is from this extension\r\n  const receivedAction = (message as unknown as Record<string, unknown>)['action'];\r\n  Logger.debug('Received runtime message', { action: receivedAction, senderId: sender.id });\r\n  if (sender.id !== chrome.runtime.id) {\r\n    Logger.warn('Rejected message from unknown sender', { senderId: sender.id });\r\n    sendResponse({ success: false, error: 'Invalid sender' });\r\n    return false;\r\n  }\r\n  \r\n  // Security: Rate limiting (prevent message spam)\r\n  const senderId = sender.tab?.id?.toString() || sender.url || 'unknown';\r\n  const now = Date.now();\r\n  const lastMessage = messageRateLimit.get(senderId) || 0;\r\n  \r\n  if (now - lastMessage < RATE_LIMIT_MS) {\r\n    Logger.warn('Rate limit exceeded', { senderId, timeSinceLastMessage: now - lastMessage });\r\n    sendResponse({ success: false, error: 'Rate limit exceeded' });\r\n    return false;\r\n  }\r\n  \r\n  messageRateLimit.set(senderId, now);\r\n  \r\n  // Security: Validate action is in whitelist\r\n  if (!message.action || !isAllowedAction(message.action)) {\r\n    Logger.warn('Rejected unknown action', { action: message.action });\r\n    sendResponse({ success: false, error: 'Unknown action' });\r\n    return false;\r\n  }\r\n  \r\n  if (message.action === 'setProxy') {\r\n    // Security: Validate proxy configuration structure\r\n    if (!isValidProxyConfig(message.config)) {\r\n      Logger.warn('Rejected invalid proxy config', { config: message.config });\r\n      sendResponse({ success: false, error: 'Invalid proxy configuration' });\r\n      return false;\r\n    }\r\n    \r\n    // Security: Validate color if provided\r\n    if (message.profileColor && !isValidColor(message.profileColor)) {\r\n      Logger.warn('Rejected invalid color', { color: message.profileColor });\r\n      sendResponse({ success: false, error: 'Invalid color' });\r\n      return false;\r\n    }\r\n    \r\n    (async () => {\r\n      try {\r\n        await handleSetProxy(message.config);\r\n        if (message.profileColor) {\r\n          updateIconColor(message.profileColor);\r\n        }\r\n        sendResponse({ success: true });\r\n      } catch (error) {\r\n        Logger.error('Failed to set proxy', error);\r\n        sendResponse({ success: false, error: String(error) });\r\n      }\r\n    })();\r\n    return true; // Keep channel open for async response\r\n  } else if (message.action === 'checkConflicts') {\r\n    checkProxyConflicts().then(() => sendResponse({ success: true }));\r\n    return true; // Keep channel open for async response\r\n  }\r\n  \r\n  // This should never be reached due to whitelist check - all cases handled above\r\n  return false;\r\n});\r\n\r\n// Monitor proxy settings changes (with delay to allow changes to propagate)\r\nchrome.proxy.settings.onChange.addListener((details: any) => {\r\n  Logger.debug('Proxy settings changed', { \r\n    levelOfControl: details.levelOfControl \r\n  });\r\n  \r\n  // Check levelOfControl directly from the onChange event\r\n  if (details.levelOfControl === 'controlled_by_other_extensions') {\r\n    Logger.warn('Detected control by another extension');\r\n    chrome.action.setBadgeText({ text: '!' });\r\n    chrome.action.setBadgeBackgroundColor({ color: '#DC2626' });\r\n    chrome.action.setTitle({ \r\n      title: 'SwitchyMalaccamax - Conflict: Another extension has higher priority' \r\n    });\r\n  } else if (details.levelOfControl === 'not_controllable') {\r\n    Logger.warn('Detected not_controllable');\r\n    chrome.action.setBadgeText({ text: '?' });\r\n    chrome.action.setBadgeBackgroundColor({ color: '#F59E0B' });\r\n    chrome.action.setTitle({ \r\n      title: 'SwitchyMalaccamax - Warning: Proxy cannot be controlled' \r\n    });\r\n  } else if (details.levelOfControl === 'controlled_by_this_extension') {\r\n    Logger.debug('Confirmed control via onChange');\r\n    chrome.action.setBadgeText({ text: '' });\r\n    chrome.action.setBadgeBackgroundColor({ color: [0, 0, 0, 0] });\r\n    chrome.action.setTitle({ title: 'SwitchyMalaccamax - Proxy Switcher' });\r\n  }\r\n  \r\n  // Also check via get() as backup\r\n  setTimeout(() => checkProxyConflicts(), 100);\r\n  setTimeout(() => checkProxyConflicts(), 500);\r\n});\r\n\r\n// Periodic conflict check (every 30 seconds)\r\nsetInterval(() => {\r\n  checkProxyConflicts();\r\n}, 30000);\r\n\r\n/**\r\n * Check if another extension is controlling the proxy\r\n */\r\nasync function checkProxyConflicts(): Promise<void> {\r\n  try {\r\n    const proxySettings = await chrome.proxy.settings.get({}) as unknown as Record<string, unknown>;\r\n    const levelOfControl = proxySettings.levelOfControl;\r\n    \r\n    Logger.debug('Conflict check', { \r\n      levelOfControl, \r\n      config: proxySettings.value \r\n    });\r\n    \r\n    if (levelOfControl === 'controlled_by_other_extensions') {\r\n      // Another extension has higher priority - show red badge\r\n      await chrome.action.setBadgeText({ text: '!' });\r\n      await chrome.action.setBadgeBackgroundColor({ color: '#DC2626' }); // red-600\r\n      await chrome.action.setTitle({ \r\n        title: 'SwitchyMalaccamax - Conflict: Another extension has higher priority' \r\n      });\r\n      Logger.warn('Proxy controlled by another extension');\r\n    } else if (levelOfControl === 'controlled_by_this_extension') {\r\n      // This extension has control - clear badge completely\r\n      await chrome.action.setBadgeText({ text: '' });\r\n      await chrome.action.setBadgeBackgroundColor({ color: [0, 0, 0, 0] }); // Transparent\r\n      await chrome.action.setTitle({ title: 'SwitchyMalaccamax - Proxy Switcher' });\r\n      Logger.debug('Proxy controlled by this extension');\r\n    } else if (levelOfControl === 'controllable_by_this_extension') {\r\n      // Can take control but hasn't - clear badge completely\r\n      await chrome.action.setBadgeText({ text: '' });\r\n      await chrome.action.setBadgeBackgroundColor({ color: [0, 0, 0, 0] }); // Transparent\r\n      await chrome.action.setTitle({ title: 'SwitchyMalaccamax - Proxy Switcher' });\r\n      Logger.debug('Proxy controllable by this extension');\r\n    } else {\r\n      // Not controllable (policy/system) - show amber warning\r\n      await chrome.action.setBadgeText({ text: '?' });\r\n      await chrome.action.setBadgeBackgroundColor({ color: '#F59E0B' }); // amber-500\r\n      await chrome.action.setTitle({ \r\n        title: 'SwitchyMalaccamax - Warning: Proxy cannot be controlled' \r\n      });\r\n      Logger.warn('Proxy not controllable');\r\n    }\r\n  } catch (error) {\r\n    Logger.error('Failed to check proxy conflicts', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Apply proxy configuration\r\n */\r\nasync function handleSetProxy(config: chrome.proxy.ProxyConfig): Promise<void> {\r\n  try {\r\n    Logger.debug('Setting proxy', { mode: config.mode, pacScriptSize: config.pacScript?.data?.length });\r\n    await chrome.proxy.settings.set({\r\n      value: config,\r\n      scope: 'regular',\r\n    });\r\n    Logger.info('Proxy set successfully', { mode: config.mode });\r\n    \r\n    // Check for conflicts immediately and again after a delay\r\n    await checkProxyConflicts();\r\n    setTimeout(() => checkProxyConflicts(), 500);\r\n    setTimeout(() => checkProxyConflicts(), 1500);\r\n  } catch (error) {\r\n    Logger.error('Failed to set proxy', error);\r\n    // Check conflicts even on error to show current state\r\n    await checkProxyConflicts();\r\n  }\r\n}\r\n\r\nexport {};\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\layout\\ThemeToggle.vue","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sun' is defined but never used.","line":28,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Moon' is defined but never used.","line":28,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toggleTheme' is assigned a value but never used.","line":51,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'buttonClass' is assigned a value but never used.","line":65,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\layout\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\profile\\ProfileCard.vue","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Edit2' is defined but never used.","line":103,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":103,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Trash2' is defined but never used.","line":103,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":103,"endColumn":56,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MoreVertical' is defined but never used.","line":103,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":103,"endColumn":70,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":104,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":104,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":104,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":104,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":104,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":104,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatRelativeTime' is defined but never used.","line":105,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":105,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatCompactNumber' is defined but never used.","line":105,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":105,"endColumn":49,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cardClass' is assigned a value but never used.","line":134,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusIndicatorClass' is assigned a value but never used.","line":142,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":142,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusIcon' is assigned a value but never used.","line":150,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":150,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusIconSize' is assigned a value but never used.","line":158,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":158,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'titleClass' is assigned a value but never used.","line":160,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":160,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'descriptionClass' is assigned a value but never used.","line":165,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":165,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'profileDescription' is assigned a value but never used.","line":170,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":170,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":196,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":196,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleClick' is defined but never used.","line":196,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":196,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\profile\\ProfileEditor.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":705,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":705,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23339,23342],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23339,23342],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":722,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":722,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24003,24006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24003,24006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":754,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":754,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25291,25294],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25291,25294],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Server' is defined but never used.","line":358,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":358,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Lock' is defined but never used.","line":358,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Globe' is defined but never used.","line":358,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Info' is defined but never used.","line":358,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Zap' is defined but never used.","line":358,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":358,"endColumn":46,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dialog' is defined but never used.","line":359,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Input' is defined but never used.","line":359,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Select' is defined but never used.","line":359,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":359,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":359,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":359,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":54,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tooltip' is defined but never used.","line":359,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":63,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isBuiltInProfile' is assigned a value but never used.","line":383,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":383,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'profileTypeOptions' is assigned a value but never used.","line":444,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":444,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'proxyProtocolOptions' is assigned a value but never used.","line":451,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":451,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'colorOptions' is assigned a value but never used.","line":458,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":458,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isSwitchProfile' is assigned a value but never used.","line":469,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":469,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'testUrlPlaceholder' is assigned a value but never used.","line":472,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":472,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":489,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":489,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleProfileTypeChange' is defined but never used.","line":489,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":489,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":587,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":587,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSave' is defined but never used.","line":587,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":587,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":600,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":600,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleCancel' is defined but never used.","line":600,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":600,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":605,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":605,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":628,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":628,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'testConnection' is defined but never used.","line":628,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":628,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'response' is assigned a value but never used.","line":667,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":667,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":714,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":714,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":728,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":728,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'newType' is defined but never used.","line":772,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":772,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <Dialog\n    v-model=\"isOpen\"\n    :title=\"isEditMode ? 'Edit Profile' : 'Create Profile'\"\n    :description=\"isEditMode ? 'Update proxy profile settings' : 'Create a new proxy profile'\"\n    size=\"lg\"\n    :confirm-text=\"isEditMode ? 'Save Changes' : 'Create Profile'\"\n    confirm-variant=\"success\"\n    :loading=\"saving\"\n    @confirm=\"handleSave\"\n    @cancel=\"handleCancel\"\n  >\n    <form\n      class=\"space-y-6\"\n      @submit.prevent=\"handleSave\"\n    >\n      <!-- Basic Information -->\n      <section>\n        <h3 class=\"text-sm font-semibold mb-3\">\n          Basic Information\n        </h3>\n        <div class=\"space-y-4\">\n          <Input\n            v-model=\"formData.name\"\n            label=\"Profile Name\"\n            placeholder=\"e.g., Work Proxy, Home VPN\"\n            hint=\"Give your profile a descriptive name (max 50 characters)\"\n            :error=\"errors.name\"\n            :disabled=\"isBuiltInProfile\"\n            :maxlength=\"50\"\n            required\n          />\n          \n          <Select\n            v-if=\"!isBuiltInProfile\"\n            v-model=\"formData.profileType\"\n            :options=\"profileTypeOptions\"\n            label=\"Profile Type\"\n            hint=\"Choose how this profile handles connections\"\n            :error=\"errors.profileType\"\n            :disabled=\"isEditMode\"\n            required\n            @change=\"handleProfileTypeChange\"\n          />\n          \n          <!-- Built-in profile type display (read-only) -->\n          <div\n            v-if=\"isBuiltInProfile\"\n            class=\"space-y-1.5\"\n          >\n            <label class=\"block text-sm font-medium text-text-primary\">Profile Type</label>\n            <div class=\"px-3 py-2 text-sm rounded-md border border-border bg-slate-100 dark:bg-slate-800 text-text-secondary\">\n              {{ isDirectProfile ? 'Direct Connection' : 'System Proxy' }}\n              <span class=\"ml-2 text-xs text-text-tertiary\">(built-in)</span>\n            </div>\n            <p class=\"text-xs text-text-tertiary\">\n              {{ isDirectProfile ? 'Bypass all proxies and connect directly' : 'Uses your operating system\\'s proxy settings' }}\n            </p>\n          </div>\n          \n          <Select\n            v-model=\"formData.color\"\n            :options=\"colorOptions\"\n            label=\"Color Tag\"\n            hint=\"Helps identify profiles visually\"\n          />\n          \n          <!-- Show in Popup Toggle (always available) -->\n          <div class=\"flex items-center justify-between py-2\">\n            <div>\n              <label class=\"text-sm font-medium text-text-primary\">Show in Popup</label>\n              <p class=\"text-xs text-text-tertiary\">\n                Display this profile in the quick-switch popup menu\n              </p>\n            </div>\n            <Switch v-model=\"formData.showInPopup\" />\n          </div>\n        </div>\n      </section>\n\n      <!-- Fixed Server Settings -->\n      <section v-if=\"isFixedProfile\">\n        <h3 class=\"text-sm font-semibold mb-3\">\n          Server Settings\n        </h3>\n        <div class=\"space-y-4\">\n          <Select\n            v-model=\"formData.proxyType\"\n            :options=\"proxyProtocolOptions\"\n            label=\"Protocol\"\n            :error=\"errors.proxyType\"\n            required\n          />\n          \n          <div class=\"grid grid-cols-3 gap-4\">\n            <div class=\"col-span-2\">\n              <Input\n                v-model=\"formData.host\"\n                label=\"Host\"\n                placeholder=\"proxy.example.com\"\n                :error=\"errors.host\"\n                :maxlength=\"255\"\n                required\n              >\n                <template #prefix>\n                  <Server class=\"h-4 w-4 text-text-tertiary\" />\n                </template>\n              </Input>\n            </div>\n            <Input\n              v-model=\"formData.port\"\n              type=\"number\"\n              label=\"Port\"\n              placeholder=\"8080\"\n              :error=\"errors.port\"\n              required\n            />\n          </div>\n          \n          <div class=\"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-md\">\n            <div>\n              <p class=\"text-sm font-medium\">\n                Require Authentication\n              </p>\n              <p class=\"text-xs text-text-tertiary\">\n                {{ formData.proxyType === 'SOCKS4' ? 'SOCKS4: Username only' : 'Username and password or API token' }}\n              </p>\n            </div>\n            <Switch v-model=\"formData.requiresAuth\" />\n          </div>\n          \n          <Transition name=\"expand\">\n            <div\n              v-if=\"formData.requiresAuth\"\n              class=\"pl-4 border-l-2 border-blue-500\"\n            >\n              <div :class=\"formData.proxyType === 'SOCKS4' ? 'grid grid-cols-1' : 'grid grid-cols-2 gap-4'\">\n                <Input\n                  v-model=\"formData.username\"\n                  label=\"Username\"\n                  placeholder=\"username\"\n                  :error=\"errors.username\"\n                  :required=\"formData.requiresAuth\"\n                  :maxlength=\"128\"\n                >\n                  <template #prefix>\n                    <User class=\"h-4 w-4 text-text-tertiary\" />\n                  </template>\n                </Input>\n                \n                <Input\n                  v-if=\"formData.proxyType !== 'SOCKS4'\"\n                  v-model=\"formData.password\"\n                  type=\"password\"\n                  label=\"Password / API Token\"\n                  placeholder=\"ΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇó\"\n                  :error=\"errors.password\"\n                  :required=\"formData.requiresAuth\"\n                  :maxlength=\"256\"\n                >\n                  <template #prefix>\n                    <Lock class=\"h-4 w-4 text-text-tertiary\" />\n                  </template>\n                </Input>\n              </div>\n              \n              <!-- Protocol-specific authentication notes -->\n              <div\n                v-if=\"formData.proxyType === 'SOCKS4'\"\n                class=\"mt-2 p-2 bg-blue-50 dark:bg-blue-950/20 rounded border border-blue-200 dark:border-blue-900\"\n              >\n                <p class=\"text-xs text-blue-700 dark:text-blue-300\">\n                  <strong>Note:</strong> SOCKS4 only supports username authentication. Password field not available.\n                </p>\n              </div>\n              \n              <!-- API Token help for HTTP/HTTPS/SOCKS5 -->\n              <div\n                v-if=\"formData.proxyType !== 'SOCKS4'\"\n                class=\"mt-2 p-2 bg-amber-50 dark:bg-amber-950/20 rounded border border-amber-200 dark:border-amber-900\"\n              >\n                <p class=\"text-xs text-amber-700 dark:text-amber-300\">\n                  <strong>≡ƒÆí Using a commercial proxy?</strong> Most services (Bright Data, ScraperAPI, Oxylabs, etc.) \n                  accept API tokens in the Password field. Check your provider's documentation for the exact format.\n                </p>\n              </div>\n            </div>\n          </Transition>\n        </div>\n      </section>\n\n      <!-- PAC Script Settings -->\n      <section v-if=\"isPacProfile\">\n        <h3 class=\"text-sm font-semibold mb-3\">\n          PAC Script\n        </h3>\n        <div class=\"space-y-4\">\n          <div class=\"flex gap-2 mb-2\">\n            <Button\n              type=\"button\"\n              :variant=\"formData.pacScriptType === 'url' ? 'default' : 'ghost'\"\n              size=\"sm\"\n              @click=\"formData.pacScriptType = 'url'\"\n            >\n              PAC URL\n            </Button>\n            <Button\n              type=\"button\"\n              :variant=\"formData.pacScriptType === 'data' ? 'default' : 'ghost'\"\n              size=\"sm\"\n              @click=\"formData.pacScriptType = 'data'\"\n            >\n              PAC Script\n            </Button>\n          </div>\n          \n          <Input\n            v-if=\"formData.pacScriptType === 'url'\"\n            v-model=\"formData.pacUrl\"\n            label=\"PAC URL\"\n            placeholder=\"http://example.com/proxy.pac\"\n            hint=\"URL to PAC script file (max 2048 characters)\"\n            :error=\"errors.pacUrl\"\n            :maxlength=\"2048\"\n            required\n          >\n            <template #prefix>\n              <Globe class=\"h-4 w-4 text-text-tertiary\" />\n            </template>\n          </Input>\n          \n          <div v-else>\n            <label class=\"block text-sm font-medium mb-1.5\">PAC Script</label>\n            <textarea\n              v-model=\"formData.pacScript\"\n              rows=\"8\"\n              maxlength=\"102400\"\n              class=\"w-full px-3 py-2 text-sm font-mono rounded-md border border-border bg-bg-primary focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"function FindProxyForURL(url, host) {&#10;  return 'DIRECT';&#10;}\"\n            />\n            <p class=\"text-xs text-text-tertiary mt-1.5\">\n              JavaScript function to determine proxy (max 100KB)\n            </p>\n          </div>\n        </div>\n      </section>\n\n      <!-- Switch Profile Settings -->\n      <section v-if=\"isSwitchProfile\">\n        <h3 class=\"text-sm font-semibold mb-3\">\n          Auto-Switch Rules\n        </h3>\n        <div class=\"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-md border border-blue-200 dark:border-blue-900\">\n          <div class=\"flex items-start gap-3\">\n            <Info class=\"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\n            <div>\n              <p class=\"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1\">\n                {{ isEditMode ? 'Profile Name and Color Only' : 'Rules will be configured separately' }}\n              </p>\n              <p class=\"text-xs text-blue-700 dark:text-blue-300\">\n                {{ isEditMode ? 'On this screen you can change the profile name and color tag. Rules are configured on the profile detail page in Settings.' : 'After creating the profile, you can add conditions and target profiles for automatic switching.' }}\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- Advanced Settings -->\n      <!-- Only show bypass list for FixedProfile (DirectProfile, SystemProfile, PacProfile don't need it) -->\n      <section v-if=\"isFixedProfile\">\n        <h3 class=\"text-sm font-semibold mb-3\">\n          Advanced Settings\n        </h3>\n        <div class=\"space-y-3\">\n          <div class=\"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-md\">\n            <div>\n              <p class=\"text-sm font-medium\">\n                Bypass List\n              </p>\n              <p class=\"text-xs text-text-tertiary\">\n                Domains that skip proxy\n              </p>\n            </div>\n            <Switch\n              v-model=\"showBypassList\"\n              size=\"sm\"\n            />\n          </div>\n          \n          <Transition name=\"expand\">\n            <div\n              v-if=\"showBypassList\"\n              class=\"pl-4 border-l-2 border-slate-300 dark:border-slate-700\"\n            >\n              <Input\n                v-model=\"formData.bypassList\"\n                placeholder=\"localhost, 127.0.0.1, *.local\"\n                hint=\"Comma-separated list of hosts/patterns (max 4KB)\"\n                :maxlength=\"4096\"\n              />\n            </div>\n          </Transition>\n        </div>\n      </section>\n\n      <!-- Test Connection -->\n      <section\n        v-if=\"isFixedProfile\"\n        class=\"pt-4 border-t border-border\"\n      >\n        <div class=\"space-y-3\">\n          <div>\n            <Input\n              v-model=\"formData.testUrl\"\n              label=\"Test URL/IP (Optional)\"\n              :placeholder=\"testUrlPlaceholder\"\n              :hint=\"formData.proxyType === 'SOCKS4' || formData.proxyType === 'SOCKS5' \n                ? 'Test IP address (default: 8.8.8.8 - Google DNS)'\n                : 'Test URL (default: Google no-content endpoint)'\"\n            />\n          </div>\n          \n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex items-center gap-2\">\n              <Tooltip content=\"Test if the proxy server is reachable\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  :loading=\"testing\"\n                  @click=\"testConnection\"\n                >\n                  <Zap class=\"h-3.5 w-3.5\" />\n                  Test Connection\n                </Button>\n              </Tooltip>\n              \n              <Transition name=\"fade\">\n                <Badge\n                  v-if=\"testResult\"\n                  :variant=\"testResult.success ? 'success' : 'danger'\"\n                  size=\"sm\"\n                >\n                  {{ testResult.message }}\n                </Badge>\n              </Transition>\n            </div>\n          </div>\n        </div>\n      </section>\n    </form>\n  </Dialog>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\nimport { ref, computed, watch } from 'vue';\nimport { Server, User, Lock, Globe, Info, Zap } from 'lucide-vue-next';\nimport { Dialog, Input, Select, Switch, Button, Badge, Tooltip } from '@/components/ui';\nimport type { Profile, FixedProfile, PacProfile, SwitchProfile } from '@/core/schema';\n\ninterface Props {\n  modelValue: boolean;\n  profile?: Profile;\n}\n\nconst props = defineProps<Props>();\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: boolean];\n  save: [profile: Partial<Profile>];\n  cancel: [];\n}>();\n\nconst isOpen = computed({\n  get: () => props.modelValue,\n  set: (value) => emit('update:modelValue', value),\n});\n\nconst isEditMode = computed(() => !!props.profile);\nconst isDirectProfile = computed(() => props.profile?.profileType === 'DirectProfile');\nconst isSystemProfile = computed(() => props.profile?.profileType === 'SystemProfile');\nconst isBuiltInProfile = computed(() => isDirectProfile.value || isSystemProfile.value);\n\nconst formData = ref({\n  name: '',\n  profileType: 'FixedProfile' as Profile['profileType'],\n  color: 'blue',\n  showInPopup: true,\n  proxyType: 'HTTP',\n  host: '',\n  port: '',\n  requiresAuth: false,\n  username: '',\n  password: '',\n  pacScriptType: 'url' as 'url' | 'data',\n  pacUrl: '',\n  pacScript: '',\n  bypassList: '',\n  testUrl: 'https://www.google.com/generate_204', // Default for HTTP/HTTPS\n});\n\nconst errors = ref<Record<string, string>>({});\nconst saving = ref(false);\nconst testing = ref(false);\nconst testResult = ref<{ success: boolean; message: string } | null>(null);\nconst showBypassList = ref(false);\n\n// User-creatable profile types (excludes built-in Direct and System)\nconst creatableProfileTypeOptions = [\n  { \n    label: 'Fixed Server', \n    value: 'FixedProfile',\n    description: 'Route all traffic through a single proxy server'\n  },\n  { \n    label: 'Auto Switch', \n    value: 'SwitchProfile',\n    description: 'Automatically switch between proxies based on URL patterns'\n  },\n  { \n    label: 'PAC Script', \n    value: 'PacProfile',\n    description: 'Use a Proxy Auto-Configuration script for advanced routing'\n  },\n];\n\n// All profile types (for display when editing built-in profiles)\nconst allProfileTypeOptions = [\n  { \n    label: 'Direct Connection', \n    value: 'DirectProfile',\n    description: 'Bypass all proxies and connect directly to the internet'\n  },\n  { \n    label: 'System Proxy', \n    value: 'SystemProfile',\n    description: 'Use the operating system\\'s proxy settings'\n  },\n  ...creatableProfileTypeOptions,\n];\n\n// When creating new profiles, only show creatable types\nconst profileTypeOptions = computed(() => {\n  if (isEditMode.value) {\n    return allProfileTypeOptions;\n  }\n  return creatableProfileTypeOptions;\n});\n\nconst proxyProtocolOptions = [\n  { label: 'HTTP', value: 'HTTP' },\n  { label: 'HTTPS', value: 'HTTPS' },\n  { label: 'SOCKS4', value: 'SOCKS4' },\n  { label: 'SOCKS5', value: 'SOCKS5' },\n];\n\nconst colorOptions = [\n  { label: '≡ƒö╡ Blue', value: 'blue' },\n  { label: '≡ƒƒó Green', value: 'green' },\n  { label: '≡ƒƒú Purple', value: 'purple' },\n  { label: '≡ƒö┤ Red', value: 'red' },\n  { label: '≡ƒƒí Yellow', value: 'yellow' },\n  { label: 'ΓÜ½ Gray', value: 'gray' },\n];\n\nconst isFixedProfile = computed(() => formData.value.profileType === 'FixedProfile');\nconst isPacProfile = computed(() => formData.value.profileType === 'PacProfile');\nconst isSwitchProfile = computed(() => formData.value.profileType === 'SwitchProfile');\n\n// Test URL placeholder based on proxy type\nconst testUrlPlaceholder = computed(() => {\n  const proxyType = formData.value.proxyType;\n  if (proxyType === 'SOCKS4' || proxyType === 'SOCKS5') {\n    return '8.8.8.8 (IP address)';\n  }\n  return 'https://www.google.com/generate_204';\n});\n\n// Default test target based on proxy type\nconst defaultTestTarget = computed(() => {\n  const proxyType = formData.value.proxyType;\n  if (proxyType === 'SOCKS4' || proxyType === 'SOCKS5') {\n    return '8.8.8.8'; // Google Public DNS - reliable, always available\n  }\n  return 'https://www.google.com/generate_204'; // Google no-content endpoint\n});\n\nfunction handleProfileTypeChange() {\n  // Clear type-specific errors when changing profile type\n  errors.value = { name: errors.value.name };\n  testResult.value = null;\n}\n\nfunction validateForm(): boolean {\n  errors.value = {};\n  \n  if (!formData.value.name.trim()) {\n    errors.value.name = 'Profile name is required';\n  }\n  \n  if (isFixedProfile.value) {\n    if (!formData.value.host.trim()) {\n      errors.value.host = 'Host is required';\n    }\n    if (!formData.value.port) {\n      errors.value.port = 'Port is required';\n    } else if (Number(formData.value.port) < 1 || Number(formData.value.port) > 65535) {\n      errors.value.port = 'Port must be between 1 and 65535';\n    }\n    \n    if (formData.value.requiresAuth) {\n      if (!formData.value.username.trim()) {\n        errors.value.username = 'Username is required';\n      }\n      if (!formData.value.password) {\n        errors.value.password = 'Credentials are required';\n      }\n    }\n  }\n  \n  if (isPacProfile.value && formData.value.pacScriptType === 'url') {\n    if (!formData.value.pacUrl.trim()) {\n      errors.value.pacUrl = 'PAC URL is required';\n    } else if (!formData.value.pacUrl.match(/^https?:\\/\\//)) {\n      errors.value.pacUrl = 'Must be a valid HTTP/HTTPS URL';\n    }\n  }\n  \n  return Object.keys(errors.value).length === 0;\n}\n\nfunction buildProfile(): Partial<Profile> {\n  const base = {\n    name: formData.value.name.trim(),\n    profileType: formData.value.profileType,\n    color: formData.value.color,\n    showInPopup: formData.value.showInPopup,\n  };\n  \n  switch (formData.value.profileType) {\n    case 'FixedProfile':\n      return {\n        ...base,\n        profileType: 'FixedProfile',\n        proxyType: formData.value.proxyType,\n        host: formData.value.host.trim(),\n        port: Number(formData.value.port),\n        ...(formData.value.requiresAuth && {\n          username: formData.value.username,\n          password: formData.value.password,\n        }),\n        ...(formData.value.bypassList && {\n          bypassList: formData.value.bypassList\n            .split(',')\n            .map(s => s.trim())\n            .filter(Boolean)\n            .map(pattern => ({\n              conditionType: 'BypassCondition',\n              pattern\n            })),\n        }),\n      } as Partial<FixedProfile>;\n      \n    case 'PacProfile':\n      return {\n        ...base,\n        profileType: 'PacProfile',\n        ...(formData.value.pacScriptType === 'url'\n          ? { pacUrl: formData.value.pacUrl }\n          : { pacScript: formData.value.pacScript }\n        ),\n      } as Partial<PacProfile>;\n      \n    case 'SwitchProfile':\n      return {\n        ...base,\n        profileType: 'SwitchProfile',\n        rules: [],\n      } as Partial<SwitchProfile>;\n      \n    default:\n      return base;\n  }\n}\n\nasync function handleSave() {\n  if (!validateForm()) return;\n  \n  saving.value = true;\n  try {\n    const profile = buildProfile();\n    emit('save', profile);\n    // Parent will close the dialog after successful save\n  } finally {\n    saving.value = false;\n  }\n}\n\nfunction handleCancel() {\n  emit('cancel');\n  resetForm();\n}\n\nfunction resetForm() {\n  formData.value = {\n    name: '',\n    profileType: 'FixedProfile',\n    color: 'blue',\n    showInPopup: true,\n    proxyType: 'HTTP',\n    host: '',\n    port: '',\n    requiresAuth: false,\n    username: '',\n    password: '',\n    pacScriptType: 'url',\n    pacUrl: '',\n    pacScript: '',\n    bypassList: '',\n    testUrl: 'https://www.google.com/generate_204',\n  };\n  errors.value = {};\n  testResult.value = null;\n  showBypassList.value = false;\n}\n\nasync function testConnection() {\n  if (!formData.value.host || !formData.value.port) {\n    testResult.value = { success: false, message: 'Enter host and port first' };\n    return;\n  }\n  \n  testing.value = true;\n  testResult.value = null;\n  \n  const proxyType = formData.value.proxyType;\n  const isSocks = proxyType === 'SOCKS4' || proxyType === 'SOCKS5';\n  \n  // Get test target (use custom or default)\n  const testTarget = formData.value.testUrl.trim() || defaultTestTarget.value;\n  \n  try {\n    // Build test proxy config\n    const testConfig: chrome.proxy.ProxyConfig = {\n      mode: 'fixed_servers',\n      rules: {\n        singleProxy: {\n          scheme: proxyType.toLowerCase() as 'http' | 'https' | 'socks4' | 'socks5',\n          host: formData.value.host,\n          port: Number(formData.value.port),\n        },\n      },\n    };\n    \n    // Temporarily apply the proxy\n    await chrome.proxy.settings.set({ value: testConfig, scope: 'regular' });\n    \n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n    \n    try {\n      if (isSocks) {\n        // For SOCKS proxies, test with a simple HTTP request to the target\n        // If testTarget is an IP, try to reach it via HTTP\n        const testUrl = testTarget.startsWith('http') ? testTarget : `http://${testTarget}`;\n        const response = await fetch(testUrl, {\n          method: 'HEAD',\n          signal: controller.signal,\n          mode: 'no-cors', // Avoid CORS issues when testing IPs\n        });\n        \n        clearTimeout(timeoutId);\n        \n        // For SOCKS, if we didn't timeout, consider it success\n        testResult.value = {\n          success: true,\n          message: 'Connected successfully',\n        };\n      } else {\n        // For HTTP/HTTPS proxies, test with standard request\n        const response = await fetch(testTarget, {\n          method: 'GET',\n          signal: controller.signal,\n          // Note: Proxy auth is handled by Chrome if configured\n        });\n      \n        clearTimeout(timeoutId);\n        \n        // Status 204 (No Content) is expected from this endpoint\n        const success = response.status === 204 || response.ok;\n        testResult.value = {\n          success,\n          message: success ? 'Connected successfully' : `HTTP ${response.status}`,\n        };\n        \n        // If auth is required and not provided, Chrome will show auth dialog\n        if (response.status === 407) {\n          testResult.value = {\n            success: false,\n            message: 'Proxy authentication required',\n          };\n        }\n      }\n    } catch (error: any) {\n      clearTimeout(timeoutId);\n      \n      if (error.name === 'AbortError') {\n        testResult.value = { success: false, message: 'Connection timeout' };\n      } else {\n        testResult.value = { success: false, message: 'Connection failed' };\n      }\n    }\n  } catch (error) {\n    testResult.value = { success: false, message: 'Test failed' };\n  } finally {\n    // Restore original proxy settings\n    try {\n      const { activeProfileId } = await chrome.storage.sync.get('activeProfileId');\n      const { profiles } = await chrome.storage.local.get('profiles');\n      if (profiles && activeProfileId) {\n        const activeProfile = profiles.find((p: any) => p.id === activeProfileId);\n        if (activeProfile) {\n          // Restore active profile (implementation would need full proxy logic)\n          await chrome.runtime.sendMessage({ action: 'restoreProxy' });\n        }\n      }\n    } catch (error) {\n      // Ignore restoration errors\n    }\n    \n    testing.value = false;\n  }\n}\n\n// Load profile data when editing\nwatch(() => props.profile, (profile) => {\n  if (profile) {\n    formData.value.name = profile.name;\n    formData.value.profileType = profile.profileType;\n    formData.value.color = profile.color || 'blue';\n    formData.value.showInPopup = profile.showInPopup !== false; // Default to true\n    \n    if (profile.profileType === 'FixedProfile') {\n      formData.value.proxyType = profile.proxyType || 'HTTP';\n      formData.value.host = profile.host || '';\n      formData.value.port = String(profile.port || '');\n      formData.value.requiresAuth = !!(profile.username || profile.password);\n      formData.value.username = profile.username || '';\n      formData.value.password = profile.password || '';\n      if (profile.bypassList && Array.isArray(profile.bypassList)) {\n        // Convert BypassCondition array to comma-separated string\n        formData.value.bypassList = profile.bypassList\n          .map((condition: any) => condition.pattern || '')\n          .filter(pattern => pattern)\n          .join(', ');\n        showBypassList.value = profile.bypassList.length > 0;\n      }\n    } else if (profile.profileType === 'PacProfile') {\n      if ('pacUrl' in profile && profile.pacUrl) {\n        formData.value.pacScriptType = 'url';\n        formData.value.pacUrl = profile.pacUrl;\n      } else if ('pacScript' in profile && profile.pacScript) {\n        formData.value.pacScriptType = 'data';\n        formData.value.pacScript = profile.pacScript;\n      }\n    }\n  }\n}, { immediate: true });\n\n// Update test URL when proxy type changes\nwatch(() => formData.value.proxyType, (newType) => {\n  // Only update if field is empty or contains a default value\n  const currentValue = formData.value.testUrl.trim();\n  const isDefaultHttpUrl = currentValue === 'https://www.google.com/generate_204' || currentValue === '';\n  const isDefaultSocksIp = currentValue === '8.8.8.8' || currentValue === '';\n  \n  // Update to new default if current value is a default or empty\n  if (isDefaultHttpUrl || isDefaultSocksIp) {\n    formData.value.testUrl = defaultTestTarget.value;\n  }\n});\n\n// Reset when dialog closes\nwatch(isOpen, (open) => {\n  if (!open && !isEditMode.value) {\n    resetForm();\n  }\n});\n</script>\n\n<style scoped>\n.expand-enter-active,\n.expand-leave-active {\n  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);\n  overflow: hidden;\n}\n\n.expand-enter-from,\n.expand-leave-to {\n  opacity: 0;\n  max-height: 0;\n  margin-top: 0;\n}\n\n.expand-enter-to,\n.expand-leave-from {\n  opacity: 1;\n  max-height: 500px;\n}\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 200ms ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\profile\\ProfileImportExport.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":372,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":372,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12805,12808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12805,12808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":414,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":414,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14116,14119],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14116,14119],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":436,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":436,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14755,14758],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14755,14758],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":438,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":438,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14850,14853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14850,14853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":585,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":585,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19373,19376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19373,19376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":281,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Upload' is defined but never used.","line":281,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Copy' is defined but never used.","line":281,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileJson' is defined but never used.","line":281,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":281,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":281,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":51,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":281,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":281,"endColumn":64,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":284,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":284,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":284,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":284,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":284,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":284,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":284,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":284,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tooltip' is defined but never used.","line":284,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":284,"endColumn":46,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dropZoneClass' is assigned a value but never used.","line":315,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":315,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'uploadIconClass' is assigned a value but never used.","line":322,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":322,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportableCount' is assigned a value but never used.","line":332,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":332,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileTypeLabel' is defined but never used.","line":334,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":334,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":345,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":345,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileBadgeVariant' is defined but never used.","line":345,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":345,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":356,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":356,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileIcon' is defined but never used.","line":356,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":356,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":367,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":367,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportProfiles' is defined but never used.","line":367,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":367,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":491,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":491,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'copyToClipboard' is defined but never used.","line":491,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":491,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":505,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":505,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'triggerFileInput' is defined but never used.","line":505,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":505,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":509,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":509,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleFileSelect' is defined but never used.","line":509,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":509,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":517,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":517,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleDrop' is defined but never used.","line":517,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":517,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":525,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":525,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":646,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":646,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":654,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":654,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":659,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":659,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'confirmImport' is defined but never used.","line":659,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":659,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatFileSize' is defined but never used.","line":671,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":671,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<!-- eslint-disable vue/valid-v-for -->\r\n<template>\r\n  <Card\r\n    padding=\"lg\"\r\n    class=\"profile-import-export\"\r\n  >\r\n    <div class=\"space-y-6\">\r\n      <!-- Header -->\r\n      <div>\r\n        <h3 class=\"text-lg font-semibold mb-2\">\r\n          Import & Export Profiles\r\n        </h3>\r\n        <p class=\"text-sm text-text-secondary\">\r\n          Backup your profiles or import from another device\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Export Section -->\r\n      <section>\r\n        <h4 class=\"text-sm font-semibold mb-3 flex items-center gap-2\">\r\n          <Download class=\"h-4 w-4\" />\r\n          Export Profiles\r\n        </h4>\r\n        \r\n        <div class=\"space-y-3\">\r\n          <div class=\"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900 rounded-md\">\r\n            <div>\r\n              <p class=\"text-sm font-medium\">\r\n                Include all profiles\r\n              </p>\r\n              <p class=\"text-xs text-text-tertiary\">\r\n                Export {{ exportableCount }} profile(s)\r\n              </p>\r\n              <p class=\"text-xs text-slate-500 dark:text-zinc-600\">\r\n                Direct profile is excluded (always present)\r\n              </p>\r\n            </div>\r\n            <Switch v-model=\"exportAll\" />\r\n          </div>\r\n          \r\n          <Transition name=\"expand\">\r\n            <div\r\n              v-if=\"!exportAll\"\r\n              class=\"pl-4 border-l-2 border-blue-500\"\r\n            >\r\n              <p class=\"text-xs text-text-tertiary mb-2\">\r\n                Select profiles to export:\r\n              </p>\r\n              <div class=\"space-y-2 max-h-48 overflow-y-auto scrollbar-thin\">\r\n                <label\r\n                  v-for=\"(profile, idx) in exportableProfiles\"\r\n                  :key=\"profile.id\"\r\n                  class=\"flex items-center gap-2 p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded cursor-pointer\"\r\n                >\r\n                  <input\r\n                    v-model=\"selectedProfiles\"\r\n                    type=\"checkbox\"\r\n                    :value=\"profile.id\"\r\n                    class=\"rounded\"\r\n                  >\r\n                  <span class=\"text-sm\">{{ profile.name }}</span>\r\n                  <Badge\r\n                    :variant=\"getProfileBadgeVariant(profile)\"\r\n                    size=\"xs\"\r\n                  >\r\n                    {{ getProfileTypeLabel(profile.profileType) }}\r\n                  </Badge>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </Transition>\r\n          \r\n          <div class=\"flex gap-2\">\r\n            <Button\r\n              :disabled=\"!exportAll && selectedProfiles.length === 0\"\r\n              @click=\"exportProfiles('json')\"\r\n            >\r\n              <Download class=\"h-4 w-4\" />\r\n              Export as JSON\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              :disabled=\"!exportAll && selectedProfiles.length === 0\"\r\n              @click=\"exportProfiles('bak')\"\r\n            >\r\n              <Download class=\"h-4 w-4\" />\r\n              Export as .BAK (Legacy)\r\n            </Button>\r\n            <Tooltip content=\"Copy profile data to clipboard\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                :disabled=\"!exportAll && selectedProfiles.length === 0\"\r\n                @click=\"copyToClipboard\"\r\n              >\r\n                <Copy class=\"h-4 w-4\" />\r\n              </Button>\r\n            </Tooltip>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <div class=\"border-t border-border\" />\r\n\r\n      <!-- Import Section -->\r\n      <section>\r\n        <h4 class=\"text-sm font-semibold mb-3 flex items-center gap-2\">\r\n          <Upload class=\"h-4 w-4\" />\r\n          Import Profiles\r\n        </h4>\r\n        \r\n        <div class=\"space-y-4\">\r\n          <!-- Drop Zone -->\r\n          <div\r\n            :class=\"dropZoneClass\"\r\n            @drop.prevent=\"handleDrop\"\r\n            @dragover.prevent=\"isDragging = true\"\r\n            @dragleave.prevent=\"isDragging = false\"\r\n            @click=\"triggerFileInput\"\r\n          >\r\n            <input\r\n              ref=\"fileInputRef\"\r\n              type=\"file\"\r\n              accept=\".json,.bak\"\r\n              class=\"hidden\"\r\n              @change=\"handleFileSelect\"\r\n            >\r\n            \r\n            <div class=\"text-center\">\r\n              <div class=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/20 mb-4\">\r\n                <Upload :class=\"uploadIconClass\" />\r\n              </div>\r\n              \r\n              <p class=\"text-sm font-medium mb-2\">\r\n                Drop file here or click to browse\r\n              </p>\r\n              <p class=\"text-xs text-text-tertiary\">\r\n                Supports .json (SwitchyMalaccamax) and .bak (Legacy SwitchyOmega)\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- File Info -->\r\n          <Transition name=\"fade\">\r\n            <Card\r\n              v-if=\"selectedFile\"\r\n              variant=\"outline\"\r\n              padding=\"md\"\r\n            >\r\n              <div class=\"flex items-start justify-between\">\r\n                <div class=\"flex items-start gap-3\">\r\n                  <FileJson class=\"h-8 w-8 text-blue-600 dark:text-blue-400 flex-shrink-0\" />\r\n                  <div>\r\n                    <p class=\"text-sm font-medium\">\r\n                      {{ selectedFile.name }}\r\n                    </p>\r\n                    <p class=\"text-xs text-text-tertiary\">\r\n                      {{ formatFileSize(selectedFile.size) }}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  class=\"h-7 w-7\"\r\n                  @click=\"clearFile\"\r\n                >\r\n                  <X class=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            </Card>\r\n          </Transition>\r\n          \r\n          <!-- Parse Results -->\r\n          <Transition name=\"fade\">\r\n            <div\r\n              v-if=\"parseResult\"\r\n              class=\"space-y-3\"\r\n            >\r\n              <Card\r\n                :variant=\"parseResult.success ? 'default' : 'outline'\"\r\n                :class=\"parseResult.success ? 'border-green-500' : 'border-red-500'\"\r\n                padding=\"md\"\r\n              >\r\n                <div class=\"flex items-start gap-3\">\r\n                  <component\r\n                    :is=\"parseResult.success ? CheckCircle : AlertCircle\"\r\n                    :class=\"parseResult.success ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'\"\r\n                    class=\"h-5 w-5 flex-shrink-0\"\r\n                  />\r\n                  <div>\r\n                    <p class=\"text-sm font-medium\">\r\n                      {{ parseResult.message }}\r\n                    </p>\r\n                    <p\r\n                      v-if=\"parseResult.profiles.length > 0\"\r\n                      class=\"text-xs text-text-tertiary mt-1\"\r\n                    >\r\n                      Found {{ parseResult.profiles.length }} profile(s)\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n              \r\n              <!-- Profile Preview -->\r\n              <div\r\n                v-if=\"parseResult.success && parseResult.profiles.length > 0\"\r\n                class=\"space-y-2\"\r\n              >\r\n                <p class=\"text-xs font-semibold uppercase tracking-wide text-text-tertiary\">\r\n                  Profiles to import:\r\n                </p>\r\n                <div class=\"max-h-48 overflow-y-auto scrollbar-thin space-y-2\">\r\n                  <Card\r\n                    v-for=\"(profile, index) in parseResult.profiles\"\r\n                    :key=\"profile.id\"\r\n                    variant=\"outline\"\r\n                    padding=\"sm\"\r\n                  >\r\n                    <div class=\"flex items-center justify-between\">\r\n                      <div class=\"flex items-center gap-2\">\r\n                        <component\r\n                          :is=\"getProfileIcon(profile.profileType)\"\r\n                          class=\"h-4 w-4 text-text-tertiary\"\r\n                        />\r\n                        <span class=\"text-sm font-medium\">{{ profile.name }}</span>\r\n                      </div>\r\n                      <Badge\r\n                        :variant=\"getProfileBadgeVariant(profile)\"\r\n                        size=\"xs\"\r\n                      >\r\n                        {{ getProfileTypeLabel(profile.profileType) }}\r\n                      </Badge>\r\n                    </div>\r\n                  </Card>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Transition>\r\n          \r\n          <!-- Import Actions -->\r\n          <div\r\n            v-if=\"parseResult?.success\"\r\n            class=\"flex items-center justify-between pt-2\"\r\n          >\r\n            <div class=\"flex items-center gap-2\">\r\n              <Switch\r\n                v-model=\"replaceExisting\"\r\n                size=\"sm\"\r\n              />\r\n              <span class=\"text-xs text-text-tertiary\">Replace existing profiles</span>\r\n            </div>\r\n            \r\n            <div class=\"flex gap-2\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                @click=\"clearImport\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                variant=\"success\"\r\n                :loading=\"importing\"\r\n                @click=\"confirmImport\"\r\n              >\r\n                <Upload class=\"h-4 w-4\" />\r\n                Import {{ parseResult.profiles.length }} Profile(s)\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  </Card>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\r\nimport { ref, computed } from 'vue';\r\nimport {\r\n  Download, Upload, Copy, FileJson, X, CheckCircle, AlertCircle,\r\n  Activity, Circle, Server, Globe,\r\n} from 'lucide-vue-next';\r\nimport { Card, Button, Switch, Badge, Tooltip } from '@/components/ui';\r\nimport { copyToClipboard as copyText } from '@/lib/utils';\r\nimport type { Profile } from '@/core/schema';\r\nimport { Logger } from '@/utils/Logger';\r\n\r\nLogger.setComponentPrefix('ProfileImportExport');\r\n\r\ninterface Props {\r\n  profiles: Profile[];\r\n}\r\n\r\nconst props = defineProps<Props>();\r\n\r\nconst emit = defineEmits<{\r\n  import: [profiles: Profile[], replace: boolean];\r\n  exportComplete: [];\r\n}>();\r\n\r\nconst exportAll = ref(true);\r\nconst selectedProfiles = ref<string[]>([]);\r\nconst isDragging = ref(false);\r\nconst selectedFile = ref<File | null>(null);\r\nconst parseResult = ref<{\r\n  success: boolean;\r\n  message: string;\r\n  profiles: Profile[];\r\n} | null>(null);\r\nconst replaceExisting = ref(false);\r\nconst importing = ref(false);\r\nconst fileInputRef = ref<HTMLInputElement>();\r\n\r\nconst dropZoneClass = computed(() => [\r\n  'border-2 border-dashed rounded-lg p-8 transition-all duration-200 cursor-pointer',\r\n  isDragging.value\r\n    ? 'border-blue-500 bg-blue-50 dark:bg-blue-950/20'\r\n    : 'border-border hover:border-blue-400 hover:bg-slate-50 dark:hover:bg-slate-900',\r\n]);\r\n\r\nconst uploadIconClass = computed(() => [\r\n  'h-8 w-8 transition-transform duration-200',\r\n  isDragging.value ? 'text-blue-600 dark:text-blue-400 scale-110' : 'text-text-tertiary',\r\n]);\r\n\r\nconst exportableProfiles = computed(() => {\r\n  // Exclude Direct profile as it's always present and should not be exported\r\n  return props.profiles.filter(p => p.name !== 'Direct');\r\n});\r\n\r\nconst exportableCount = computed(() => exportableProfiles.value.length);\r\n\r\nfunction getProfileTypeLabel(type: Profile['profileType']): string {\r\n  const labels = {\r\n    DirectProfile: 'Direct',\r\n    SystemProfile: 'System',\r\n    FixedProfile: 'Fixed',\r\n    SwitchProfile: 'Switch',\r\n    PacProfile: 'PAC',\r\n  };\r\n  return labels[type] || type;\r\n}\r\n\r\nfunction getProfileBadgeVariant(profile: Profile) {\r\n  const variants = {\r\n    DirectProfile: 'secondary',\r\n    SystemProfile: 'secondary',\r\n    FixedProfile: 'default',\r\n    SwitchProfile: 'success',\r\n    PacProfile: 'warning',\r\n  };\r\n  return variants[profile.profileType] || 'default';\r\n}\r\n\r\nfunction getProfileIcon(type: Profile['profileType']) {\r\n  const icons = {\r\n    DirectProfile: Circle,\r\n    SystemProfile: Globe,\r\n    FixedProfile: Server,\r\n    SwitchProfile: Activity,\r\n    PacProfile: Globe,\r\n  };\r\n  return icons[type] || Server;\r\n}\r\n\r\nasync function exportProfiles(format: 'json' | 'bak' = 'json') {\r\n  const profilesToExport = exportAll.value\r\n    ? exportableProfiles.value\r\n    : exportableProfiles.value.filter(p => selectedProfiles.value.includes(p.id));\r\n  \r\n  let data: any;\r\n  let filename: string;\r\n  let mimeType: string;\r\n  let fileExtension: string;\r\n  \r\n  if (format === 'bak') {\r\n    // Convert to legacy SwitchyOmega .bak format\r\n    data = convertToOmegaFormat(profilesToExport);\r\n    filename = `SwitchyOmega_${Date.now()}.bak`;\r\n    mimeType = 'application/octet-stream';\r\n    fileExtension = '.bak';\r\n  } else {\r\n    // Modern JSON format\r\n    data = {\r\n      version: '1.0.0',\r\n      exported: new Date().toISOString(),\r\n      profiles: profilesToExport,\r\n    };\r\n    filename = `switchymalaccamax-profiles-${Date.now()}.json`;\r\n    mimeType = 'application/json';\r\n    fileExtension = '.json';\r\n  }\r\n  \r\n  const content = JSON.stringify(data, null, 2);\r\n  \r\n  try {\r\n    // Use Chrome's File System Access API for save dialog\r\n    const opts = {\r\n      suggestedName: filename,\r\n      types: [{\r\n        description: format === 'bak' ? 'Legacy Backup Files' : 'JSON Files',\r\n        accept: { [mimeType]: [fileExtension] }\r\n      }]\r\n    };\r\n    \r\n    // @ts-expect-error - showSaveFilePicker is available in Chrome\r\n    const handle = await window.showSaveFilePicker(opts);\r\n    const writable = await handle.createWritable();\r\n    await writable.write(content);\r\n    await writable.close();\r\n    \r\n    Logger.info('Profiles exported successfully');\r\n  } catch (err: any) {\r\n    if (err.name === 'AbortError') {\r\n      Logger.info('Export cancelled by user');\r\n      return;\r\n    }\r\n    \r\n    // Fallback to download if File System Access API fails\r\n    Logger.info('Using fallback download method');\r\n    const blob = new Blob([content], { type: mimeType });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  }\r\n  \r\n  emit('exportComplete');\r\n}\r\n\r\nfunction convertToOmegaFormat(profiles: Profile[]): any {\r\n  // Convert our modern format to legacy SwitchyOmega .bak format\r\n  const omegaConfig: any = {\r\n    schemaVersion: 2,\r\n    '+proxy': {},\r\n  };\r\n  \r\n  for (const profile of profiles) {\r\n    const key = profile.id.replace('imported-', '');\r\n    \r\n    if (profile.profileType === 'DirectProfile') {\r\n      omegaConfig['+proxy'][key] = {\r\n        name: profile.name,\r\n        profileType: 'DirectProfile',\r\n        color: profile.color || 'gray',\r\n      };\r\n    } else if (profile.profileType === 'SystemProfile') {\r\n      omegaConfig['+proxy'][key] = {\r\n        name: profile.name,\r\n        profileType: 'SystemProfile',\r\n        color: profile.color || 'gray',\r\n      };\r\n    } else if (profile.profileType === 'FixedProfile' && 'host' in profile) {\r\n      omegaConfig['+proxy'][key] = {\r\n        name: profile.name,\r\n        profileType: 'FixedProfile',\r\n        color: profile.color || 'blue',\r\n        fallbackProxy: {\r\n          scheme: profile.proxyType?.toLowerCase() || 'http',\r\n          host: profile.host,\r\n          port: profile.port,\r\n        },\r\n        bypassList: (profile as unknown as Record<string, unknown>).bypassList || [],\r\n      };\r\n    } else if (profile.profileType === 'SwitchProfile' && 'rules' in profile) {\r\n      omegaConfig['+proxy'][key] = {\r\n        name: profile.name,\r\n        profileType: 'SwitchProfile',\r\n        color: profile.color || 'green',\r\n        defaultProfileName: (profile as unknown as Record<string, unknown>).defaultProfileName || 'direct',\r\n        rules: (profile as unknown as Record<string, unknown>).rules || [],\r\n      };\r\n    } else if (profile.profileType === 'PacProfile' && 'pacScript' in profile) {\r\n      omegaConfig['+proxy'][key] = {\r\n        name: profile.name,\r\n        profileType: 'PacProfile',\r\n        color: profile.color || 'purple',\r\n        pacScript: (profile as unknown as Record<string, unknown>).pacScript || '',\r\n      };\r\n    }\r\n  }\r\n  \r\n  return omegaConfig;\r\n}\r\n\r\nasync function copyToClipboard() {\r\n  const profilesToExport = exportAll.value\r\n    ? props.profiles\r\n    : props.profiles.filter(p => selectedProfiles.value.includes(p.id));\r\n  \r\n  const data = {\r\n    version: '1.0.0',\r\n    exported: new Date().toISOString(),\r\n    profiles: profilesToExport,\r\n  };\r\n  \r\n  await copyText(JSON.stringify(data, null, 2));\r\n}\r\n\r\nfunction triggerFileInput() {\r\n  fileInputRef.value?.click();\r\n}\r\n\r\nfunction handleFileSelect(event: Event) {\r\n  const target = event.target as HTMLInputElement;\r\n  const file = target.files?.[0];\r\n  if (file) {\r\n    handleFile(file);\r\n  }\r\n}\r\n\r\nfunction handleDrop(event: DragEvent) {\r\n  isDragging.value = false;\r\n  const file = event.dataTransfer?.files[0];\r\n  if (file && (file.name.endsWith('.json') || file.name.endsWith('.bak'))) {\r\n    handleFile(file);\r\n  }\r\n}\r\n\r\nasync function handleFile(file: File) {\r\n  selectedFile.value = file;\r\n  parseResult.value = null;\r\n  \r\n  const isBakFile = file.name.endsWith('.bak');\r\n  \r\n  try {\r\n    const text = await file.text();\r\n    const data = JSON.parse(text);\r\n    \r\n    // Support multiple formats\r\n    let profiles: Profile[] = [];\r\n    \r\n    if (isBakFile || (data['+proxy'] && typeof data['+proxy'] === 'object')) {\r\n      // Legacy SwitchyOmega .bak format or Omega format\r\n      profiles = convertFromOmegaFormat(data);\r\n      if (profiles.length > 0) {\r\n        // Filter out Direct profile as it's always present\r\n        profiles = profiles.filter(p => p.name !== 'Direct');\r\n        parseResult.value = {\r\n          success: true,\r\n          message: `Legacy format detected - converted ${profiles.length} profile(s)`,\r\n          profiles,\r\n        };\r\n        return;\r\n      }\r\n    } else if (Array.isArray(data)) {\r\n      // Direct array of profiles\r\n      profiles = data;\r\n    } else if (data.profiles && Array.isArray(data.profiles)) {\r\n      // Wrapped format { profiles: [...] }\r\n      profiles = data.profiles;\r\n    }\r\n    \r\n    // Filter out Direct profile as it's always present\r\n    profiles = profiles.filter(p => p.name !== 'Direct');\r\n    \r\n    if (profiles.length === 0) {\r\n      parseResult.value = {\r\n        success: false,\r\n        message: 'No valid profiles found in file',\r\n        profiles: [],\r\n      };\r\n      return;\r\n    }\r\n    \r\n    parseResult.value = {\r\n      success: true,\r\n      message: `File parsed successfully - found ${profiles.length} profile(s)`,\r\n      profiles,\r\n    };\r\n  } catch (error) {\r\n    parseResult.value = {\r\n      success: false,\r\n      message: error instanceof Error ? error.message : 'Failed to parse file',\r\n      profiles: [],\r\n    };\r\n  }\r\n}\r\n\r\nfunction convertFromOmegaFormat(data: any): Profile[] {\r\n  // Convert SwitchyOmega/ZeroOmega .bak format to our format\r\n  const profiles: Profile[] = [];\r\n  const proxyConfig = data['+proxy'] || data;\r\n  \r\n  for (const [key, value] of Object.entries(proxyConfig)) {\r\n    if (typeof value !== 'object' || value === null) continue;\r\n    \r\n    const config = value as unknown as Record<string, unknown>;\r\n    const profileType = config.profileType || 'FixedProfile';\r\n    \r\n    // Convert based on profile type\r\n    if (profileType === 'DirectProfile' || config.name === 'direct') {\r\n      profiles.push({\r\n        id: `imported-${key}`,\r\n        name: config.name || 'Direct Connection',\r\n        profileType: 'DirectProfile',\r\n        color: config.color || 'gray',\r\n      });\r\n    } else if (profileType === 'SystemProfile' || config.name === 'system') {\r\n      profiles.push({\r\n        id: `imported-${key}`,\r\n        name: config.name || 'System Proxy',\r\n        profileType: 'SystemProfile',\r\n        color: config.color || 'gray',\r\n      });\r\n    } else if (profileType === 'FixedProfile' || config.fallbackProxy) {\r\n      const fallback = config.fallbackProxy || config;\r\n      profiles.push({\r\n        id: `imported-${key}`,\r\n        name: config.name || key,\r\n        profileType: 'FixedProfile',\r\n        proxyType: (fallback.scheme || 'http').toUpperCase(),\r\n        host: fallback.host || 'localhost',\r\n        port: fallback.port || 8080,\r\n        bypassList: config.bypassList || [],\r\n        color: config.color || 'blue',\r\n      });\r\n    } else if (profileType === 'SwitchProfile' || config.rules) {\r\n      profiles.push({\r\n        id: `imported-${key}`,\r\n        name: config.name || key,\r\n        profileType: 'SwitchProfile',\r\n        defaultProfileName: config.defaultProfileName || 'direct',\r\n        rules: config.rules || [],\r\n        color: config.color || 'green',\r\n      });\r\n    } else if (profileType === 'PacProfile' || config.pacScript) {\r\n      profiles.push({\r\n        id: `imported-${key}`,\r\n        name: config.name || key,\r\n        profileType: 'PacProfile',\r\n        pacScript: config.pacScript || '',\r\n        color: config.color || 'purple',\r\n      });\r\n    }\r\n  }\r\n  \r\n  return profiles.filter(p => p.name !== 'direct' && p.name !== 'system' || profiles.length === 1);\r\n}\r\n\r\nfunction clearFile() {\r\n  selectedFile.value = null;\r\n  parseResult.value = null;\r\n  if (fileInputRef.value) {\r\n    fileInputRef.value.value = '';\r\n  }\r\n}\r\n\r\nfunction clearImport() {\r\n  clearFile();\r\n  replaceExisting.value = false;\r\n}\r\n\r\nasync function confirmImport() {\r\n  if (!parseResult.value?.profiles.length) return;\r\n  \r\n  importing.value = true;\r\n  try {\r\n    emit('import', parseResult.value.profiles, replaceExisting.value);\r\n    clearImport();\r\n  } finally {\r\n    importing.value = false;\r\n  }\r\n}\r\n\r\nfunction formatFileSize(bytes: number): string {\r\n  if (bytes < 1024) return bytes + ' B';\r\n  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\r\n  return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.expand-enter-active,\r\n.expand-leave-active {\r\n  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  overflow: hidden;\r\n}\r\n\r\n.expand-enter-from,\r\n.expand-leave-to {\r\n  opacity: 0;\r\n  max-height: 0;\r\n}\r\n\r\n.expand-enter-to,\r\n.expand-leave-from {\r\n  opacity: 1;\r\n  max-height: 300px;\r\n}\r\n\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 200ms ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\profile\\ProfileList.vue","messages":[{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'activeProfileId' requires default value to be set.","line":115,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":115,"endColumn":28}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Search' is defined but never used.","line":101,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Inbox' is defined but never used.","line":101,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Plus' is defined but never used.","line":101,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":101,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ProfileCard' is defined but never used.","line":102,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":103,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":103,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasMore' is assigned a value but never used.","line":164,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":164,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'listClass' is assigned a value but never used.","line":168,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":168,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":173,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":173,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSelect' is defined but never used.","line":173,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":173,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":177,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":177,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loadMore' is defined but never used.","line":177,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":177,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<!-- eslint-disable vue/valid-v-for -->\r\n<template>\r\n  <div class=\"profile-list\">\r\n    <!-- Search -->\r\n    <div\r\n      v-if=\"searchable\"\r\n      class=\"mb-4\"\r\n    >\r\n      <div class=\"relative\">\r\n        <Search class=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-text-tertiary\" />\r\n        <input\r\n          v-model=\"searchQuery\"\r\n          type=\"text\"\r\n          placeholder=\"Search profiles...\"\r\n          class=\"w-full pl-9 pr-3 py-2 text-sm rounded-md border border-border bg-bg-primary focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Empty State -->\r\n    <div\r\n      v-if=\"filteredProfiles.length === 0\"\r\n      class=\"text-center py-12\"\r\n    >\r\n      <div class=\"flex justify-center mb-4\">\r\n        <div class=\"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center\">\r\n          <Inbox class=\"h-8 w-8 text-slate-400\" />\r\n        </div>\r\n      </div>\r\n      <h3 class=\"text-lg font-semibold mb-2\">\r\n        No profiles found\r\n      </h3>\r\n      <p class=\"text-sm text-text-secondary mb-4\">\r\n        {{ searchQuery ? 'Try adjusting your search' : 'Get started by creating a profile' }}\r\n      </p>\r\n      <Button\r\n        v-if=\"!searchQuery\"\r\n        @click=\"$emit('create')\"\r\n      >\r\n        <Plus class=\"h-4 w-4\" />\r\n        Create Profile\r\n      </Button>\r\n    </div>\r\n\r\n    <!-- Profile List -->\r\n    <div\r\n      v-else\r\n      :class=\"listClass\"\r\n    >\r\n      <TransitionGroup\r\n        name=\"profile-list\"\r\n        tag=\"div\"\r\n        class=\"space-y-2\"\r\n      >\r\n        <ProfileCard\r\n          v-for=\"(profile, idx) in paginatedProfiles\"\r\n          :key=\"profile.id\"\r\n          :profile=\"profile\"\r\n          :is-active=\"activeProfileId === profile.id\"\r\n          :selectable=\"selectable\"\r\n          :compact=\"compact\"\r\n          :show-actions=\"showActions\"\r\n          :show-metadata=\"showMetadata\"\r\n          :requests-today=\"profileStats[profile.id]?.requestsToday\"\r\n          @select=\"handleSelect\"\r\n          @edit=\"$emit('edit', $event)\"\r\n          @delete=\"$emit('delete', $event)\"\r\n          @more=\"$emit('more', $event)\"\r\n        />\r\n      </TransitionGroup>\r\n\r\n      <!-- Load More -->\r\n      <div\r\n        v-if=\"hasMore\"\r\n        class=\"mt-4 text-center\"\r\n      >\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          :loading=\"loading\"\r\n          @click=\"loadMore\"\r\n        >\r\n          Load More\r\n        </Button>\r\n      </div>\r\n\r\n      <!-- Results Info -->\r\n      <div\r\n        v-if=\"showResultsInfo\"\r\n        class=\"mt-4 text-center text-xs text-text-tertiary\"\r\n      >\r\n        Showing {{ paginatedProfiles.length }} of {{ filteredProfiles.length }} profiles\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\r\nimport { ref, computed } from 'vue';\r\nimport { Search, Inbox, Plus } from 'lucide-vue-next';\r\nimport ProfileCard from './ProfileCard.vue';\r\nimport { Button } from '@/components/ui';\r\nimport type { Profile } from '@/core/schema';\r\n\r\ninterface ProfileStats {\r\n  [profileId: string]: {\r\n    requestsToday?: number;\r\n    lastUsed?: Date;\r\n  };\r\n}\r\n\r\ninterface Props {\r\n  profiles: Profile[];\r\n  activeProfileId?: string;\r\n  selectable?: boolean;\r\n  compact?: boolean;\r\n  showActions?: boolean;\r\n  showMetadata?: boolean;\r\n  searchable?: boolean;\r\n  showResultsInfo?: boolean;\r\n  pageSize?: number;\r\n  profileStats?: ProfileStats;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  selectable: true,\r\n  compact: false,\r\n  showActions: true,\r\n  showMetadata: true,\r\n  searchable: true,\r\n  showResultsInfo: false,\r\n  pageSize: 20,\r\n  profileStats: () => ({}),\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  select: [profile: Profile];\r\n  edit: [profile: Profile];\r\n  delete: [profile: Profile];\r\n  more: [profile: Profile];\r\n  create: [];\r\n}>();\r\n\r\nconst searchQuery = ref('');\r\nconst currentPage = ref(1);\r\nconst loading = ref(false);\r\n\r\nconst filteredProfiles = computed(() => {\r\n  if (!searchQuery.value) return props.profiles;\r\n  \r\n  const query = searchQuery.value.toLowerCase();\r\n  return props.profiles.filter(profile => \r\n    profile.name.toLowerCase().includes(query) ||\r\n    ('host' in profile && profile.host?.toLowerCase().includes(query))\r\n  );\r\n});\r\n\r\nconst paginatedProfiles = computed(() => {\r\n  const end = currentPage.value * props.pageSize;\r\n  return filteredProfiles.value.slice(0, end);\r\n});\r\n\r\nconst hasMore = computed(() => \r\n  paginatedProfiles.value.length < filteredProfiles.value.length\r\n);\r\n\r\nconst listClass = computed(() => [\r\n  'scrollbar-thin',\r\n  props.compact ? 'max-h-96 overflow-y-auto' : '',\r\n]);\r\n\r\nfunction handleSelect(profile: Profile) {\r\n  emit('select', profile);\r\n}\r\n\r\nasync function loadMore() {\r\n  loading.value = true;\r\n  // Simulate loading delay for smooth UX\r\n  await new Promise(resolve => setTimeout(resolve, 150));\r\n  currentPage.value++;\r\n  loading.value = false;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile-list-enter-active,\r\n.profile-list-leave-active {\r\n  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.profile-list-enter-from {\r\n  opacity: 0;\r\n  transform: translateX(-20px);\r\n}\r\n\r\n.profile-list-leave-to {\r\n  opacity: 0;\r\n  transform: translateX(20px);\r\n}\r\n\r\n.profile-list-move {\r\n  transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n</style>\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\profile\\ProfileSwitcher.vue","messages":[{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'activeProfileId' requires default value to be set.","line":143,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":143,"endColumn":28}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronDown' is defined but never used.","line":129,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":129,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Check' is defined but never used.","line":130,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Search' is defined but never used.","line":131,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":131,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Settings' is defined but never used.","line":132,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":132,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":138,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":138,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeProfileName' is assigned a value but never used.","line":173,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":173,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeIcon' is assigned a value but never used.","line":177,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":177,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'filteredProfiles' is assigned a value but never used.","line":179,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":179,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'triggerClass' is assigned a value but never used.","line":189,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":189,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dropdownClass' is assigned a value but never used.","line":194,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":194,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'chevronClass' is assigned a value but never used.","line":201,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":201,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":206,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":206,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileItemClass' is defined but never used.","line":206,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":206,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":216,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":216,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileDescription' is defined but never used.","line":228,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":228,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":250,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":250,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toggle' is defined but never used.","line":250,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":250,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":260,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":260,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":265,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":265,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":270,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":270,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleQuickDirect' is defined but never used.","line":270,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":270,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":277,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":277,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleManage' is defined but never used.","line":277,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":277,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<!-- eslint-disable vue/valid-v-for -->\r\n<template>\r\n  <div\r\n    ref=\"containerRef\"\r\n    class=\"relative\"\r\n  >\r\n    <!-- Trigger Button -->\r\n    <Button\r\n      :variant=\"variant\"\r\n      :size=\"size\"\r\n      :aria-expanded=\"isOpen\"\r\n      aria-haspopup=\"listbox\"\r\n      :class=\"triggerClass\"\r\n      @click=\"toggle\"\r\n    >\r\n      <component\r\n        :is=\"activeIcon\"\r\n        class=\"h-4 w-4\"\r\n      />\r\n      <span class=\"flex-1 text-left truncate\">{{ activeProfileName }}</span>\r\n      <ChevronDown :class=\"chevronClass\" />\r\n    </Button>\r\n\r\n    <!-- Dropdown -->\r\n    <Transition name=\"dropdown\">\r\n      <div\r\n        v-if=\"isOpen\"\r\n        :class=\"dropdownClass\"\r\n        role=\"listbox\"\r\n        :aria-activedescendant=\"activeProfileId\"\r\n      >\r\n        <!-- Quick Actions -->\r\n        <div\r\n          v-if=\"showQuickActions\"\r\n          class=\"p-2 border-b border-border\"\r\n        >\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            class=\"w-full justify-start\"\r\n            @click=\"handleQuickDirect\"\r\n          >\r\n            <Circle class=\"h-4 w-4\" />\r\n            Direct Connection\r\n          </Button>\r\n        </div>\r\n\r\n        <!-- Search -->\r\n        <div\r\n          v-if=\"searchable && profiles.length > 5\"\r\n          class=\"p-2 border-b border-border\"\r\n        >\r\n          <div class=\"relative\">\r\n            <Search class=\"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-text-tertiary\" />\r\n            <input\r\n              ref=\"searchRef\"\r\n              v-model=\"searchQuery\"\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              class=\"w-full pl-7 pr-2 py-1.5 text-xs rounded-md border border-border bg-bg-primary focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n              @keydown.escape=\"close\"\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Profile List -->\r\n        <div class=\"max-h-64 overflow-y-auto scrollbar-thin py-1\">\r\n          <button\r\n            v-for=\"(profile, idx) in filteredProfiles\"\r\n            :id=\"profile.id\"\r\n            :key=\"profile.id\"\r\n            type=\"button\"\r\n            role=\"option\"\r\n            :aria-selected=\"activeProfileId === profile.id\"\r\n            :class=\"getProfileItemClass(profile)\"\r\n            @click=\"handleSelect(profile)\"\r\n          >\r\n            <div class=\"flex items-center gap-2 flex-1 min-w-0\">\r\n              <component\r\n                :is=\"getProfileIcon(profile)\"\r\n                class=\"h-4 w-4 flex-shrink-0\"\r\n              />\r\n              <div class=\"flex-1 min-w-0\">\r\n                <div class=\"font-medium text-sm truncate\">\r\n                  {{ profile.name }}\r\n                </div>\r\n                <div class=\"text-xs text-text-tertiary truncate\">\r\n                  {{ getProfileDescription(profile) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <Check\r\n              v-if=\"activeProfileId === profile.id\"\r\n              class=\"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0\"\r\n            />\r\n          </button>\r\n\r\n          <!-- Empty State -->\r\n          <div\r\n            v-if=\"filteredProfiles.length === 0\"\r\n            class=\"px-3 py-6 text-center text-sm text-text-tertiary\"\r\n          >\r\n            No profiles found\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Footer Actions -->\r\n        <div class=\"p-2 border-t border-border\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            class=\"w-full justify-start\"\r\n            @click=\"handleManage\"\r\n          >\r\n            <Settings class=\"h-4 w-4\" />\r\n            Manage Profiles\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\r\nimport { ref, computed, watch, nextTick } from 'vue';\r\nimport { onClickOutside } from '@vueuse/core';\r\nimport { \r\n  ChevronDown, \r\n  Check, \r\n  Search, \r\n  Settings,\r\n  Activity, \r\n  Circle, \r\n  Server, \r\n  Globe,\r\n} from 'lucide-vue-next';\r\nimport { Button } from '@/components/ui';\r\nimport type { Profile } from '@/core/schema';\r\n\r\ninterface Props {\r\n  profiles: Profile[];\r\n  activeProfileId?: string;\r\n  variant?: 'default' | 'ghost' | 'outline';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  searchable?: boolean;\r\n  showQuickActions?: boolean;\r\n  position?: 'bottom' | 'top';\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  variant: 'outline',\r\n  size: 'md',\r\n  searchable: true,\r\n  showQuickActions: true,\r\n  position: 'bottom',\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  select: [profile: Profile];\r\n  manage: [];\r\n}>();\r\n\r\nconst isOpen = ref(false);\r\nconst searchQuery = ref('');\r\nconst containerRef = ref<HTMLElement>();\r\nconst searchRef = ref<HTMLInputElement>();\r\n\r\nconst activeProfile = computed(() => \r\n  props.profiles?.find(p => p.id === props.activeProfileId)\r\n);\r\n\r\nconst activeProfileName = computed(() => \r\n  activeProfile.value?.name || 'Select Profile'\r\n);\r\n\r\nconst activeIcon = computed(() => getProfileIcon(activeProfile.value));\r\n\r\nconst filteredProfiles = computed(() => {\r\n  if (!searchQuery.value) return props.profiles;\r\n  \r\n  const query = searchQuery.value.toLowerCase();\r\n  return props.profiles.filter(profile =>\r\n    profile.name.toLowerCase().includes(query) ||\r\n    ('host' in profile && profile.host?.toLowerCase().includes(query))\r\n  );\r\n});\r\n\r\nconst triggerClass = computed(() => [\r\n  'gap-2',\r\n  props.size === 'sm' ? 'min-w-[180px]' : 'min-w-[220px]',\r\n]);\r\n\r\nconst dropdownClass = computed(() => [\r\n  'absolute z-50 mt-2 bg-bg-primary border border-border rounded-lg shadow-xl',\r\n  props.position === 'bottom' ? 'top-full' : 'bottom-full mb-2',\r\n  props.size === 'sm' ? 'min-w-[180px]' : 'min-w-[280px]',\r\n  'left-0',\r\n]);\r\n\r\nconst chevronClass = computed(() => [\r\n  'h-4 w-4 transition-transform duration-200',\r\n  isOpen.value && 'rotate-180',\r\n]);\r\n\r\nfunction getProfileItemClass(profile: Profile) {\r\n  return [\r\n    'w-full flex items-center gap-3 px-3 py-2 text-left',\r\n    'hover:bg-slate-100 dark:hover:bg-slate-800',\r\n    'transition-colors duration-150',\r\n    'focus:outline-none focus:bg-slate-100 dark:focus:bg-slate-800',\r\n    props.activeProfileId === profile.id && 'bg-blue-50 dark:bg-blue-950/30',\r\n  ];\r\n}\r\n\r\nfunction getProfileIcon(profile: Profile | undefined) {\r\n  if (!profile) return Circle;\r\n  \r\n  switch (profile.profileType) {\r\n    case 'DirectProfile': return Circle;\r\n    case 'SystemProfile': return Globe;\r\n    case 'FixedProfile': return Server;\r\n    case 'SwitchProfile': return Activity;\r\n    default: return Server;\r\n  }\r\n}\r\n\r\nfunction getProfileDescription(profile: Profile): string {\r\n  switch (profile.profileType) {\r\n    case 'DirectProfile':\r\n      return 'No proxy';\r\n    case 'SystemProfile':\r\n      return 'System settings';\r\n    case 'FixedProfile':\r\n      if ('host' in profile && 'port' in profile) {\r\n        return `${profile.host}:${profile.port}`;\r\n      }\r\n      return 'Fixed server';\r\n    case 'SwitchProfile':\r\n      if ('rules' in profile) {\r\n        const count = profile.rules?.length || 0;\r\n        return `${count} rule${count !== 1 ? 's' : ''}`;\r\n      }\r\n      return 'Auto-switch';\r\n    default:\r\n      return 'Proxy profile';\r\n  }\r\n}\r\n\r\nfunction toggle() {\r\n  isOpen.value = !isOpen.value;\r\n  \r\n  if (isOpen.value && props.searchable) {\r\n    nextTick(() => {\r\n      searchRef.value?.focus();\r\n    });\r\n  }\r\n}\r\n\r\nfunction close() {\r\n  isOpen.value = false;\r\n  searchQuery.value = '';\r\n}\r\n\r\nfunction handleSelect(profile: Profile) {\r\n  emit('select', profile);\r\n  close();\r\n}\r\n\r\nfunction handleQuickDirect() {\r\n  const directProfile = props.profiles?.find(p => p.profileType === 'DirectProfile');\r\n  if (directProfile) {\r\n    handleSelect(directProfile);\r\n  }\r\n}\r\n\r\nfunction handleManage() {\r\n  emit('manage');\r\n  close();\r\n}\r\n\r\n// Close on click outside\r\nonClickOutside(containerRef, close);\r\n\r\n// Clear search when closed\r\nwatch(isOpen, (open) => {\r\n  if (!open) {\r\n    searchQuery.value = '';\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.dropdown-enter-active,\r\n.dropdown-leave-active {\r\n  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.dropdown-enter-from,\r\n.dropdown-leave-to {\r\n  opacity: 0;\r\n  transform: translateY(-8px);\r\n}\r\n</style>\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\profile\\ProfileTemplates.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5400,5403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5400,5403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Info' is defined but never used.","line":159,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":159,"endColumn":64,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":161,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":161,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dialog' is defined but never used.","line":161,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Input' is defined but never used.","line":161,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Switch' is defined but never used.","line":161,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":161,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":52,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'templates' is assigned a value but never used.","line":182,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":182,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":328,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":328,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getIconClass' is defined but never used.","line":328,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":328,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":338,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":338,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getCategoryVariant' is defined but never used.","line":338,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":338,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileTypeLabel' is defined but never used.","line":348,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":348,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":359,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":359,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectTemplate' is defined but never used.","line":359,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":359,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":378,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":378,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<!-- eslint-disable vue/valid-v-for -->\r\n<template>\r\n  <Card padding=\"lg\">\r\n    <div class=\"space-y-6\">\r\n      <!-- Header -->\r\n      <div>\r\n        <h3 class=\"text-lg font-semibold mb-2\">\r\n          Quick Start Templates\r\n        </h3>\r\n        <p class=\"text-sm text-text-secondary\">\r\n          Create profiles from pre-configured templates\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Template Grid -->\r\n      <div class=\"grid gap-4 md:grid-cols-2\">\r\n        <Card\r\n          v-for=\"(template, idx) in templates\"\r\n          :key=\"template.id\"\r\n          variant=\"outline\"\r\n          padding=\"md\"\r\n          hover=\"lift\"\r\n          class=\"cursor-pointer transition-all\"\r\n          @click=\"selectTemplate(template)\"\r\n        >\r\n          <div class=\"flex items-start gap-3\">\r\n            <div :class=\"getIconClass(template.category)\">\r\n              <component\r\n                :is=\"template.icon\"\r\n                class=\"h-5 w-5\"\r\n              />\r\n            </div>\r\n            \r\n            <div class=\"flex-1 min-w-0\">\r\n              <h4 class=\"font-semibold text-sm mb-1\">\r\n                {{ template.name }}\r\n              </h4>\r\n              <p class=\"text-xs text-text-secondary mb-3\">\r\n                {{ template.description }}\r\n              </p>\r\n              \r\n              <div class=\"flex items-center gap-2\">\r\n                <Badge\r\n                  :variant=\"getCategoryVariant(template.category)\"\r\n                  size=\"xs\"\r\n                >\r\n                  {{ template.category }}\r\n                </Badge>\r\n                <Badge\r\n                  variant=\"secondary\"\r\n                  size=\"xs\"\r\n                >\r\n                  {{ getProfileTypeLabel(template.profileType) }}\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n\r\n      <!-- Custom Template Dialog -->\r\n      <Dialog\r\n        v-model=\"showTemplateDialog\"\r\n        :title=\"`Create from Template: ${selectedTemplate?.name}`\"\r\n        size=\"md\"\r\n        confirm-text=\"Create Profile\"\r\n        confirm-variant=\"success\"\r\n        @confirm=\"createFromTemplate\"\r\n      >\r\n        <div\r\n          v-if=\"selectedTemplate\"\r\n          class=\"space-y-4\"\r\n        >\r\n          <Input\r\n            v-model=\"templateForm.name\"\r\n            label=\"Profile Name\"\r\n            :placeholder=\"selectedTemplate.name\"\r\n            required\r\n          />\r\n          \r\n          <!-- Template-specific fields -->\r\n          <div\r\n            v-if=\"requiresHost\"\r\n            class=\"space-y-4\"\r\n          >\r\n            <Input\r\n              v-model=\"templateForm.host\"\r\n              label=\"Proxy Host\"\r\n              placeholder=\"proxy.example.com\"\r\n              required\r\n            >\r\n              <template #prefix>\r\n                <Server class=\"h-4 w-4 text-text-tertiary\" />\r\n              </template>\r\n            </Input>\r\n            \r\n            <Input\r\n              v-model=\"templateForm.port\"\r\n              type=\"number\"\r\n              label=\"Port\"\r\n              :placeholder=\"String(selectedTemplate.defaultPort || 8080)\"\r\n              required\r\n            />\r\n            \r\n            <div\r\n              v-if=\"selectedTemplate.supportsAuth\"\r\n              class=\"space-y-3\"\r\n            >\r\n              <div class=\"flex items-center justify-between\">\r\n                <span class=\"text-sm font-medium\">Require Authentication</span>\r\n                <Switch\r\n                  v-model=\"templateForm.requiresAuth\"\r\n                  size=\"sm\"\r\n                />\r\n              </div>\r\n              \r\n              <Transition name=\"expand\">\r\n                <div\r\n                  v-if=\"templateForm.requiresAuth\"\r\n                  class=\"grid grid-cols-2 gap-3\"\r\n                >\r\n                  <Input\r\n                    v-model=\"templateForm.username\"\r\n                    label=\"Username\"\r\n                    placeholder=\"username\"\r\n                  />\r\n                  <Input\r\n                    v-model=\"templateForm.password\"\r\n                    type=\"password\"\r\n                    label=\"Password\"\r\n                    placeholder=\"ΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇóΓÇó\"\r\n                  />\r\n                </div>\r\n              </Transition>\r\n            </div>\r\n          </div>\r\n          \r\n          <div\r\n            v-if=\"selectedTemplate.configurable\"\r\n            class=\"p-3 bg-blue-50 dark:bg-blue-950/20 rounded-md border border-blue-200 dark:border-blue-900\"\r\n          >\r\n            <div class=\"flex items-start gap-2\">\r\n              <Info class=\"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5\" />\r\n              <p class=\"text-xs text-blue-700 dark:text-blue-300\">\r\n                {{ selectedTemplate.note }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  </Card>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\r\nimport { ref, computed } from 'vue';\r\nimport {\r\n  Briefcase, Home, Globe, Shield, Zap, Server, Wifi, Lock, Info,\r\n} from 'lucide-vue-next';\r\nimport { Card, Badge, Dialog, Input, Switch, Button } from '@/components/ui';\r\nimport type { Profile } from '@/core/schema';\r\n\r\ninterface ProfileTemplate {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  category: 'Work' | 'Personal' | 'Development' | 'Security';\r\n  icon: any;\r\n  profileType: Profile['profileType'];\r\n  defaultPort?: number;\r\n  supportsAuth?: boolean;\r\n  configurable: boolean;\r\n  note?: string;\r\n  config: Partial<Profile>;\r\n}\r\n\r\nconst emit = defineEmits<{\r\n  create: [profile: Partial<Profile>];\r\n}>();\r\n\r\nconst templates: ProfileTemplate[] = [\r\n  {\r\n    id: 'work-http',\r\n    name: 'Corporate HTTP Proxy',\r\n    description: 'Standard HTTP proxy for corporate networks',\r\n    category: 'Work',\r\n    icon: Briefcase,\r\n    profileType: 'FixedProfile',\r\n    defaultPort: 8080,\r\n    supportsAuth: true,\r\n    configurable: true,\r\n    note: 'Commonly used in corporate environments. Contact IT for server details.',\r\n    config: {\r\n      profileType: 'FixedProfile',\r\n      proxyType: 'HTTP',\r\n      color: 'blue',\r\n    },\r\n  },\r\n  {\r\n    id: 'work-https',\r\n    name: 'Secure Corporate Proxy',\r\n    description: 'HTTPS proxy with encryption',\r\n    category: 'Work',\r\n    icon: Lock,\r\n    profileType: 'FixedProfile',\r\n    defaultPort: 8443,\r\n    supportsAuth: true,\r\n    configurable: true,\r\n    note: 'Uses SSL/TLS encryption for secure communication.',\r\n    config: {\r\n      profileType: 'FixedProfile',\r\n      proxyType: 'HTTPS',\r\n      color: 'green',\r\n    },\r\n  },\r\n  {\r\n    id: 'home-direct',\r\n    name: 'Direct Connection',\r\n    description: 'No proxy, direct internet access',\r\n    category: 'Personal',\r\n    icon: Home,\r\n    profileType: 'DirectProfile',\r\n    configurable: false,\r\n    config: {\r\n      profileType: 'DirectProfile',\r\n      name: 'Direct',\r\n      color: 'gray',\r\n    },\r\n  },\r\n  {\r\n    id: 'dev-localhost',\r\n    name: 'Local Development Proxy',\r\n    description: 'Proxy for localhost testing (Charles, Fiddler)',\r\n    category: 'Development',\r\n    icon: Server,\r\n    profileType: 'FixedProfile',\r\n    defaultPort: 8888,\r\n    supportsAuth: false,\r\n    configurable: true,\r\n    note: 'Common port for debugging tools like Charles Proxy (8888) or Fiddler (8888).',\r\n    config: {\r\n      profileType: 'FixedProfile',\r\n      proxyType: 'HTTP',\r\n      host: '127.0.0.1',\r\n      color: 'purple',\r\n    },\r\n  },\r\n  {\r\n    id: 'socks5-vpn',\r\n    name: 'SOCKS5 VPN',\r\n    description: 'Full-tunnel VPN using SOCKS5',\r\n    category: 'Security',\r\n    icon: Shield,\r\n    profileType: 'FixedProfile',\r\n    defaultPort: 1080,\r\n    supportsAuth: true,\r\n    configurable: true,\r\n    note: 'SOCKS5 provides better performance and supports UDP.',\r\n    config: {\r\n      profileType: 'FixedProfile',\r\n      proxyType: 'SOCKS5',\r\n      color: 'red',\r\n    },\r\n  },\r\n  {\r\n    id: 'auto-switch',\r\n    name: 'Rule-Based Auto Switch',\r\n    description: 'Automatically switch based on URL patterns',\r\n    category: 'Work',\r\n    icon: Zap,\r\n    profileType: 'SwitchProfile',\r\n    configurable: false,\r\n    note: 'Configure rules after creating the profile.',\r\n    config: {\r\n      profileType: 'SwitchProfile',\r\n      rules: [],\r\n      color: 'yellow',\r\n    },\r\n  },\r\n  {\r\n    id: 'system-proxy',\r\n    name: 'System Proxy Settings',\r\n    description: 'Use operating system proxy configuration',\r\n    category: 'Personal',\r\n    icon: Globe,\r\n    profileType: 'SystemProfile',\r\n    configurable: false,\r\n    config: {\r\n      profileType: 'SystemProfile',\r\n      name: 'System Proxy',\r\n      color: 'gray',\r\n    },\r\n  },\r\n  {\r\n    id: 'pac-script',\r\n    name: 'PAC Script',\r\n    description: 'Custom proxy auto-config script',\r\n    category: 'Development',\r\n    icon: Wifi,\r\n    profileType: 'PacProfile',\r\n    configurable: false,\r\n    note: 'Advanced users only. Configure PAC script after creating.',\r\n    config: {\r\n      profileType: 'PacProfile',\r\n      color: 'indigo',\r\n    },\r\n  },\r\n];\r\n\r\nconst showTemplateDialog = ref(false);\r\nconst selectedTemplate = ref<ProfileTemplate | null>(null);\r\nconst templateForm = ref({\r\n  name: '',\r\n  host: '',\r\n  port: '',\r\n  requiresAuth: false,\r\n  username: '',\r\n  password: '',\r\n});\r\n\r\nconst requiresHost = computed(() => \r\n  selectedTemplate.value?.configurable && \r\n  selectedTemplate.value.profileType === 'FixedProfile' &&\r\n  !('host' in selectedTemplate.value.config)\r\n);\r\n\r\nfunction getIconClass(category: string) {\r\n  const classes = {\r\n    Work: 'w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 flex items-center justify-center',\r\n    Personal: 'w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 flex items-center justify-center',\r\n    Development: 'w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 flex items-center justify-center',\r\n    Security: 'w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 flex items-center justify-center',\r\n  };\r\n  return classes[category as keyof typeof classes] || classes.Personal;\r\n}\r\n\r\nfunction getCategoryVariant(category: string) {\r\n  const variants = {\r\n    Work: 'default',\r\n    Personal: 'success',\r\n    Development: 'warning',\r\n    Security: 'danger',\r\n  };\r\n  return variants[category as keyof typeof variants] || 'secondary';\r\n}\r\n\r\nfunction getProfileTypeLabel(type: Profile['profileType']): string {\r\n  const labels = {\r\n    DirectProfile: 'Direct',\r\n    SystemProfile: 'System',\r\n    FixedProfile: 'Fixed',\r\n    SwitchProfile: 'Switch',\r\n    PacProfile: 'PAC',\r\n  };\r\n  return labels[type] || type;\r\n}\r\n\r\nfunction selectTemplate(template: ProfileTemplate) {\r\n  selectedTemplate.value = template;\r\n  templateForm.value = {\r\n    name: template.name,\r\n    host: '',\r\n    port: String(template.defaultPort || ''),\r\n    requiresAuth: false,\r\n    username: '',\r\n    password: '',\r\n  };\r\n  \r\n  if (template.configurable) {\r\n    showTemplateDialog.value = true;\r\n  } else {\r\n    // Create directly without dialog\r\n    createFromTemplate();\r\n  }\r\n}\r\n\r\nfunction createFromTemplate() {\r\n  if (!selectedTemplate.value) return;\r\n  \r\n  const profile: Partial<Profile> = {\r\n    ...selectedTemplate.value.config,\r\n    name: templateForm.value.name || selectedTemplate.value.name,\r\n  };\r\n  \r\n  // Add template-specific fields\r\n  if (requiresHost.value && selectedTemplate.value.profileType === 'FixedProfile') {\r\n    Object.assign(profile, {\r\n      host: templateForm.value.host,\r\n      port: Number(templateForm.value.port),\r\n      ...(templateForm.value.requiresAuth && {\r\n        username: templateForm.value.username,\r\n        password: templateForm.value.password,\r\n      }),\r\n    });\r\n  }\r\n  \r\n  emit('create', profile);\r\n  showTemplateDialog.value = false;\r\n  selectedTemplate.value = null;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.expand-enter-active,\r\n.expand-leave-active {\r\n  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  overflow: hidden;\r\n}\r\n\r\n.expand-enter-from,\r\n.expand-leave-to {\r\n  opacity: 0;\r\n  max-height: 0;\r\n}\r\n\r\n.expand-enter-to,\r\n.expand-leave-from {\r\n  opacity: 1;\r\n  max-height: 200px;\r\n}\r\n</style>\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\profile\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\status\\ConnectionStatusCard.vue","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronUp' is defined but never used.","line":116,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":66,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronDown' is defined but never used.","line":116,"column":68,"nodeType":null,"messageId":"unusedVar","endLine":116,"endColumn":79,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":117,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":117,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":117,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":117,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatRelativeTime' is defined but never used.","line":118,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":118,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatCompactNumber' is defined but never used.","line":118,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":118,"endColumn":49,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'collapsed' is assigned a value but never used.","line":141,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":141,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusIcon' is assigned a value but never used.","line":182,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":182,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusTitle' is assigned a value but never used.","line":183,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":183,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusMessage' is assigned a value but never used.","line":184,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":184,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusIconClass' is assigned a value but never used.","line":185,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":185,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cardClass' is assigned a value but never used.","line":188,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":188,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'modeIcon' is assigned a value but never used.","line":190,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":190,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'modeVariant' is assigned a value but never used.","line":199,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\status\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Badge.vue","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'VariantProps' is defined but never used.","line":13,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'badgeClass' is assigned a value but never used.","line":52,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Button.vue","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'VariantProps' is defined but never used.","line":42,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'buttonClass' is assigned a value but never used.","line":90,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Card.vue","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'VariantProps' is defined but never used.","line":13,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cardClass' is assigned a value but never used.","line":68,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Dialog.vue","messages":[{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'title' requires default value to be set.","line":94,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":94,"endColumn":18},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'description' requires default value to be set.","line":95,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":95,"endColumn":24}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":88,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":89,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":89,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dialogId' is assigned a value but never used.","line":122,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":122,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dialogClass' is assigned a value but never used.","line":124,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":124,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'titleClass' is assigned a value but never used.","line":136,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":136,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'contentClass' is assigned a value but never used.","line":141,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":141,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'footerClass' is assigned a value but never used.","line":147,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":147,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":153,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":153,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":158,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":158,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleBackdropClick' is defined but never used.","line":158,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":158,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":164,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":164,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleCancel' is defined but never used.","line":164,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":164,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":169,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":169,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleConfirm' is defined but never used.","line":169,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":169,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\r\n  <Teleport to=\"body\">\r\n    <Transition name=\"dialog-backdrop\">\r\n      <div\r\n        v-if=\"modelValue\"\r\n        class=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\r\n        @click.self=\"handleBackdropClick\"\r\n      >\r\n        <Transition name=\"dialog-content\">\r\n          <div\r\n            v-if=\"modelValue\"\r\n            :class=\"dialogClass\"\r\n            role=\"dialog\"\r\n            :aria-modal=\"true\"\r\n            :aria-labelledby=\"`${dialogId}-title`\"\r\n            :aria-describedby=\"description ? `${dialogId}-description` : undefined\"\r\n          >\r\n            <!-- Header -->\r\n            <div\r\n              v-if=\"!hideHeader\"\r\n              class=\"flex items-start justify-between gap-4 px-6 pt-6 pb-5 border-b border-border\"\r\n            >\r\n              <div class=\"flex-1 min-w-0\">\r\n                <h2\r\n                  :id=\"`${dialogId}-title`\"\r\n                  :class=\"titleClass\"\r\n                >\r\n                  {{ title }}\r\n                </h2>\r\n                <p\r\n                  v-if=\"description\"\r\n                  :id=\"`${dialogId}-description`\"\r\n                  class=\"text-sm text-text-secondary mt-1\"\r\n                >\r\n                  {{ description }}\r\n                </p>\r\n              </div>\r\n              <Button\r\n                v-if=\"!hideClose\"\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                class=\"h-8 w-8 flex-shrink-0\"\r\n                aria-label=\"Close dialog\"\r\n                @click=\"close\"\r\n              >\r\n                <X class=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n            \r\n            <!-- Content -->\r\n            <div :class=\"contentClass\">\r\n              <slot />\r\n            </div>\r\n            \r\n            <!-- Footer -->\r\n            <div\r\n              v-if=\"!hideFooter || $slots.footer\"\r\n              :class=\"footerClass\"\r\n            >\r\n              <slot name=\"footer\">\r\n                <div class=\"flex items-center justify-end gap-3\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    @click=\"handleCancel\"\r\n                  >\r\n                    {{ cancelText }}\r\n                  </Button>\r\n                  <Button\r\n                    :variant=\"confirmVariant\"\r\n                    :loading=\"loading\"\r\n                    @click=\"handleConfirm\"\r\n                  >\r\n                    {{ confirmText }}\r\n                  </Button>\r\n                </div>\r\n              </slot>\r\n            </div>\r\n          </div>\r\n        </Transition>\r\n      </div>\r\n    </Transition>\r\n  </Teleport>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\r\nimport { computed, watch } from 'vue';\r\nimport { X } from 'lucide-vue-next';\r\nimport Button from './Button.vue';\r\nimport { generateId } from '@/lib/utils';\r\n\r\ninterface Props {\r\n  modelValue: boolean;\r\n  title?: string;\r\n  description?: string;\r\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\r\n  hideHeader?: boolean;\r\n  hideFooter?: boolean;\r\n  hideClose?: boolean;\r\n  closeOnBackdrop?: boolean;\r\n  cancelText?: string;\r\n  confirmText?: string;\r\n  confirmVariant?: 'default' | 'destructive' | 'success';\r\n  loading?: boolean;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  size: 'md',\r\n  closeOnBackdrop: true,\r\n  cancelText: 'Cancel',\r\n  confirmText: 'Confirm',\r\n  confirmVariant: 'default',\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  'update:modelValue': [value: boolean];\r\n  close: [];\r\n  cancel: [];\r\n  confirm: [];\r\n}>();\r\n\r\nconst dialogId = computed(() => generateId('dialog'));\r\n\r\nconst dialogClass = computed(() => [\r\n  'relative w-full bg-bg-primary rounded-lg shadow-2xl overflow-hidden',\r\n  'flex flex-col',\r\n  \r\n  // Size variants\r\n  props.size === 'sm' && 'max-w-sm max-h-[80vh]',\r\n  props.size === 'md' && 'max-w-md max-h-[85vh]',\r\n  props.size === 'lg' && 'max-w-2xl max-h-[90vh]',\r\n  props.size === 'xl' && 'max-w-4xl max-h-[90vh]',\r\n  props.size === 'full' && 'max-w-7xl max-h-[95vh]',\r\n]);\r\n\r\nconst titleClass = computed(() => [\r\n  'font-semibold',\r\n  props.size === 'sm' ? 'text-base' : 'text-lg',\r\n]);\r\n\r\nconst contentClass = computed(() => [\r\n  'flex-1 overflow-y-auto scrollbar-thin',\r\n  props.hideHeader ? 'pt-8 px-8' : 'pt-6 px-8',\r\n  props.hideFooter ? 'pb-8' : 'pb-6',\r\n]);\r\n\r\nconst footerClass = computed(() => [\r\n  'flex items-center justify-end gap-3',\r\n  'pt-5 px-8 pb-8',\r\n  'border-t border-border',\r\n]);\r\n\r\nfunction close() {\r\n  emit('update:modelValue', false);\r\n  emit('close');\r\n}\r\n\r\nfunction handleBackdropClick() {\r\n  if (props.closeOnBackdrop) {\r\n    close();\r\n  }\r\n}\r\n\r\nfunction handleCancel() {\r\n  emit('cancel');\r\n  close();\r\n}\r\n\r\nfunction handleConfirm() {\r\n  emit('confirm');\r\n}\r\n\r\n// Lock body scroll when dialog is open\r\nwatch(() => props.modelValue, (open) => {\r\n  if (open) {\r\n    document.body.style.overflow = 'hidden';\r\n  } else {\r\n    document.body.style.overflow = '';\r\n  }\r\n}, { immediate: true });\r\n</script>\r\n\r\n<style scoped>\r\n.dialog-backdrop-enter-active,\r\n.dialog-backdrop-leave-active {\r\n  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.dialog-backdrop-enter-from,\r\n.dialog-backdrop-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.dialog-content-enter-active,\r\n.dialog-content-leave-active {\r\n  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.dialog-content-enter-from,\r\n.dialog-content-leave-to {\r\n  opacity: 0;\r\n  transform: scale(0.95) translateY(-20px);\r\n}\r\n</style>\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Input.vue","messages":[{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'modelValue' requires default value to be set.","line":114,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":114,"endColumn":32},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'label' requires default value to be set.","line":116,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":116,"endColumn":18},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'placeholder' requires default value to be set.","line":117,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":117,"endColumn":24},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'hint' requires default value to be set.","line":118,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":118,"endColumn":17},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'error' requires default value to be set.","line":119,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":119,"endColumn":28},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'prefix' requires default value to be set.","line":124,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":124,"endColumn":19},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'suffix' requires default value to be set.","line":125,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":125,"endColumn":19},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'maxlength' requires default value to be set.","line":127,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":127,"endColumn":22}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Eye' is defined but never used.","line":109,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":13,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'EyeOff' is defined but never used.","line":109,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":109,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":110,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":110,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'inputId' is assigned a value but never used.","line":145,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":145,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'inputType' is assigned a value but never used.","line":149,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'errorMessage' is assigned a value but never used.","line":158,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":158,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasHint' is assigned a value but never used.","line":162,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":162,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'labelClass' is assigned a value but never used.","line":167,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":167,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'inputClass' is assigned a value but never used.","line":172,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":172,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'suffixClass' is assigned a value but never used.","line":198,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":198,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":203,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":203,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleInput' is defined but never used.","line":203,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":203,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":209,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":209,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleBlur' is defined but never used.","line":209,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":209,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":214,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":214,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleFocus' is defined but never used.","line":214,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":214,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":219,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":219,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'togglePasswordVisibility' is defined but never used.","line":219,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":219,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"input-wrapper\">\n    <label\n      v-if=\"label\"\n      :for=\"inputId\"\n      :class=\"labelClass\"\n    >\n      {{ label }}\n      <span\n        v-if=\"required\"\n        class=\"text-red-500\"\n      >*</span>\n    </label>\n    \n    <div class=\"relative\">\n      <!-- Prefix Icon/Text -->\n      <div\n        v-if=\"$slots.prefix || prefix\"\n        class=\"absolute left-3 top-1/2 -translate-y-1/2 flex items-center pointer-events-none\"\n      >\n        <slot name=\"prefix\">\n          <span class=\"text-text-tertiary text-sm\">{{ prefix }}</span>\n        </slot>\n      </div>\n      \n      <!-- Input Element -->\n      <input\n        :id=\"inputId\"\n        ref=\"inputRef\"\n        :type=\"inputType\"\n        :value=\"modelValue\"\n        :placeholder=\"placeholder\"\n        :disabled=\"disabled\"\n        :readonly=\"readonly\"\n        :required=\"required\"\n        :maxlength=\"maxlength\"\n        :class=\"inputClass\"\n        :aria-invalid=\"hasError\"\n        :aria-describedby=\"hasError ? `${inputId}-error` : hasHint ? `${inputId}-hint` : undefined\"\n        @input=\"handleInput\"\n        @blur=\"handleBlur\"\n        @focus=\"handleFocus\"\n      >\n      \n      <!-- Suffix Icon/Text -->\n      <div\n        v-if=\"$slots.suffix || suffix || showPasswordToggle\"\n        :class=\"suffixClass\"\n      >\n        <Button\n          v-if=\"showPasswordToggle\"\n          type=\"button\"\n          variant=\"ghost\"\n          size=\"icon\"\n          class=\"h-7 w-7\"\n          :aria-label=\"passwordVisible ? 'Hide password' : 'Show password'\"\n          @click=\"togglePasswordVisibility\"\n        >\n          <Eye\n            v-if=\"!passwordVisible\"\n            class=\"h-4 w-4\"\n          />\n          <EyeOff\n            v-else\n            class=\"h-4 w-4\"\n          />\n        </Button>\n        <slot name=\"suffix\">\n          <span\n            v-if=\"suffix\"\n            class=\"text-text-tertiary text-sm\"\n          >{{ suffix }}</span>\n        </slot>\n      </div>\n      \n      <!-- Loading Spinner -->\n      <div\n        v-if=\"loading\"\n        class=\"absolute right-3 top-1/2 -translate-y-1/2\"\n      >\n        <div class=\"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full\" />\n      </div>\n    </div>\n    \n    <!-- Hint Text -->\n    <p\n      v-if=\"hint && !hasError\"\n      :id=\"`${inputId}-hint`\"\n      class=\"mt-1.5 text-xs text-text-tertiary\"\n    >\n      {{ hint }}\n    </p>\n    \n    <!-- Error Message -->\n    <p\n      v-if=\"hasError\"\n      :id=\"`${inputId}-error`\"\n      class=\"mt-1.5 text-xs text-red-600 dark:text-red-400 flex items-center gap-1\"\n    >\n      <AlertCircle class=\"h-3 w-3\" />\n      {{ errorMessage }}\n    </p>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\nimport { ref, computed } from 'vue';\nimport { Eye, EyeOff, AlertCircle } from 'lucide-vue-next';\nimport Button from './Button.vue';\nimport { generateId } from '@/lib/utils';\n\nexport interface InputProps {\n  modelValue?: string | number;\n  type?: 'text' | 'email' | 'password' | 'number' | 'url' | 'tel' | 'search';\n  label?: string;\n  placeholder?: string;\n  hint?: string;\n  error?: string | boolean;\n  disabled?: boolean;\n  readonly?: boolean;\n  required?: boolean;\n  loading?: boolean;\n  prefix?: string;\n  suffix?: string;\n  size?: 'sm' | 'md' | 'lg';\n  maxlength?: number;\n}\n\nconst props = withDefaults(defineProps<InputProps>(), {\n  type: 'text',\n  size: 'md',\n});\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: string | number];\n  blur: [event: FocusEvent];\n  focus: [event: FocusEvent];\n}>();\n\nconst inputRef = ref<HTMLInputElement>();\nconst passwordVisible = ref(false);\nconst isFocused = ref(false);\n\nconst inputId = computed(() => generateId('input'));\n\nconst showPasswordToggle = computed(() => props.type === 'password');\n\nconst inputType = computed(() => {\n  if (props.type === 'password' && passwordVisible.value) {\n    return 'text';\n  }\n  return props.type;\n});\n\nconst hasError = computed(() => !!props.error);\n\nconst errorMessage = computed(() => \n  typeof props.error === 'string' ? props.error : ''\n);\n\nconst hasHint = computed(() => !!props.hint);\n\nconst hasPrefixSlot = computed(() => !!props.prefix);\nconst hasSuffixSlot = computed(() => !!props.suffix || showPasswordToggle.value);\n\nconst labelClass = computed(() => [\n  'block text-sm font-medium mb-1.5',\n  props.disabled ? 'text-text-tertiary' : 'text-text-primary',\n]);\n\nconst inputClass = computed(() => [\n  'w-full rounded-md border transition-colors duration-200',\n  'focus:outline-none focus:ring-2 focus:ring-offset-0',\n  'disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 dark:disabled:bg-slate-800',\n  'placeholder:text-text-tertiary',\n  \n  // Size variants\n  props.size === 'sm' && 'text-sm py-1.5',\n  props.size === 'md' && 'text-sm py-2',\n  props.size === 'lg' && 'text-base py-2.5',\n  \n  // Padding based on prefix/suffix\n  hasPrefixSlot.value ? 'pl-10' : 'pl-3',\n  hasSuffixSlot.value || props.loading ? 'pr-10' : 'pr-3',\n  \n  // State variants\n  hasError.value\n    ? 'border-red-500 focus:ring-red-500 focus:border-red-500'\n    : 'border-border focus:ring-blue-500 focus:border-blue-500',\n  \n  // Background\n  props.readonly \n    ? 'bg-slate-50 dark:bg-slate-900'\n    : 'bg-bg-primary',\n]);\n\nconst suffixClass = computed(() => [\n  'absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1',\n  props.loading ? 'pointer-events-none' : '',\n]);\n\nfunction handleInput(event: Event) {\n  const target = event.target as HTMLInputElement;\n  const value = props.type === 'number' ? Number(target.value) : target.value;\n  emit('update:modelValue', value);\n}\n\nfunction handleBlur(event: FocusEvent) {\n  isFocused.value = false;\n  emit('blur', event);\n}\n\nfunction handleFocus(event: FocusEvent) {\n  isFocused.value = true;\n  emit('focus', event);\n}\n\nfunction togglePasswordVisibility() {\n  passwordVisible.value = !passwordVisible.value;\n}\n\n// Expose focus method\ndefineExpose({\n  focus: () => inputRef.value?.focus(),\n  blur: () => inputRef.value?.blur(),\n});\n</script>\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Select.vue","messages":[{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'modelValue' requires default value to be set.","line":134,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":134,"endColumn":32},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'label' requires default value to be set.","line":136,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":136,"endColumn":18},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'hint' requires default value to be set.","line":138,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":138,"endColumn":17},{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'error' requires default value to be set.","line":139,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":139,"endColumn":28}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronDown' is defined but never used.","line":128,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Check' is defined but never used.","line":128,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Search' is defined but never used.","line":128,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":128,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":128,"endColumn":49,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectId' is assigned a value but never used.","line":167,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":167,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'errorMessage' is assigned a value but never used.","line":171,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":171,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'displayValue' is assigned a value but never used.","line":179,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":179,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'labelClass' is assigned a value but never used.","line":195,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":195,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'triggerClass' is assigned a value but never used.","line":200,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'valueClass' is assigned a value but never used.","line":218,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":218,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'chevronClass' is assigned a value but never used.","line":223,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":223,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dropdownClass' is assigned a value but never used.","line":228,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":228,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getOptionDescription' is defined but never used.","line":250,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":250,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":254,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":254,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getOptionClass' is defined but never used.","line":254,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":254,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":266,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":266,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toggle' is defined but never used.","line":266,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":266,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":278,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":278,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":284,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":284,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":293,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":293,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'highlightNext' is defined but never used.","line":293,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":293,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":297,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":297,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'highlightPrevious' is defined but never used.","line":297,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":297,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":301,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":301,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectHighlighted' is defined but never used.","line":301,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":301,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<!-- eslint-disable vue/valid-v-for -->\n<template>\n  <div class=\"select-wrapper\">\n    <label\n      v-if=\"label\"\n      :for=\"selectId\"\n      :class=\"labelClass\"\n    >\n      {{ label }}\n      <span\n        v-if=\"required\"\n        class=\"text-red-500\"\n      >*</span>\n    </label>\n    \n    <div\n      ref=\"containerRef\"\n      class=\"relative\"\n    >\n      <!-- Trigger Button -->\n      <button\n        :id=\"selectId\"\n        type=\"button\"\n        :disabled=\"disabled\"\n        :class=\"triggerClass\"\n        :aria-expanded=\"isOpen\"\n        :aria-haspopup=\"true\"\n        :aria-invalid=\"hasError\"\n        @click=\"toggle\"\n      >\n        <span :class=\"valueClass\">\n          {{ displayValue }}\n        </span>\n        <ChevronDown :class=\"chevronClass\" />\n      </button>\n      \n      <!-- Dropdown -->\n      <Transition name=\"dropdown\">\n        <div\n          v-if=\"isOpen\"\n          :class=\"dropdownClass\"\n        >\n          <!-- Search -->\n          <div\n            v-if=\"searchable\"\n            class=\"p-2 border-b border-border\"\n          >\n            <div class=\"relative\">\n              <Search class=\"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-text-tertiary\" />\n              <input\n                ref=\"searchRef\"\n                v-model=\"searchQuery\"\n                type=\"text\"\n                :placeholder=\"searchPlaceholder\"\n                class=\"w-full pl-8 pr-3 py-1.5 text-sm rounded-md border border-border bg-bg-primary focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                @keydown.escape=\"close\"\n                @keydown.down.prevent=\"highlightNext\"\n                @keydown.up.prevent=\"highlightPrevious\"\n                @keydown.enter.prevent=\"selectHighlighted\"\n              >\n            </div>\n          </div>\n          \n          <!-- Options List -->\n          <div class=\"max-h-64 overflow-y-auto scrollbar-thin py-1\">\n            <button\n              v-for=\"(option, index) in filteredOptions\"\n              :key=\"option.value\"\n              type=\"button\"\n              role=\"option\"\n              :aria-selected=\"isSelected(option)\"\n              :class=\"getOptionClass(option, index)\"\n              @click=\"selectOption(option)\"\n              @mouseenter=\"highlightedIndex = index\"\n            >\n              <div class=\"flex-1 text-left\">\n                <div class=\"truncate\">\n                  {{ getOptionLabel(option) }}\n                </div>\n                <div\n                  v-if=\"getOptionDescription(option)\"\n                  class=\"text-xs text-text-tertiary mt-0.5\"\n                >\n                  {{ getOptionDescription(option) }}\n                </div>\n              </div>\n              <Check\n                v-if=\"isSelected(option)\"\n                class=\"h-4 w-4 text-blue-600 dark:text-blue-400 flex-shrink-0\"\n              />\n            </button>\n            \n            <!-- Empty State -->\n            <div\n              v-if=\"filteredOptions.length === 0\"\n              class=\"px-4 py-8 text-center text-sm text-text-tertiary\"\n            >\n              {{ emptyText }}\n            </div>\n          </div>\n        </div>\n      </Transition>\n    </div>\n    \n    <!-- Hint Text -->\n    <p\n      v-if=\"hint && !hasError\"\n      class=\"mt-1.5 text-xs text-text-tertiary\"\n    >\n      {{ hint }}\n    </p>\n    \n    <!-- Error Message -->\n    <p\n      v-if=\"hasError\"\n      class=\"mt-1.5 text-xs text-red-600 dark:text-red-400 flex items-center gap-1\"\n    >\n      <AlertCircle class=\"h-3 w-3\" />\n      {{ errorMessage }}\n    </p>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\nimport { ref, computed, watch, nextTick } from 'vue';\nimport { onClickOutside } from '@vueuse/core';\nimport { ChevronDown, Check, Search, AlertCircle } from 'lucide-vue-next';\nimport { generateId } from '@/lib/utils';\n\nexport type SelectOption = string | number | { label: string; value: string | number; disabled?: boolean; description?: string };\n\ninterface Props {\n  modelValue?: string | number;\n  options: SelectOption[];\n  label?: string;\n  placeholder?: string;\n  hint?: string;\n  error?: string | boolean;\n  disabled?: boolean;\n  required?: boolean;\n  searchable?: boolean;\n  searchPlaceholder?: string;\n  emptyText?: string;\n  size?: 'sm' | 'md' | 'lg';\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  placeholder: 'Select an option',\n  searchPlaceholder: 'Search...',\n  emptyText: 'No options found',\n  searchable: true,\n  size: 'md',\n});\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: string | number];\n  change: [value: string | number];\n}>();\n\nconst isOpen = ref(false);\nconst searchQuery = ref('');\nconst highlightedIndex = ref(0);\nconst containerRef = ref<HTMLElement>();\nconst searchRef = ref<HTMLInputElement>();\n\nconst selectId = computed(() => generateId('select'));\n\nconst hasError = computed(() => !!props.error);\n\nconst errorMessage = computed(() => \n  typeof props.error === 'string' ? props.error : ''\n);\n\nconst selectedOption = computed(() =>\n  props.options?.find(opt => getOptionValue(opt) === props.modelValue)\n);\n\nconst displayValue = computed(() => {\n  if (selectedOption.value) {\n    return getOptionLabel(selectedOption.value);\n  }\n  return props.placeholder;\n});\n\nconst filteredOptions = computed(() => {\n  if (!searchQuery.value) return props.options;\n  \n  const query = searchQuery.value.toLowerCase();\n  return props.options.filter(option => \n    getOptionLabel(option).toLowerCase().includes(query)\n  );\n});\n\nconst labelClass = computed(() => [\n  'block text-sm font-medium mb-1.5',\n  props.disabled ? 'text-text-tertiary' : 'text-text-primary',\n]);\n\nconst triggerClass = computed(() => [\n  'w-full flex items-center justify-between gap-2 rounded-md border transition-colors duration-200',\n  'focus:outline-none focus:ring-2 focus:ring-offset-0',\n  'disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 dark:disabled:bg-slate-800',\n  \n  // Size variants\n  props.size === 'sm' && 'text-sm py-1.5 px-3',\n  props.size === 'md' && 'text-sm py-2 px-3',\n  props.size === 'lg' && 'text-base py-2.5 px-3',\n  \n  // State variants\n  hasError.value\n    ? 'border-red-500 focus:ring-red-500 focus:border-red-500'\n    : 'border-border focus:ring-blue-500 focus:border-blue-500',\n  \n  'bg-bg-primary',\n]);\n\nconst valueClass = computed(() => [\n  'flex-1 text-left truncate',\n  !selectedOption.value && 'text-text-tertiary',\n]);\n\nconst chevronClass = computed(() => [\n  'h-4 w-4 text-text-tertiary transition-transform duration-200 flex-shrink-0',\n  isOpen.value && 'rotate-180',\n]);\n\nconst dropdownClass = computed(() => [\n  'absolute z-50 mt-2 w-full bg-bg-primary border border-border rounded-lg shadow-xl',\n  'top-full left-0',\n]);\n\nfunction getOptionValue(option: SelectOption): string | number {\n  return typeof option === 'object' ? option.value : option;\n}\n\nfunction getOptionLabel(option: SelectOption): string {\n  if (typeof option === 'object') return option.label;\n  return String(option);\n}\n\nfunction isOptionDisabled(option: SelectOption): boolean {\n  return typeof option === 'object' ? option.disabled ?? false : false;\n}\n\nfunction isSelected(option: SelectOption): boolean {\n  return getOptionValue(option) === props.modelValue;\n}\n\nfunction getOptionDescription(option: SelectOption): string {\n  return typeof option === 'object' && 'description' in option ? option.description || '' : '';\n}\n\nfunction getOptionClass(option: SelectOption, index: number) {\n  return [\n    'w-full flex items-center gap-3 px-3 py-2 text-sm text-left',\n    'transition-colors duration-150',\n    isOptionDisabled(option)\n      ? 'opacity-50 cursor-not-allowed'\n      : 'hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer',\n    isSelected(option) && 'bg-blue-50 dark:bg-blue-950/30',\n    index === highlightedIndex.value && 'bg-slate-100 dark:bg-slate-800',\n  ];\n}\n\nfunction toggle() {\n  if (!props.disabled) {\n    isOpen.value = !isOpen.value;\n    \n    if (isOpen.value && props.searchable) {\n      nextTick(() => {\n        searchRef.value?.focus();\n      });\n    }\n  }\n}\n\nfunction close() {\n  isOpen.value = false;\n  searchQuery.value = '';\n  highlightedIndex.value = 0;\n}\n\nfunction selectOption(option: SelectOption) {\n  if (isOptionDisabled(option)) return;\n  \n  const value = getOptionValue(option);\n  emit('update:modelValue', value);\n  emit('change', value);\n  close();\n}\n\nfunction highlightNext() {\n  highlightedIndex.value = Math.min(highlightedIndex.value + 1, filteredOptions.value.length - 1);\n}\n\nfunction highlightPrevious() {\n  highlightedIndex.value = Math.max(highlightedIndex.value - 1, 0);\n}\n\nfunction selectHighlighted() {\n  if (filteredOptions.value[highlightedIndex.value]) {\n    selectOption(filteredOptions.value[highlightedIndex.value]);\n  }\n}\n\nonClickOutside(containerRef, close);\n\nwatch(isOpen, (open) => {\n  if (!open) {\n    searchQuery.value = '';\n    highlightedIndex.value = 0;\n  }\n});\n</script>\n\n<style scoped>\n.dropdown-enter-active,\n.dropdown-leave-active {\n  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.dropdown-enter-from,\n.dropdown-leave-to {\n  opacity: 0;\n  transform: translateY(-8px);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Switch.vue","messages":[{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'ariaLabel' requires default value to be set.","line":38,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":38,"endColumn":22}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Check' is defined but never used.","line":32,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":32,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'switchClass' is assigned a value but never used.","line":52,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":52,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'thumbClass' is assigned a value but never used.","line":70,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":70,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":89,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":89,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toggle' is defined but never used.","line":89,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":89,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\r\n  <button\r\n    type=\"button\"\r\n    role=\"switch\"\r\n    :aria-checked=\"modelValue\"\r\n    :aria-label=\"ariaLabel\"\r\n    :disabled=\"disabled\"\r\n    :class=\"switchClass\"\r\n    @click=\"toggle\"\r\n  >\r\n    <span\r\n      :class=\"thumbClass\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <Transition name=\"icon-fade\">\r\n        <Check\r\n          v-if=\"modelValue && showIcon\"\r\n          class=\"h-3 w-3 text-white\"\r\n        />\r\n        <X\r\n          v-else-if=\"!modelValue && showIcon\"\r\n          class=\"h-3 w-3 text-slate-400\"\r\n        />\r\n      </Transition>\r\n    </span>\r\n  </button>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\r\nimport { computed } from 'vue';\r\nimport { Check, X } from 'lucide-vue-next';\r\n\r\ninterface Props {\r\n  modelValue: boolean;\r\n  disabled?: boolean;\r\n  size?: 'sm' | 'md' | 'lg';\r\n  ariaLabel?: string;\r\n  showIcon?: boolean;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  size: 'md',\r\n  showIcon: true,\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  'update:modelValue': [value: boolean];\r\n  change: [value: boolean];\r\n}>();\r\n\r\nconst switchClass = computed(() => [\r\n  'relative inline-flex items-center rounded-full transition-all duration-200',\r\n  'focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500',\r\n  'disabled:opacity-50 disabled:cursor-not-allowed',\r\n  \r\n  // Size variants\r\n  props.size === 'sm' && 'h-5 w-9',\r\n  props.size === 'md' && 'h-6 w-11',\r\n  props.size === 'lg' && 'h-7 w-14',\r\n  \r\n  // State variants\r\n  props.modelValue\r\n    ? 'bg-blue-600 dark:bg-blue-500'\r\n    : 'bg-slate-300 dark:bg-slate-700',\r\n  \r\n  !props.disabled && 'cursor-pointer',\r\n]);\r\n\r\nconst thumbClass = computed(() => [\r\n  'inline-flex items-center justify-center rounded-full transition-all duration-200',\r\n  'bg-white shadow-sm',\r\n  \r\n  // Size variants\r\n  props.size === 'sm' && [\r\n    'h-4 w-4',\r\n    props.modelValue ? 'translate-x-4' : 'translate-x-0.5',\r\n  ],\r\n  props.size === 'md' && [\r\n    'h-5 w-5',\r\n    props.modelValue ? 'translate-x-5' : 'translate-x-0.5',\r\n  ],\r\n  props.size === 'lg' && [\r\n    'h-6 w-6',\r\n    props.modelValue ? 'translate-x-7' : 'translate-x-0.5',\r\n  ],\r\n]);\r\n\r\nfunction toggle() {\r\n  if (!props.disabled) {\r\n    const newValue = !props.modelValue;\r\n    emit('update:modelValue', newValue);\r\n    emit('change', newValue);\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.icon-fade-enter-active,\r\n.icon-fade-leave-active {\r\n  transition: opacity 150ms ease;\r\n}\r\n\r\n.icon-fade-enter-from,\r\n.icon-fade-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Toast.vue","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":61,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":58,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'containerClass' is assigned a value but never used.","line":86,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":99,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":99,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getToastClass' is defined but never used.","line":99,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":99,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":114,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":114,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getIcon' is defined but never used.","line":114,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":114,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":124,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":124,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getIconClass' is defined but never used.","line":124,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":124,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":134,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":134,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProgress' is defined but never used.","line":134,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":142,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":142,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":171,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":171,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":185,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":185,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\Tooltip.vue","messages":[{"ruleId":"vue/require-default-prop","severity":1,"message":"Prop 'content' requires default value to be set.","line":40,"column":3,"nodeType":"TSPropertySignature","messageId":"missingDefault","endLine":40,"endColumn":20}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'tooltipClass' is assigned a value but never used.","line":61,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'arrowClass' is assigned a value but never used.","line":67,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":72,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":72,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleMouseEnter' is defined but never used.","line":72,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":81,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":81,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleMouseLeave' is defined but never used.","line":81,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":88,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":88,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleFocus' is defined but never used.","line":88,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":94,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":94,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleBlur' is defined but never used.","line":94,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":94,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":98,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":98,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\r\n  <div\r\n    ref=\"triggerRef\"\r\n    class=\"inline-block\"\r\n    @mouseenter=\"handleMouseEnter\"\r\n    @mouseleave=\"handleMouseLeave\"\r\n    @focus=\"handleFocus\"\r\n    @blur=\"handleBlur\"\r\n  >\r\n    <slot />\r\n    \r\n    <Teleport to=\"body\">\r\n      <Transition name=\"tooltip\">\r\n        <div\r\n          v-if=\"showTooltip\"\r\n          ref=\"tooltipRef\"\r\n          role=\"tooltip\"\r\n          :class=\"tooltipClass\"\r\n          :style=\"tooltipStyle\"\r\n        >\r\n          <slot name=\"content\">\r\n            {{ content }}\r\n          </slot>\r\n          <div\r\n            v-if=\"!hideArrow\"\r\n            :class=\"arrowClass\"\r\n            :style=\"arrowStyle\"\r\n          />\r\n        </div>\r\n      </Transition>\r\n    </Teleport>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\r\nimport { ref, computed, watch, nextTick } from 'vue';\r\n\r\ninterface Props {\r\n  content?: string;\r\n  placement?: 'top' | 'bottom' | 'left' | 'right';\r\n  delay?: number;\r\n  hideArrow?: boolean;\r\n  disabled?: boolean;\r\n  maxWidth?: string;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  placement: 'top',\r\n  delay: 200,\r\n  maxWidth: '320px',\r\n});\r\n\r\nconst triggerRef = ref<HTMLElement>();\r\nconst tooltipRef = ref<HTMLElement>();\r\nconst showTooltip = ref(false);\r\nconst tooltipStyle = ref({});\r\nconst arrowStyle = ref({});\r\nconst hoverTimeout = ref<number>();\r\n\r\nconst tooltipClass = computed(() => [\r\n  'absolute z-[100] px-3 py-2 text-xs font-medium rounded-md shadow-lg',\r\n  'bg-slate-900 dark:bg-slate-700 text-white',\r\n  'pointer-events-none',\r\n]);\r\n\r\nconst arrowClass = computed(() => [\r\n  'absolute w-2 h-2 rotate-45',\r\n  'bg-slate-900 dark:bg-slate-700',\r\n]);\r\n\r\nfunction handleMouseEnter() {\r\n  if (props.disabled) return;\r\n  \r\n  hoverTimeout.value = window.setTimeout(() => {\r\n    showTooltip.value = true;\r\n    nextTick(() => calculatePosition());\r\n  }, props.delay);\r\n}\r\n\r\nfunction handleMouseLeave() {\r\n  if (hoverTimeout.value) {\r\n    clearTimeout(hoverTimeout.value);\r\n  }\r\n  showTooltip.value = false;\r\n}\r\n\r\nfunction handleFocus() {\r\n  if (props.disabled) return;\r\n  showTooltip.value = true;\r\n  nextTick(() => calculatePosition());\r\n}\r\n\r\nfunction handleBlur() {\r\n  showTooltip.value = false;\r\n}\r\n\r\nfunction calculatePosition() {\r\n  if (!triggerRef.value || !tooltipRef.value) return;\r\n  \r\n  const triggerRect = triggerRef.value.getBoundingClientRect();\r\n  const tooltipRect = tooltipRef.value.getBoundingClientRect();\r\n  \r\n  const spacing = 8; // Gap between trigger and tooltip\r\n  const arrowSize = 4;\r\n  \r\n  let top = 0;\r\n  let left = 0;\r\n  let arrowTop = '';\r\n  let arrowLeft = '';\r\n  \r\n  switch (props.placement) {\r\n    case 'top':\r\n      top = triggerRect.top - tooltipRect.height - spacing;\r\n      left = triggerRect.left + (triggerRect.width - tooltipRect.width) / 2;\r\n      arrowTop = '100%';\r\n      arrowLeft = '50%';\r\n      arrowStyle.value = {\r\n        top: arrowTop,\r\n        left: arrowLeft,\r\n        transform: 'translate(-50%, -50%)',\r\n      };\r\n      break;\r\n      \r\n    case 'bottom':\r\n      top = triggerRect.bottom + spacing;\r\n      left = triggerRect.left + (triggerRect.width - tooltipRect.width) / 2;\r\n      arrowTop = `-${arrowSize}px`;\r\n      arrowLeft = '50%';\r\n      arrowStyle.value = {\r\n        top: arrowTop,\r\n        left: arrowLeft,\r\n        transform: 'translate(-50%, -50%)',\r\n      };\r\n      break;\r\n      \r\n    case 'left':\r\n      top = triggerRect.top + (triggerRect.height - tooltipRect.height) / 2;\r\n      left = triggerRect.left - tooltipRect.width - spacing;\r\n      arrowTop = '50%';\r\n      arrowLeft = '100%';\r\n      arrowStyle.value = {\r\n        top: arrowTop,\r\n        left: arrowLeft,\r\n        transform: 'translate(-50%, -50%)',\r\n      };\r\n      break;\r\n      \r\n    case 'right':\r\n      top = triggerRect.top + (triggerRect.height - tooltipRect.height) / 2;\r\n      left = triggerRect.right + spacing;\r\n      arrowTop = '50%';\r\n      arrowLeft = `-${arrowSize}px`;\r\n      arrowStyle.value = {\r\n        top: arrowTop,\r\n        left: arrowLeft,\r\n        transform: 'translate(-50%, -50%)',\r\n      };\r\n      break;\r\n  }\r\n  \r\n  // Keep tooltip within viewport\r\n  const viewportWidth = window.innerWidth;\r\n  const viewportHeight = window.innerHeight;\r\n  \r\n  if (left < 10) left = 10;\r\n  if (left + tooltipRect.width > viewportWidth - 10) {\r\n    left = viewportWidth - tooltipRect.width - 10;\r\n  }\r\n  \r\n  if (top < 10) top = 10;\r\n  if (top + tooltipRect.height > viewportHeight - 10) {\r\n    top = viewportHeight - tooltipRect.height - 10;\r\n  }\r\n  \r\n  tooltipStyle.value = {\r\n    top: `${top}px`,\r\n    left: `${left}px`,\r\n    maxWidth: props.maxWidth,\r\n  };\r\n}\r\n\r\n// Recalculate on window resize\r\nwatch(showTooltip, (show) => {\r\n  if (show) {\r\n    window.addEventListener('resize', calculatePosition);\r\n    window.addEventListener('scroll', calculatePosition, true);\r\n  } else {\r\n    window.removeEventListener('resize', calculatePosition);\r\n    window.removeEventListener('scroll', calculatePosition, true);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.tooltip-enter-active,\r\n.tooltip-leave-active {\r\n  transition: opacity 150ms cubic-bezier(0.4, 0, 0.2, 1);\r\n}\r\n\r\n.tooltip-enter-from,\r\n.tooltip-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\components\\ui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\conditions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\migration.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\pac\\pac-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\security\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\security\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\security\\regexSafe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\security\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\core\\security\\wildcardMatcher.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\lib\\utils.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":13,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":13,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1814,1817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1814,1817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1824,1827],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1824,1827],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1974,1977],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1974,1977],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2309,2312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2309,2312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2319,2322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2319,2322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2448,2451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2448,2451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":135,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3918,3921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3918,3921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Utility functions for component styling and logic\r\n */\r\n\r\nimport { type ClassValue, clsx } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\n\r\n/**\r\n * Merge Tailwind classes with conflict resolution\r\n * @param inputs - Class names to merge\r\n * @returns Merged class string\r\n */\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\n/**\r\n * Format timestamp to relative time\r\n * @param timestamp - Date or timestamp\r\n * @returns Relative time string (e.g., \"2 minutes ago\")\r\n */\r\nexport function formatRelativeTime(timestamp: Date | number): string {\r\n  const now = Date.now();\r\n  const time = timestamp instanceof Date ? timestamp.getTime() : timestamp;\r\n  const diff = now - time;\r\n\r\n  const seconds = Math.floor(diff / 1000);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const hours = Math.floor(minutes / 60);\r\n  const days = Math.floor(hours / 24);\r\n\r\n  if (seconds < 60) return 'Just now';\r\n  if (minutes < 60) return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;\r\n  if (hours < 24) return `${hours} hour${hours > 1 ? 's' : ''} ago`;\r\n  if (days < 7) return `${days} day${days > 1 ? 's' : ''} ago`;\r\n  \r\n  return new Date(time).toLocaleDateString();\r\n}\r\n\r\n/**\r\n * Format number with abbreviations (1K, 1M, etc.)\r\n * @param num - Number to format\r\n * @returns Formatted string\r\n */\r\nexport function formatCompactNumber(num: number): string {\r\n  if (num < 1000) return num.toString();\r\n  if (num < 1000000) return `${(num / 1000).toFixed(1)}K`;\r\n  if (num < 1000000000) return `${(num / 1000000).toFixed(1)}M`;\r\n  return `${(num / 1000000000).toFixed(1)}B`;\r\n}\r\n\r\n/**\r\n * Debounce function calls\r\n * @param fn - Function to debounce\r\n * @param delay - Delay in milliseconds\r\n * @returns Debounced function\r\n */\r\nexport function debounce<T extends (...args: any[]) => any>(\r\n  fn: T,\r\n  delay: number\r\n): (...args: Parameters<T>) => void {\r\n  let timeoutId: ReturnType<typeof setTimeout>;\r\n  \r\n  return function(this: any, ...args: Parameters<T>) {\r\n    clearTimeout(timeoutId);\r\n    timeoutId = setTimeout(() => fn.apply(this, args), delay);\r\n  };\r\n}\r\n\r\n/**\r\n * Throttle function calls\r\n * @param fn - Function to throttle\r\n * @param limit - Time limit in milliseconds\r\n * @returns Throttled function\r\n */\r\nexport function throttle<T extends (...args: any[]) => any>(\r\n  fn: T,\r\n  limit: number\r\n): (...args: Parameters<T>) => void {\r\n  let inThrottle: boolean;\r\n  \r\n  return function(this: any, ...args: Parameters<T>) {\r\n    if (!inThrottle) {\r\n      fn.apply(this, args);\r\n      inThrottle = true;\r\n      setTimeout(() => (inThrottle = false), limit);\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Generate unique ID\r\n * @param prefix - Optional prefix\r\n * @returns Unique ID string\r\n */\r\nexport function generateId(prefix = 'id'): string {\r\n  return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\n/**\r\n * Sleep/delay function\r\n * @param ms - Milliseconds to sleep\r\n * @returns Promise that resolves after delay\r\n */\r\nexport function sleep(ms: number): Promise<void> {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * Copy text to clipboard\r\n * @param text - Text to copy\r\n * @returns Promise that resolves when copied\r\n */\r\nexport async function copyToClipboard(text: string): Promise<void> {\r\n  if (navigator.clipboard) {\r\n    await navigator.clipboard.writeText(text);\r\n  } else {\r\n    // Fallback for older browsers\r\n    const textarea = document.createElement('textarea');\r\n    textarea.value = text;\r\n    textarea.style.position = 'fixed';\r\n    textarea.style.opacity = '0';\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(textarea);\r\n  }\r\n}\r\n\r\n/**\r\n * Check if value is empty (null, undefined, empty string, empty array, empty object)\r\n * @param value - Value to check\r\n * @returns True if empty\r\n */\r\nexport function isEmpty(value: any): boolean {\r\n  if (value === null || value === undefined) return true;\r\n  if (typeof value === 'string') return value.trim().length === 0;\r\n  if (Array.isArray(value)) return value.length === 0;\r\n  if (typeof value === 'object') return Object.keys(value).length === 0;\r\n  return false;\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\options\\OptionsApp.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1099,"column":103,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1099,"endColumn":106,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[48977,48980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[48977,48980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1639,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1639,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[66612,66615],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[66612,66615],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1653,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1653,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[67090,67093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[67090,67093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1671,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1671,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[67757,67760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[67757,67760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1794,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1794,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[72556,72559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[72556,72559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1959,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1959,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[77938,77941],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[77938,77941],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'VERSION' is defined but never used.","line":1052,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1052,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getManifestVersion' is defined but never used.","line":1052,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":1052,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Plus' is defined but never used.","line":1054,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1054,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":1057,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1057,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Upload' is defined but never used.","line":1058,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1058,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Check' is defined but never used.","line":1065,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1065,"endColumn":8,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":1066,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1066,"endColumn":4,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Edit' is defined but never used.","line":1067,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1067,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Trash2' is defined but never used.","line":1068,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1068,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Code' is defined but never used.","line":1069,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1069,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'GripVertical' is defined but never used.","line":1070,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1070,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowUp' is defined but never used.","line":1071,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1071,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowDown' is defined but never used.","line":1072,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1072,"endColumn":12,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sun' is defined but never used.","line":1073,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1073,"endColumn":6,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Moon' is defined but never used.","line":1074,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":1074,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":1077,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1077,"endColumn":14,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":1077,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1077,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":1077,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":1077,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Select' is defined but never used.","line":1077,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":1077,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ProfileImportExport' is defined but never used.","line":1079,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1079,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ProfileEditor' is defined but never used.","line":1079,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":1079,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SwitchRule' is defined but never used.","line":1082,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":1082,"endColumn":63,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1107,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1107,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1126,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1126,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1133,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1133,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'logLevels' is assigned a value but never used.","line":1156,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1156,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'settingsNav' is assigned a value but never used.","line":1194,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1194,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1264,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1264,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'clearLogs' is defined but never used.","line":1264,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1264,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1271,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1271,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportLogsToFile' is defined but never used.","line":1271,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1271,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1310,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1310,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toggleTestConflict' is defined but never used.","line":1310,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1310,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1333,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1333,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setLogLevel' is defined but never used.","line":1333,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1333,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1349,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1349,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateLogMaxLines' is defined but never used.","line":1349,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1349,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1368,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1368,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":1373,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":1373,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sortedProfiles' is assigned a value but never used.","line":1382,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1382,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeProfileName' is assigned a value but never used.","line":1399,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1399,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'connectionStatus' is assigned a value but never used.","line":1401,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1401,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'connectionMode' is assigned a value but never used.","line":1409,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1409,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'proxyType' is assigned a value but never used.","line":1415,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1415,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'proxyHost' is assigned a value but never used.","line":1422,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":1422,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1462,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1462,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleRuleDragStart' is defined but never used.","line":1462,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1462,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1467,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1467,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleRuleDrop' is defined but never used.","line":1467,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1467,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1478,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1478,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateRuleConditionType' is defined but never used.","line":1478,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1478,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1503,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1503,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateRulePattern' is defined but never used.","line":1503,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1503,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1515,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1515,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateRuleHostLevels' is defined but never used.","line":1515,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1515,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1530,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1530,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateRuleProfile' is defined but never used.","line":1530,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1530,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1537,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1537,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'moveRuleUp' is defined but never used.","line":1537,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1537,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1545,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1545,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'moveRuleDown' is defined but never used.","line":1545,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1545,"endColumn":22,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1553,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1553,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'deleteRule' is defined but never used.","line":1553,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1553,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1561,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1561,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'addNewRule' is defined but never used.","line":1561,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1561,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1572,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1572,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateDefaultProfile' is defined but never used.","line":1572,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1572,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1577,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1577,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'configureShortcut' is defined but never used.","line":1577,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1577,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'i' is defined but never used.","line":1671,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":1671,"endColumn":41,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1735,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1735,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'toggleShowInPopup' is defined but never used.","line":1735,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1735,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1756,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1756,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1807,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1807,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleProfileSwitch' is defined but never used.","line":1807,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1807,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":1814,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":1814,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1819,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1819,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleEditProfile' is defined but never used.","line":1819,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1819,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1824,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1824,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleDeleteProfile' is defined but never used.","line":1824,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1824,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1833,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1833,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleSaveProfile' is defined but never used.","line":1833,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1833,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1859,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1859,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleCreateFromTemplate' is defined but never used.","line":1859,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1859,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1870,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1870,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleImportProfiles' is defined but never used.","line":1870,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1870,"endColumn":36,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1886,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1886,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleExportComplete' is defined but never used.","line":1886,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1886,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1890,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1890,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getSidebarItemClass' is defined but never used.","line":1890,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1890,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1898,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1898,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileIcon' is defined but never used.","line":1898,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1898,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileTypeLabel' is defined but never used.","line":1908,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1908,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileTypeBadgeClass' is defined but never used.","line":1919,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1919,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileColor' is defined but never used.","line":1928,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1928,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1940,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1940,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectProfile' is defined but never used.","line":1940,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1940,"endColumn":23,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1955,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1955,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1967,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1967,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateBypassList' is defined but never used.","line":1967,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1967,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":1990,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":1990,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setTheme' is defined but never used.","line":1990,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1990,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":2013,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":2013,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":2024,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":2024,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'editProfile' is defined but never used.","line":2024,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2024,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":2030,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":2030,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'exportProfileAsPac' is defined but never used.","line":2030,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":2030,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":2061,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":2061,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'deleteProfile' is defined but never used.","line":2061,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":2061,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":2082,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":2082,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'applyChanges' is defined but never used.","line":2082,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":2082,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":2099,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":2099,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'discardChanges' is defined but never used.","line":2099,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2099,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<!-- eslint-disable vue/valid-v-for -->\n<template>\n  <div class=\"flex min-h-screen bg-white dark:bg-[#0a0a0a] text-slate-900 dark:text-white font-sans antialiased\">\n    <!-- Sidebar -->\n    <aside class=\"w-64 bg-white dark:bg-[#0a0a0a] border-r border-gray-200 dark:border-zinc-900 flex flex-col flex-shrink-0\">\n      <!-- Header -->\n      <div class=\"p-4 border-b border-gray-200 dark:border-zinc-900\">\n        <div class=\"flex items-center gap-2\">\n          <div class=\"w-7 h-7 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center\">\n            <Settings class=\"h-4 w-4 text-white\" />\n          </div>\n          <span class=\"text-sm font-semibold tracking-tight\">Settings</span>\n        </div>\n      </div>\n\n      <!-- Navigation -->\n      <div class=\"flex-1 overflow-y-auto py-4 px-3\">\n        <!-- Settings Section -->\n        <div class=\"mb-6\">\n          <div class=\"text-[10px] font-semibold text-zinc-600 uppercase tracking-widest mb-2 px-2\">\n            Configuration\n          </div>\n          <nav class=\"space-y-0.5\">\n            <!-- eslint-disable-next-line vue/valid-v-for -->\n            <button\n              v-for=\"(item, idx) in settingsNav\"\n              :key=\"item.id\"\n              :class=\"getSidebarItemClass(item.id)\"\n              class=\"w-full text-left px-2 py-1.5 rounded-md text-[13px] flex items-center gap-2 transition-all duration-200 relative\"\n              @click=\"currentView = item.id\"\n            >\n              <div \n                v-if=\"currentView === item.id\"\n                class=\"absolute left-0 top-1/2 -translate-y-1/2 w-0.5 h-4 bg-emerald-500 rounded-full\"\n              />\n              <component\n                :is=\"item.icon\"\n                class=\"h-3.5 w-3.5 flex-shrink-0\"\n              />\n              <span class=\"tracking-tight\">{{ item.label }}</span>\n            </button>\n          </nav>\n        </div>\n\n        <!-- Profiles Section -->\n        <div>\n          <div class=\"text-[10px] font-semibold text-zinc-600 uppercase tracking-widest mb-2 px-2\">\n            Profiles\n          </div>\n          <nav class=\"space-y-0.5\">\n            <!-- eslint-disable-next-line vue/valid-v-for -->\n            <button\n              v-for=\"(profile, idx) in sortedProfiles\"\n              :key=\"profile.id\"\n              :class=\"getSidebarItemClass(`profile-${profile.id}`)\"\n              class=\"w-full text-left px-2 py-1.5 rounded-md text-[13px] flex items-center gap-2 transition-all duration-200 group relative\"\n              @click=\"selectProfile(profile)\"\n            >\n              <div \n                v-if=\"selectedProfile?.id === profile.id\"\n                class=\"absolute left-0 top-1/2 -translate-y-1/2 w-0.5 h-4 bg-emerald-500 rounded-full\"\n              />\n              <div \n                class=\"w-2 h-2 rounded-full flex-shrink-0\"\n                :style=\"{ backgroundColor: getProfileColor(profile) }\"\n              />\n              <component\n                :is=\"getProfileIcon(profile)\"\n                class=\"h-3.5 w-3.5 flex-shrink-0\"\n              />\n              <span class=\"tracking-tight flex-1 truncate\">{{ profile.name }}</span>\n              \n              <!-- Show in Popup toggle -->\n              <button\n                :class=\"profile.showInPopup !== false \n                  ? 'bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20' \n                  : 'bg-zinc-800 text-zinc-500 hover:bg-zinc-700'\"\n                class=\"text-[9px] px-1.5 py-0.5 rounded font-medium transition-colors flex-shrink-0\"\n                :title=\"profile.showInPopup !== false ? 'Click to hide from popup menu' : 'Click to show in popup menu'\"\n                @click.stop=\"toggleShowInPopup(profile)\"\n              >\n                {{ profile.showInPopup !== false ? 'Visible' : 'Hidden' }}\n              </button>\n              \n              <!-- Active profile indicator -->\n              <div \n                v-if=\"activeProfileId === profile.id\"\n                class=\"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse\"\n              />\n            </button>\n            <button\n              class=\"w-full text-left px-2 py-1.5 rounded-md text-[13px] flex items-center gap-2 text-emerald-400 hover:bg-zinc-950/50 transition-colors\"\n              @click=\"showProfileEditor = true\"\n            >\n              <Plus class=\"h-3.5 w-3.5\" />\n              <span class=\"tracking-tight\">New Profile</span>\n            </button>\n          </nav>\n        </div>\n      </div>\n\n      <!-- Footer Actions -->\n      <div class=\"border-t border-zinc-900\">\n        <div class=\"p-3 space-y-1\">\n          <button\n            :disabled=\"savingChanges || !hasUnsavedChanges\"\n            class=\"w-full px-2 py-1.5 rounded-md text-[12px] font-medium flex items-center justify-center gap-2 transition-colors\"\n            :class=\"hasUnsavedChanges && !savingChanges \n              ? 'bg-emerald-500 text-white hover:bg-emerald-600' \n              : 'bg-gray-300 dark:bg-zinc-950 text-gray-500 dark:text-zinc-600 cursor-not-allowed'\"\n            @click=\"applyChanges\"\n          >\n            <Check\n              v-if=\"!savingChanges\"\n              class=\"h-3.5 w-3.5\"\n            />\n            <svg\n              v-else\n              class=\"animate-spin h-3.5 w-3.5\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n            >\n              <circle\n                class=\"opacity-25\"\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                stroke=\"currentColor\"\n                stroke-width=\"4\"\n              />\n              <path\n                class=\"opacity-75\"\n                fill=\"currentColor\"\n                d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n              />\n            </svg>\n            <span>{{ savingChanges ? 'Saving...' : 'Save Changes' }}</span>\n          </button>\n        </div>\n      </div>\n    </aside>\n\n    <!-- Main Content -->\n    <main class=\"flex-1 overflow-y-auto\">\n      <!-- Interface View -->\n      <div\n        v-if=\"currentView === 'interface'\"\n        class=\"max-w-3xl mx-auto p-8\"\n      >\n        <h2 class=\"text-2xl font-semibold mb-8 tracking-tight\">\n          Interface\n        </h2>\n        \n        <section class=\"mb-8\">\n          <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n            Misc Options\n          </h3>\n          <div class=\"space-y-3 bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4\">\n            <label class=\"flex items-start gap-3 cursor-pointer group\">\n              <input\n                v-model=\"settings.confirmDelete\"\n                type=\"checkbox\" \n                class=\"mt-0.5 w-4 h-4 rounded border-gray-300 dark:border-zinc-800 bg-white dark:bg-zinc-950 text-emerald-500 focus:ring-2 focus:ring-emerald-500 cursor-pointer\"\n              >\n              <span class=\"text-[13px] text-slate-700 dark:text-zinc-300 group-hover:text-slate-900 dark:group-hover:text-white transition-colors leading-tight\">\n                Confirm before deleting profiles\n              </span>\n            </label>\n          </div>\n        </section>\n\n        <section class=\"mb-8\">\n          <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n            Keyboard Shortcut\n          </h3>\n          <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4\">\n            <div class=\"flex items-center justify-between\">\n              <div>\n                <div class=\"text-[13px] text-slate-700 dark:text-zinc-300 mb-1\">\n                  Quick Switch Popup\n                </div>\n                <div class=\"text-[11px] text-slate-500 dark:text-zinc-600\">\n                  Default: <span class=\"font-mono text-slate-600 dark:text-zinc-500\">Alt+Shift+O</span>\n                </div>\n              </div>\n              <button\n                class=\"px-3 py-1.5 text-[12px] font-medium rounded-md bg-gray-200 dark:bg-zinc-900 text-slate-700 dark:text-zinc-300 hover:bg-gray-300 dark:hover:bg-zinc-800 hover:text-slate-900 dark:hover:text-white transition-colors flex items-center gap-2\"\n                @click=\"configureShortcut\"\n              >\n                <Settings class=\"h-3.5 w-3.5\" />\n                Configure\n              </button>\n            </div>\n          </div>\n        </section>\n\n        <section>\n          <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n            Switch Options\n          </h3>\n          <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4 space-y-4\">\n            <div>\n              <label class=\"text-[11px] text-slate-500 dark:text-zinc-500 uppercase tracking-wider font-semibold mb-2 block\">Startup Profile</label>\n              <select \n                v-model=\"settings.startupProfile\" \n                class=\"w-full px-3 py-2 text-[13px] border border-gray-300 dark:border-zinc-900 rounded-md bg-white dark:bg-zinc-950 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500 font-mono\"\n              >\n                <!-- eslint-disable-next-line vue/valid-v-for -->\n                <option\n                  v-for=\"p in profiles\"\n                  :key=\"p.id\"\n                  :value=\"p.id\"\n                >\n                  {{ p.name }}\n                </option>\n              </select>\n            </div>\n          </div>\n        </section>\n      </div>\n\n      <!-- General View -->\n      <!-- Import/Export View -->\n      <div\n        v-else-if=\"currentView === 'import-export'\"\n        class=\"max-w-3xl mx-auto p-8\"\n      >\n        <h2 class=\"text-2xl font-semibold mb-8 tracking-tight\">\n          Import/Export\n        </h2>\n        <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-6\">\n          <ProfileImportExport\n            :profiles=\"profiles\"\n            @import=\"handleImportProfiles\"\n            @export-complete=\"handleExportComplete\"\n          />\n        </div>\n      </div>\n\n      <!-- Theme View -->\n      <div\n        v-else-if=\"currentView === 'theme'\"\n        class=\"max-w-3xl mx-auto p-8\"\n      >\n        <h2 class=\"text-2xl font-semibold mb-8 tracking-tight\">\n          Theme\n        </h2>\n        \n        <section>\n          <h3 class=\"text-base font-medium mb-4 text-slate-700 dark:text-zinc-300\">\n            Appearance\n          </h3>\n          <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4\">\n            <div class=\"flex gap-2 mb-4\">\n              <button\n                :class=\"settings.theme === 'light' ? 'bg-emerald-500 text-white' : 'bg-gray-200 dark:bg-zinc-900 text-slate-600 dark:text-zinc-400 hover:text-slate-900 dark:hover:text-white'\"\n                class=\"flex-1 px-4 py-2.5 rounded-md text-[13px] font-medium transition-colors flex items-center justify-center gap-2\"\n                @click=\"setTheme('light')\"\n              >\n                <Sun class=\"h-4 w-4\" />\n                Light\n              </button>\n              <button\n                :class=\"settings.theme === 'dark' ? 'bg-emerald-500 text-white' : 'bg-gray-200 dark:bg-zinc-900 text-slate-600 dark:text-zinc-400 hover:text-slate-900 dark:hover:text-white'\"\n                class=\"flex-1 px-4 py-2.5 rounded-md text-[13px] font-medium transition-colors flex items-center justify-center gap-2\"\n                @click=\"setTheme('dark')\"\n              >\n                <Moon class=\"h-4 w-4\" />\n                Dark\n              </button>\n              <button\n                :class=\"settings.theme === 'auto' ? 'bg-emerald-500 text-white' : 'bg-gray-200 dark:bg-zinc-900 text-slate-600 dark:text-zinc-400 hover:text-slate-900 dark:hover:text-white'\"\n                class=\"flex-1 px-4 py-2.5 rounded-md text-[13px] font-medium transition-colors flex items-center justify-center gap-2\"\n                @click=\"setTheme('auto')\"\n              >\n                <Monitor class=\"h-4 w-4\" />\n                Auto\n              </button>\n            </div>\n            \n            <div class=\"text-[11px] text-slate-500 dark:text-zinc-600 leading-relaxed\">\n              Dark mode is recommended for optimal contrast and readability. Auto mode adapts to your system preferences.\n            </div>\n          </div>\n        </section>\n      </div>\n\n      <!-- Logs View -->\n      <!-- Debug View (includes Logs) -->\n      <div\n        v-else-if=\"currentView === 'debug'\"\n        class=\"max-w-5xl mx-auto p-8\"\n      >\n        <h2 class=\"text-2xl font-semibold mb-8 tracking-tight\">\n          Debug & Logs\n        </h2>\n        \n        <!-- Extension Information -->\n        <section class=\"mb-8\">\n          <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n            Extension Information\n          </h3>\n          <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4 space-y-2\">\n            <div class=\"flex justify-between text-[13px]\">\n              <span class=\"text-slate-500 dark:text-zinc-500\">Version:</span>\n              <span class=\"text-slate-900 dark:text-white font-mono\">{{ VERSION }}</span>\n            </div>\n            <div class=\"flex justify-between text-[13px]\">\n              <span class=\"text-slate-500 dark:text-zinc-500\">Manifest Version:</span>\n              <span class=\"text-slate-900 dark:text-white font-mono\">{{ getManifestVersion() }}</span>\n            </div>\n            <div class=\"flex justify-between text-[13px]\">\n              <span class=\"text-slate-500 dark:text-zinc-500\">Storage Used:</span>\n              <span class=\"text-slate-900 dark:text-white font-mono\">{{ storageUsed }}</span>\n            </div>\n          </div>\n        </section>\n        \n        <!-- Log Viewer Section (moved to top) -->\n        <section class=\"mb-8\">\n          <div class=\"flex items-center justify-between mb-4\">\n            <h3 class=\"text-base font-medium text-slate-900 dark:text-zinc-300\">\n              Log Viewer\n            </h3>\n            <div class=\"flex items-center gap-3\">\n              <div class=\"flex items-center gap-2\">\n                <label class=\"text-[13px] text-slate-600 dark:text-zinc-400\">Export rows:</label>\n                <input\n                  v-model.number=\"logExportRowCount\"\n                  type=\"number\"\n                  min=\"10\"\n                  max=\"1000\"\n                  step=\"10\"\n                  class=\"w-20 px-2 py-1 text-[13px] rounded border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-slate-900 dark:text-white\"\n                >\n              </div>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                :disabled=\"logs.length === 0\"\n                @click=\"exportLogsToFile\"\n              >\n                <Download class=\"h-4 w-4\" />\n                Export to File\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                :disabled=\"logs.length === 0\"\n                @click=\"clearLogs\"\n              >\n                Clear\n              </Button>\n            </div>\n          </div>\n\n          <div\n            ref=\"logsContainer\"\n            class=\"bg-gray-50 dark:bg-zinc-950/50 border border-gray-200 dark:border-zinc-900 rounded-lg p-4 min-h-[400px] max-h-[400px] overflow-y-auto\"\n          >\n            <div\n              v-if=\"logs.length === 0\"\n              class=\"flex items-center justify-center h-full text-slate-500 dark:text-zinc-600\"\n            >\n              No logs captured yet. Actions will be logged here.\n            </div>\n            <div\n              v-else\n              class=\"space-y-1 font-mono text-xs\"\n            >\n              <!-- eslint-disable-next-line vue/valid-v-for -->\n              <div \n                v-for=\"(log, index) in logs\" \n                :key=\"index\"\n                :class=\"{\n                  'text-red-600 dark:text-red-400': log.level === 'ERROR',\n                  'text-emerald-600 dark:text-emerald-400': log.level === 'INFO',\n                  'text-yellow-600 dark:text-yellow-400': log.level === 'WARN',\n                  'text-slate-500 dark:text-zinc-500': log.level === 'DEBUG'\n                }\"\n                class=\"py-1 border-b border-gray-200 dark:border-zinc-900/30\"\n              >\n                <span class=\"text-slate-500 dark:text-zinc-600\">[{{ new Date(log.timestamp).toLocaleTimeString() }}]</span>\n                <span class=\"text-slate-400 dark:text-zinc-500 ml-2\">[{{ log.level }}]</span>\n                <span class=\"text-slate-400 dark:text-zinc-500 ml-2\">[{{ log.component }}]</span>\n                <span class=\"ml-2\">{{ log.message }}</span>\n                <div\n                  v-if=\"log.data\"\n                  class=\"ml-16 text-slate-500 dark:text-zinc-600 mt-1 break-all\"\n                >\n                  {{ typeof log.data === 'object' ? JSON.stringify(log.data, null, 2) : log.data }}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"mt-4 text-xs text-slate-500 dark:text-zinc-600\">\n            <p>Showing {{ logs.length }} of {{ maxLogs }} maximum logs. Use \"Export to File\" to save logs for bug reports.</p>\n          </div>\n        </section>\n\n        <!-- Logging Configuration Section (now below Log Viewer) -->\n        <section class=\"mb-8\">\n          <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n            Logging Configuration\n          </h3>\n          <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4\">\n            <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <!-- Log Level Selector - Compact Design -->\n              <div>\n                <label class=\"text-[13px] font-medium text-slate-700 dark:text-zinc-300 block mb-2\">\n                  Log Level\n                </label>\n                <p class=\"text-[12px] text-slate-500 dark:text-zinc-500 mb-3\">\n                  Control verbosity for debugging. Changes apply immediately.\n                </p>\n                <div class=\"space-y-1.5\">\n                  <!-- eslint-disable-next-line vue/valid-v-for -->\n                  <button\n                    v-for=\"level in logLevels\"\n                    :key=\"level.value\"\n                    class=\"w-full flex items-center gap-2.5 px-3 py-2 rounded-md border transition-all text-left group\"\n                    :class=\"currentLogLevel === level.value \n                      ? 'border-emerald-500 bg-emerald-50 dark:bg-emerald-950/20' \n                      : 'border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 hover:border-gray-300 dark:hover:border-zinc-700'\"\n                    @click=\"setLogLevel(level.value)\"\n                  >\n                    <span class=\"text-base\">{{ level.icon }}</span>\n                    <span\n                      class=\"text-[13px] font-medium flex-1\"\n                      :style=\"{ color: level.color }\"\n                    >\n                      {{ level.name }}\n                    </span>\n                    <div\n                      v-if=\"currentLogLevel === level.value\"\n                      class=\"w-2 h-2 rounded-full bg-emerald-500\"\n                    />\n                  </button>\n                </div>\n                <div class=\"mt-3 p-2.5 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-md\">\n                  <p class=\"text-[11px] text-blue-700 dark:text-blue-400\">\n                    ≡ƒÆí Use <strong>Debug</strong> when reporting issues\n                  </p>\n                </div>\n              </div>\n\n              <!-- Max Log Lines Input -->\n              <div>\n                <label class=\"text-[13px] font-medium text-slate-700 dark:text-zinc-300 block mb-2\">\n                  Max Log Lines (Persistent Storage)\n                </label>\n                <p class=\"text-[12px] text-slate-500 dark:text-zinc-500 mb-3\">\n                  Maximum entries in storage. Older logs auto-removed (FIFO).\n                </p>\n                <div class=\"flex items-center gap-3\">\n                  <input\n                    v-model.number=\"currentLogMaxLines\"\n                    type=\"number\"\n                    min=\"10\"\n                    max=\"50000\"\n                    step=\"100\"\n                    class=\"flex-1 px-3 py-2 text-[13px] rounded-md border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500\"\n                    @blur=\"updateLogMaxLines\"\n                    @keyup.enter=\"updateLogMaxLines\"\n                  >\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    @click=\"updateLogMaxLines\"\n                  >\n                    Apply\n                  </Button>\n                </div>\n                <p class=\"text-[11px] text-slate-500 dark:text-zinc-500 mt-2\">\n                  Hard cap: 50,000 lines. Default: 1,000 lines.\n                </p>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <!-- Proxy Conflict Testing Section -->\n        <section class=\"mb-8\">\n          <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n            Proxy Conflict Testing\n          </h3>\n          <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4\">\n            <div class=\"mb-4\">\n              <p class=\"text-[13px] text-slate-700 dark:text-zinc-400 mb-2\">\n                Test how the extension handles proxy conflicts by simulating a conflict warning in the popup.\n              </p>\n              <p class=\"text-[12px] text-slate-500 dark:text-zinc-500\">\n                This will display a conflict warning banner in the popup window without actually creating a real proxy conflict.\n              </p>\n            </div>\n            <button\n              class=\"w-full px-4 py-2.5 rounded-md text-[13px] font-medium transition-colors flex items-center justify-center gap-2\"\n              :class=\"testConflictActive \n                ? 'bg-emerald-500 hover:bg-emerald-600 text-white' \n                : 'bg-gray-200 dark:bg-zinc-900 text-slate-700 dark:text-zinc-300 hover:bg-gray-300 dark:hover:bg-zinc-800'\"\n              @click=\"toggleTestConflict\"\n            >\n              <Bug class=\"h-4 w-4\" />\n              {{ testConflictActive ? 'Γ£ô Test Conflict Active' : 'Activate Test Conflict' }}\n            </button>\n            <div\n              v-if=\"testConflictActive\"\n              class=\"mt-3 p-3 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-900 rounded-md\"\n            >\n              <p class=\"text-[12px] text-emerald-700 dark:text-emerald-400\">\n                Γ£ô Test conflict is active. Open the popup to see the conflict warning banner.\n              </p>\n            </div>\n          </div>\n        </section>\n\n\n\n        <!-- Conflicts Section -->\n        <section class=\"mb-8\">\n          <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n            Conflicts\n          </h3>\n          <div class=\"bg-gray-50 dark:bg-zinc-950/30 border border-gray-200 dark:border-zinc-900 rounded-lg p-4\">\n            <p class=\"text-[11px] text-slate-500 dark:text-zinc-600 leading-relaxed mb-4\">\n              Other apps may try to control proxy settings, causing conflicts. Ad blockers and \n              extensions may also use proxy settings. These conflicts are unavoidable due to browser limitations.\n            </p>\n            <div class=\"bg-red-100 dark:bg-red-950/30 border border-red-300 dark:border-red-900/50 rounded-lg p-3\">\n              <p class=\"text-[11px] text-red-800 dark:text-red-400 leading-relaxed\">\n                A red badge on the icon indicates another app has higher priority. Try uninstalling \n                other apps and reinstalling to raise SwitchyMalaccamax's priority.\n              </p>\n            </div>\n          </div>\n        </section>\n      </div>\n\n      <!-- Profile Detail View -->\n      <div\n        v-else-if=\"selectedProfile\"\n        class=\"max-w-4xl mx-auto p-8\"\n      >\n        <div class=\"flex items-center justify-between mb-8\">\n          <div class=\"flex items-center gap-3\">\n            <component\n              :is=\"getProfileIcon(selectedProfile)\"\n              class=\"h-5 w-5 text-emerald-400\"\n            />\n            <h2 class=\"text-2xl font-semibold tracking-tight\">\n              {{ selectedProfile.name }}\n            </h2>\n            <div\n              class=\"px-2 py-0.5 rounded text-[10px] font-medium uppercase tracking-wider\"\n              :class=\"getProfileTypeBadgeClass(selectedProfile)\"\n            >\n              {{ getProfileTypeLabel(selectedProfile) }}\n            </div>\n          </div>\n          <div class=\"flex gap-2\">\n            <button\n              class=\"px-3 py-1.5 text-[12px] font-medium rounded-md bg-gray-200 dark:bg-zinc-900 text-slate-700 dark:text-zinc-300 hover:bg-gray-300 dark:hover:bg-zinc-800 hover:text-slate-900 dark:hover:text-white transition-colors flex items-center gap-2\"\n              @click=\"editProfile(selectedProfile)\"\n            >\n              <Edit class=\"h-3.5 w-3.5\" />\n              Edit\n            </button>\n            <button\n              v-if=\"selectedProfile.profileType === 'FixedProfile' || selectedProfile.profileType === 'SwitchProfile'\"\n              class=\"px-3 py-1.5 text-[12px] font-medium rounded-md bg-blue-100 dark:bg-blue-950/30 text-blue-700 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/50 hover:text-blue-800 dark:hover:text-blue-300 transition-colors flex items-center gap-2\"\n              title=\"Export as PAC script\"\n              @click=\"exportProfileAsPac(selectedProfile)\"\n            >\n              <Download class=\"h-3.5 w-3.5\" />\n              Export PAC\n            </button>\n            <button\n              v-if=\"!selectedProfile.isBuiltIn\"\n              class=\"px-3 py-1.5 text-[12px] font-medium rounded-md bg-red-100 dark:bg-red-950/30 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50 hover:text-red-800 dark:hover:text-red-300 transition-colors flex items-center gap-2\"\n              @click=\"deleteProfile(selectedProfile)\"\n            >\n              <Trash2 class=\"h-3.5 w-3.5\" />\n              Delete\n            </button>\n          </div>\n        </div>\n\n        <!-- Profile Content Based on Type -->\n        <div v-if=\"selectedProfile.profileType === 'SwitchProfile'\">\n          <section class=\"mb-8\">\n            <div class=\"flex items-center justify-between mb-4\">\n              <h3 class=\"text-lg font-semibold\">\n                Switch rules\n              </h3>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                disabled\n                title=\"Coming Soon - Advanced editor\"\n              >\n                <Code class=\"h-4 w-4\" />\n                Edit source code\n                <Badge\n                  variant=\"secondary\"\n                  size=\"xs\"\n                  class=\"ml-2\"\n                >\n                  Beta\n                </Badge>\n              </Button>\n            </div>\n\n            <!-- Rules Table -->\n            <div class=\"border border-border rounded-lg overflow-hidden\">\n              <table class=\"w-full\">\n                <thead class=\"bg-bg-secondary border-b border-border\">\n                  <tr>\n                    <th class=\"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider w-16\">\n                      Sort\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider\">\n                      Condition Type\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider\">\n                      Condition Details\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider\">\n                      Profile\n                    </th>\n                    <th class=\"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider w-24\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody class=\"divide-y divide-border\">\n                  <!-- eslint-disable-next-line vue/valid-v-for -->\n                  <tr \n                    v-for=\"(rule, index) in switchProfileRules\" \n                    :key=\"index\" \n                    class=\"hover:bg-bg-secondary\"\n                    draggable=\"true\"\n                    @dragstart=\"handleRuleDragStart(index)\"\n                    @dragover.prevent\n                    @drop=\"handleRuleDrop(index)\"\n                  >\n                    <td class=\"px-4 py-3\">\n                      <GripVertical class=\"h-4 w-4 text-text-tertiary cursor-move\" />\n                    </td>\n                    <td class=\"px-4 py-3\">\n                      <select \n                        :value=\"rule.condition.conditionType\"\n                        class=\"w-full px-2 py-1 text-sm border border-border rounded bg-bg-primary focus:outline-none focus:ring-2 focus:ring-primary\"\n                        @change=\"updateRuleConditionType(index, ($event.target as HTMLSelectElement).value)\"\n                      >\n                        <option value=\"\">\n                          Select an option\n                        </option>\n                        <option value=\"HostWildcardCondition\">\n                          Host wildcard\n                        </option>\n                        <option value=\"HostRegexCondition\">\n                          Host regex\n                        </option>\n                        <option value=\"UrlWildcardCondition\">\n                          URL wildcard\n                        </option>\n                        <option value=\"UrlRegexCondition\">\n                          URL regex\n                        </option>\n                        <option value=\"KeywordCondition\">\n                          Keyword\n                        </option>\n                        <option value=\"HostLevelsCondition\">\n                          Host levels\n                        </option>\n                        <option value=\"BypassCondition\">\n                          Bypass\n                        </option>\n                      </select>\n                    </td>\n                    <td class=\"px-4 py-3\">\n                      <input\n                        v-if=\"'pattern' in rule.condition\"\n                        type=\"text\"\n                        :value=\"rule.condition.pattern\"\n                        placeholder=\"Enter pattern...\"\n                        class=\"w-full px-2 py-1 text-sm border border-border rounded bg-bg-primary focus:outline-none focus:ring-2 focus:ring-primary\"\n                        @input=\"updateRulePattern(index, ($event.target as HTMLInputElement).value)\"\n                      >\n                      <div\n                        v-else-if=\"rule.condition.conditionType === 'HostLevelsCondition'\"\n                        class=\"flex gap-2\"\n                      >\n                        <input\n                          type=\"number\"\n                          :value=\"rule.condition.minValue ?? -1\"\n                          placeholder=\"Min\"\n                          class=\"w-20 px-2 py-1 text-sm border border-border rounded bg-bg-primary\"\n                          @input=\"updateRuleHostLevels(index, 'min', ($event.target as HTMLInputElement).value)\"\n                        >\n                        <input\n                          type=\"number\"\n                          :value=\"rule.condition.maxValue ?? -1\"\n                          placeholder=\"Max\"\n                          class=\"w-20 px-2 py-1 text-sm border border-border rounded bg-bg-primary\"\n                          @input=\"updateRuleHostLevels(index, 'max', ($event.target as HTMLInputElement).value)\"\n                        >\n                      </div>\n                      <span\n                        v-else\n                        class=\"text-xs text-text-tertiary\"\n                      >No details needed</span>\n                    </td>\n                    <td class=\"px-4 py-3\">\n                      <select\n                        :value=\"rule.profileName\"\n                        class=\"w-full px-2 py-1 text-sm border border-border rounded bg-bg-primary focus:outline-none focus:ring-2 focus:ring-primary\"\n                        @change=\"updateRuleProfile(index, ($event.target as HTMLSelectElement).value)\"\n                      >\n                        <option value=\"\">\n                          Select an option\n                        </option>\n                        <!-- eslint-disable-next-line vue/valid-v-for -->\n                        <option\n                          v-for=\"p in profiles\"\n                          :key=\"p.id\"\n                          :value=\"p.name\"\n                        >\n                          {{ p.name }}\n                        </option>\n                      </select>\n                    </td>\n                    <td class=\"px-4 py-3\">\n                      <div class=\"flex gap-1\">\n                        <Button \n                          variant=\"ghost\" \n                          size=\"icon\" \n                          class=\"h-7 w-7\"\n                          :disabled=\"index === 0\"\n                          title=\"Move up\"\n                          @click=\"moveRuleUp(index)\"\n                        >\n                          <ArrowUp class=\"h-3 w-3\" />\n                        </Button>\n                        <Button \n                          variant=\"ghost\" \n                          size=\"icon\" \n                          class=\"h-7 w-7\"\n                          :disabled=\"index === switchProfileRules.length - 1\"\n                          title=\"Move down\"\n                          @click=\"moveRuleDown(index)\"\n                        >\n                          <ArrowDown class=\"h-3 w-3\" />\n                        </Button>\n                        <Button \n                          variant=\"ghost\" \n                          size=\"icon\" \n                          class=\"h-7 w-7 text-red-600\"\n                          title=\"Delete rule\"\n                          @click=\"deleteRule(index)\"\n                        >\n                          <Trash2 class=\"h-3 w-3\" />\n                        </Button>\n                      </div>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              class=\"mt-3\"\n              @click=\"addNewRule\"\n            >\n              <Plus class=\"h-4 w-4\" />\n              Add condition\n            </Button>\n          </section>\n\n          <section class=\"mb-8\">\n            <h3 class=\"text-lg font-semibold mb-4\">\n              Default\n            </h3>\n            <p class=\"text-sm text-text-secondary mb-2\">\n              Profile to use when no rules match\n            </p>\n            <select\n              :value=\"switchProfileDefault\"\n              class=\"w-full max-w-xs px-3 py-2 text-sm border border-border rounded bg-bg-primary focus:outline-none focus:ring-2 focus:ring-primary\"\n              @change=\"updateDefaultProfile(($event.target as HTMLSelectElement).value)\"\n            >\n              <option value=\"\">\n                Select an option\n              </option>\n              <option\n                v-for=\"p in profiles\"\n                :key=\"p.id\"\n                :value=\"p.name\"\n              >\n                {{ p.name }}\n              </option>\n            </select>\n          </section>\n        </div>\n\n        <!-- Fixed Proxy Profile -->\n        <div v-else-if=\"selectedProfile.profileType === 'FixedProfile'\">\n          <Card padding=\"lg\">\n            <div class=\"space-y-6\">\n              <div>\n                <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n                  Proxy servers\n                </h3>\n                <div class=\"grid grid-cols-3 gap-4\">\n                  <div>\n                    <label class=\"block text-sm font-medium mb-2\">Protocol</label>\n                    <select \n                      v-model=\"(selectedProfile as unknown as Record<string, unknown>).proxyType\"\n                      class=\"w-full px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-white dark:bg-zinc-950 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-emerald-500\"\n                    >\n                      <option value=\"HTTP\">\n                        HTTP\n                      </option>\n                      <option value=\"HTTPS\">\n                        HTTPS\n                      </option>\n                      <option value=\"SOCKS4\">\n                        SOCKS4\n                      </option>\n                      <option value=\"SOCKS5\">\n                        SOCKS5\n                      </option>\n                    </select>\n                  </div>\n                  <div>\n                    <label class=\"block text-sm font-medium mb-2\">Server</label>\n                    <input\n                      v-model=\"(selectedProfile as unknown as Record<string, unknown>).host\"\n                      type=\"text\"\n                      placeholder=\"192.168.50.30\"\n                      class=\"w-full px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-white dark:bg-zinc-950 text-slate-900 dark:text-white\"\n                    >\n                  </div>\n                  <div>\n                    <label class=\"block text-sm font-medium mb-2\">Port</label>\n                    <input\n                      v-model=\"(selectedProfile as unknown as Record<string, unknown>).port\"\n                      type=\"number\"\n                      placeholder=\"8213\"\n                      class=\"w-full px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-white dark:bg-zinc-950 text-slate-900 dark:text-white\"\n                    >\n                  </div>\n                </div>\n              </div>\n              \n              <!-- Authentication Status -->\n              <div>\n                <h3 class=\"text-base font-medium mb-2 text-slate-900 dark:text-zinc-300\">\n                  Authentication\n                </h3>\n                <div class=\"px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-gray-50 dark:bg-zinc-900\">\n                  <div\n                    v-if=\"(selectedProfile as unknown as Record<string, unknown>).username || (selectedProfile as unknown as Record<string, unknown>).password\"\n                    class=\"flex items-center gap-2 text-emerald-600 dark:text-emerald-400\"\n                  >\n                    <svg\n                      class=\"w-5 h-5\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"2\"\n                        d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                      />\n                    </svg>\n                    <span class=\"font-medium\">Enabled</span>\n                    <span class=\"text-xs text-slate-500 dark:text-zinc-500 ml-2\">Username: {{ (selectedProfile as unknown as Record<string, unknown>).username }}</span>\n                  </div>\n                  <div\n                    v-else\n                    class=\"flex items-center gap-2 text-slate-500 dark:text-zinc-500\"\n                  >\n                    <svg\n                      class=\"w-5 h-5\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"2\"\n                        d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                      />\n                    </svg>\n                    <span>Not configured</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div>\n                <h3 class=\"text-base font-medium mb-2 text-slate-900 dark:text-zinc-300\">\n                  Bypass List\n                </h3>\n                <p class=\"text-sm text-zinc-600 dark:text-zinc-500 mb-3\">\n                  Servers for which you do not want to use any proxy: (One server on each line.)\n                </p>\n                <textarea\n                  v-model=\"bypassListText\"\n                  rows=\"8\"\n                  placeholder=\"192.168.2.0/24&#10;192.168.50.0/24&#10;127.0.0.1&#10;::1&#10;localhost&#10;<local>\"\n                  class=\"w-full px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-white dark:bg-zinc-950 text-slate-900 dark:text-white font-mono text-sm\"\n                  @input=\"updateBypassList\"\n                />\n                <p class=\"text-xs text-blue-600 dark:text-blue-400 mt-2\">\n                  <a\n                    href=\"https://developer.chrome.com/docs/extensions/reference/api/proxy#bypass_list\"\n                    target=\"_blank\"\n                    class=\"hover:underline\"\n                  >\n                    Wildcards and CIDR notation available\n                  </a>\n                </p>\n              </div>\n            </div>\n          </Card>\n        </div>\n\n        <!-- PAC Profile -->\n        <div v-else-if=\"selectedProfile.profileType === 'PacProfile'\">\n          <Card padding=\"lg\">\n            <div class=\"space-y-6\">\n              <div>\n                <h3 class=\"text-base font-medium mb-4 text-slate-900 dark:text-zinc-300\">\n                  PAC Script\n                </h3>\n                <div class=\"space-y-4\">\n                  <div v-if=\"(selectedProfile as unknown as Record<string, unknown>).pacUrl\">\n                    <label class=\"block text-sm font-medium mb-2\">PAC URL</label>\n                    <div class=\"px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-gray-50 dark:bg-zinc-900 text-slate-900 dark:text-white break-all\">\n                      {{ (selectedProfile as unknown as Record<string, unknown>).pacUrl }}\n                    </div>\n                  </div>\n                  <div v-else-if=\"(selectedProfile as unknown as Record<string, unknown>).pacScript\">\n                    <label class=\"block text-sm font-medium mb-2\">PAC Script</label>\n                    <textarea\n                      :value=\"(selectedProfile as unknown as Record<string, unknown>).pacScript\"\n                      readonly\n                      rows=\"12\"\n                      class=\"w-full px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-gray-50 dark:bg-zinc-900 text-slate-900 dark:text-white font-mono text-sm\"\n                    />\n                  </div>\n                  <div v-else>\n                    <p class=\"text-sm text-amber-600 dark:text-amber-400\">\n                      No PAC URL or script configured for this profile.\n                    </p>\n                  </div>\n                </div>\n              </div>\n              \n              <div v-if=\"(selectedProfile as unknown as Record<string, unknown>).fallbackProxy\">\n                <h3 class=\"text-base font-medium mb-2 text-slate-900 dark:text-zinc-300\">\n                  Fallback Proxy\n                </h3>\n                <p class=\"text-sm text-zinc-600 dark:text-zinc-500 mb-3\">\n                  Used when PAC script fails or is unavailable\n                </p>\n                <div class=\"grid grid-cols-3 gap-4\">\n                  <div>\n                    <label class=\"block text-sm font-medium mb-2\">Protocol</label>\n                    <div class=\"px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-gray-50 dark:bg-zinc-900 text-slate-900 dark:text-white\">\n                      {{ ((selectedProfile as unknown as Record<string, unknown>).fallbackProxy as Record<string, unknown>).scheme.toUpperCase() }}\n                    </div>\n                  </div>\n                  <div>\n                    <label class=\"block text-sm font-medium mb-2\">Server</label>\n                    <div class=\"px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-gray-50 dark:bg-zinc-900 text-slate-900 dark:text-white\">\n                      {{ ((selectedProfile as unknown as Record<string, unknown>).fallbackProxy as Record<string, unknown>).host }}\n                    </div>\n                  </div>\n                  <div>\n                    <label class=\"block text-sm font-medium mb-2\">Port</label>\n                    <div class=\"px-3 py-2 border border-gray-300 dark:border-zinc-800 rounded-md bg-gray-50 dark:bg-zinc-900 text-slate-900 dark:text-white\">\n                      {{ ((selectedProfile as unknown as Record<string, unknown>).fallbackProxy as Record<string, unknown>).port }}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-900 rounded-md p-4\">\n                <p class=\"text-sm text-blue-800 dark:text-blue-300\">\n                  <strong>Note:</strong> To edit PAC script settings, click the \"Edit\" button above.\n                </p>\n              </div>\n            </div>\n          </Card>\n        </div>\n\n        <!-- Direct/System Profile -->\n        <div v-else-if=\"selectedProfile.profileType === 'DirectProfile' || selectedProfile.profileType === 'SystemProfile'\">\n          <Card padding=\"lg\">\n            <p class=\"text-text-secondary\">\n              This is a {{ selectedProfile.profileType === 'DirectProfile' ? 'direct connection' : 'system proxy' }} profile.\n              {{ selectedProfile.profileType === 'DirectProfile' \n                ? 'All requests will connect directly without using any proxy.' \n                : 'The extension will use your system\\'s configured proxy settings.' \n              }}\n            </p>\n          </Card>\n        </div>\n        \n        <!-- Unknown Profile Type -->\n        <div v-else>\n          <Card padding=\"lg\">\n            <p class=\"text-amber-600 dark:text-amber-400\">\n              Unknown profile type: {{ selectedProfile.profileType }}\n            </p>\n          </Card>\n        </div>\n      </div>\n    </main>\n\n    <!-- Dialogs -->\n    <ProfileEditor\n      v-model=\"showProfileEditor\"\n      :profile=\"editingProfile\"\n      @save=\"handleSaveProfile\"\n      @cancel=\"editingProfile = undefined\"\n    />\n\n\n\n    <Toast\n      ref=\"toastRef\"\n      position=\"bottom-right\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\nimport { ref, computed, onMounted, watch, nextTick, onBeforeUnmount } from 'vue';\nimport type { ConnectionStatus } from '@/components/status';\nimport { useDark } from '@vueuse/core';\nimport { VERSION, getManifestVersion } from '@/utils/version';\nimport { \n  Plus, \n  Settings,\n  FileText,\n  Download,\n  Upload,\n  Palette,\n  Globe,\n  Zap,\n  Monitor,\n  Server,\n  Shuffle,\n  Check,\n  X,\n  Edit,\n  Trash2,\n  Code,\n  GripVertical,\n  ArrowUp,\n  ArrowDown,\n  Sun,\n  Moon,\n  Bug\n} from 'lucide-vue-next';\nimport { Card, Badge, Button, Toast, Select } from '@/components/ui';\nimport { encryptProfile, decryptProfile } from '@/utils/crypto';\nimport { ProfileImportExport, ProfileEditor } from '@/components/profile';\nimport { generatePacScript } from '@/core/pac/pac-generator';\nimport { Logger, LogLevel, LogLevelMetadata, getLogLevel, setLogLevel as saveLogLevel, getLogMaxLines, setLogMaxLines } from '@/utils/Logger';\nimport type { Profile, FixedProfile, SwitchProfile, SwitchRule } from '@/core/schema';\nimport { generateId } from '@/lib/utils';\n\n// Set component prefix for all logs from Options page\nLogger.setComponentPrefix('Options');\n\nconst isDark = useDark();\nconst toastRef = ref<InstanceType<typeof Toast>>();\nconst showProfileEditor = ref(false);\nconst showEditor = ref(false);\nconst showTemplates = ref(false);\nconst editingProfile = ref<Profile | undefined>();\nconst currentView = ref('interface');\nconst selectedProfile = ref<Profile | undefined>();\nconst savingChanges = ref(false);\nconst hasUnsavedChanges = ref(false);\nconst bypassListText = ref<string>('');\nconst logs = ref<Array<{ timestamp: string; level: string; component: string; message: string; data?: any }>>([]);\nconst maxLogs = 500;\nconst logExportRowCount = ref(100);\n\n// Auto-refresh / tailing for Log Viewer\nconst logsContainer = ref<HTMLElement | null>(null);\nconst logAutoRefreshTimer = ref<number | null>(null);\n\nfunction refreshLogs() {\n  try {\n    const buffer = Logger.getLogBuffer();\n    logs.value = buffer;\n    if (logs.value.length > maxLogs) {\n      logs.value = logs.value.slice(0, maxLogs);\n    }\n\n    // Tailing behavior: newest logs are at the top (logs[0]), so scroll to top\n    nextTick(() => {\n      if (currentView.value === 'debug' && logsContainer.value) {\n        logsContainer.value.scrollTop = 0;\n      }\n    });\n  } catch (error) {\n    Logger.error('Failed to refresh logs', error);\n  }\n}\n\nfunction startLogAutoRefresh() {\n  if (logAutoRefreshTimer.value !== null) return;\n  // Immediate refresh\n  refreshLogs();\n  logAutoRefreshTimer.value = window.setInterval(() => refreshLogs(), 1000);\n}\n\nfunction stopLogAutoRefresh() {\n  if (logAutoRefreshTimer.value !== null) {\n    clearInterval(logAutoRefreshTimer.value);\n    logAutoRefreshTimer.value = null;\n  }\n}\nconst testConflictActive = ref(false);\nconst storageUsed = ref('Calculating...');\nconst currentLogLevel = ref<LogLevel>(LogLevel.INFO);\nconst currentLogMaxLines = ref<number>(1000);\n\n// Initialize logs from Logger buffer\nlogs.value = Logger.getLogBuffer();\n\n// Subscribe to new log entries\nLogger.addLogListener((entry) => {\n  logs.value.unshift(entry);\n  if (logs.value.length > maxLogs) {\n    logs.value = logs.value.slice(0, maxLogs);\n  }\n});\n\n// Log level options for UI\nconst logLevels = computed(() => [\n  {\n    value: LogLevel.DEBUG,\n    name: LogLevelMetadata[LogLevel.DEBUG].name,\n    description: LogLevelMetadata[LogLevel.DEBUG].description,\n    color: LogLevelMetadata[LogLevel.DEBUG].color,\n    icon: LogLevelMetadata[LogLevel.DEBUG].icon\n  },\n  {\n    value: LogLevel.INFO,\n    name: LogLevelMetadata[LogLevel.INFO].name,\n    description: LogLevelMetadata[LogLevel.INFO].description,\n    color: LogLevelMetadata[LogLevel.INFO].color,\n    icon: LogLevelMetadata[LogLevel.INFO].icon\n  },\n  {\n    value: LogLevel.WARN,\n    name: LogLevelMetadata[LogLevel.WARN].name,\n    description: LogLevelMetadata[LogLevel.WARN].description,\n    color: LogLevelMetadata[LogLevel.WARN].color,\n    icon: LogLevelMetadata[LogLevel.WARN].icon\n  },\n  {\n    value: LogLevel.ERROR,\n    name: LogLevelMetadata[LogLevel.ERROR].name,\n    description: LogLevelMetadata[LogLevel.ERROR].description,\n    color: LogLevelMetadata[LogLevel.ERROR].color,\n    icon: LogLevelMetadata[LogLevel.ERROR].icon\n  },\n  {\n    value: LogLevel.NONE,\n    name: LogLevelMetadata[LogLevel.NONE].name,\n    description: LogLevelMetadata[LogLevel.NONE].description,\n    color: LogLevelMetadata[LogLevel.NONE].color,\n    icon: LogLevelMetadata[LogLevel.NONE].icon\n  }\n]);\n\nconst settingsNav = [\n  { id: 'interface', label: 'Interface', icon: Settings },\n  { id: 'import-export', label: 'Import/Export', icon: FileText },\n  { id: 'theme', label: 'Theme', icon: Palette },\n  { id: 'debug', label: 'Debug & Logs', icon: Bug },\n];\n\nconst settings = ref({\n  confirmDelete: true,\n  startupProfile: 'profile-1',\n  downloadInterval: 'never',\n  theme: 'auto' as 'light' | 'dark' | 'auto',\n});\n\nconst activeProfileId = ref<string>('profile-1');\nconst lastSwitched = ref<Date>(new Date());\n\nconst profiles = ref<Profile[]>([\n  {\n    id: 'profile-direct',\n    name: 'Direct',\n    profileType: 'DirectProfile',\n    color: 'gray',\n    showInPopup: true,\n    isBuiltIn: true,\n  },\n  {\n    id: 'profile-system',\n    name: 'System Proxy',\n    profileType: 'SystemProfile',\n    color: 'gray',\n    showInPopup: true,\n    isBuiltIn: true,\n  },\n  {\n    id: 'profile-2',\n    name: 'Your Proxy',\n    profileType: 'FixedProfile',\n    proxyType: 'HTTP',\n    host: 'proxy.example.com',\n    port: 8080,\n    color: 'blue',\n    showInPopup: true,\n    bypassList: [\n      { conditionType: 'BypassCondition', pattern: '127.0.0.1' },\n      { conditionType: 'BypassCondition', pattern: '::1' },\n      { conditionType: 'BypassCondition', pattern: 'localhost' },\n      { conditionType: 'BypassCondition', pattern: '<local>' },\n    ],\n  } as FixedProfile,\n  {\n    id: 'profile-3',\n    name: 'Auto Switch',\n    profileType: 'SwitchProfile',\n    defaultProfileName: 'Direct',\n    showInPopup: true,\n    rules: [\n      {\n        condition: { conditionType: 'HostWildcardCondition', pattern: '*.example.com' },\n        profileName: 'Your Proxy'\n      },\n      {\n        condition: { conditionType: 'HostWildcardCondition', pattern: 'internal.company.net' },\n        profileName: 'Your Proxy'\n      }\n    ],\n    color: 'green',\n  } as SwitchProfile,\n]);\n\nasync function clearLogs() {\n  await Logger.clearLogBuffer();\n  logs.value = [];\n  Logger.info('Logs cleared');\n  toastRef.value?.success('All logs cleared', 'Success', 2000);\n}\n\nasync function exportLogsToFile() {\n  try {\n    // Get the specified number of most recent logs\n    const logsToExport = logs.value.slice(-logExportRowCount.value);\n    \n    const logText = [\n      '='.repeat(80),\n      'SwitchyMalaccamax Debug Logs',\n      `Exported: ${new Date().toISOString()}`,\n      `Total Logs: ${logs.value.length} | Exported: ${logsToExport.length}`,\n      '='.repeat(80),\n      '',\n      ...logsToExport.map(log => {\n        const dataStr = log.data ? '\\n  Data: ' + JSON.stringify(log.data, null, 2).replace(/\\n/g, '\\n  ') : '';\n        return `[${log.timestamp}] [${log.level.toUpperCase()}] ${log.message}${dataStr}`;\n      })\n    ].join('\\n');\n    \n    const blob = new Blob([logText], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const filename = `switchymalaccamax-logs-${new Date().toISOString().replace(/[:.]/g, '-')}.txt`;\n    \n    // Use <a download> to trigger save dialog\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    \n    // Clean up the blob URL after a short delay\n    setTimeout(() => URL.revokeObjectURL(url), 100);\n    \n    Logger.info('Logs exported to file', { count: logsToExport.length, filename });\n    toastRef.value?.success(`Exported ${logsToExport.length} logs`, 'Export Successful', 3000);\n  } catch (error) {\n    Logger.error('Failed to export logs', error);\n    toastRef.value?.error('Failed to export logs', 'Error');\n  }\n}\n\nasync function toggleTestConflict() {\n  testConflictActive.value = !testConflictActive.value;\n  \n  // Store the test conflict state in chrome.storage so popup can read it\n  await chrome.storage.local.set({ testConflictActive: testConflictActive.value });\n  \n  Logger.info(`Test conflict ${testConflictActive.value ? 'activated' : 'deactivated'}`);\n  \n  if (testConflictActive.value) {\n    toastRef.value?.info(\n      'Open the popup to see the conflict warning banner.',\n      'Test Conflict Activated',\n      3000\n    );\n  } else {\n    toastRef.value?.info(\n      'Conflict warning removed from popup.',\n      'Test Conflict Deactivated',\n      3000\n    );\n  }\n}\n\nasync function setLogLevel(level: LogLevel) {\n  try {\n    await saveLogLevel(level);\n    currentLogLevel.value = level;\n    Logger.info('Log level changed', { level: LogLevelMetadata[level].name });\n    toastRef.value?.success(\n      `Log level set to ${LogLevelMetadata[level].name}`,\n      'Settings Updated',\n      2000\n    );\n  } catch (error) {\n    Logger.error('Failed to save log level', error);\n    toastRef.value?.error('Failed to save log level', 'Error');\n  }\n}\n\nasync function updateLogMaxLines() {\n  try {\n    // Validate input\n    const value = Math.max(10, Math.min(currentLogMaxLines.value, 50000));\n    currentLogMaxLines.value = value;\n    \n    await setLogMaxLines(value);\n    Logger.info('Max log lines changed', { maxLines: value });\n    toastRef.value?.success(\n      `Max log lines set to ${value.toLocaleString()}`,\n      'Settings Updated',\n      2000\n    );\n  } catch (error) {\n    Logger.error('Failed to save max log lines', error);\n    toastRef.value?.error('Failed to save max log lines', 'Error');\n  }\n}\n\nasync function calculateStorageUsed() {\n  try {\n    const usage = await chrome.storage.local.getBytesInUse();\n    const usageKB = (usage / 1024).toFixed(2);\n    storageUsed.value = `${usageKB} KB`;\n  } catch (error) {\n    storageUsed.value = 'N/A';\n  }\n}\n\nconst activeProfile = computed(() => \n  profiles.value?.find(p => p.id === activeProfileId.value)\n);\n\nconst sortedProfiles = computed(() => {\n  if (!Array.isArray(profiles.value)) return [];\n  \n  const direct = profiles.value.find(p => p.name === 'Direct');\n  const autoSwitch = profiles.value.find(p => p.name === 'Auto Switch');\n  const others = profiles.value\n    .filter(p => p.name !== 'Direct' && p.name !== 'Auto Switch')\n    .sort((a, b) => a.name.localeCompare(b.name));\n  \n  const sorted = [];\n  if (direct) sorted.push(direct);\n  if (autoSwitch) sorted.push(autoSwitch);\n  sorted.push(...others);\n  \n  return sorted;\n});\n\nconst activeProfileName = computed(() => activeProfile.value?.name);\n\nconst connectionStatus = computed<ConnectionStatus['status']>(() => {\n  if (!activeProfile.value) return 'disconnected';\n  if (activeProfile.value.profileType === 'DirectProfile') return 'direct';\n  if (activeProfile.value.profileType === 'FixedProfile') return 'active';\n  if (activeProfile.value.profileType === 'SwitchProfile') return 'auto';\n  return 'direct';\n});\n\nconst connectionMode = computed<ConnectionStatus['connectionMode']>(() => {\n  if (activeProfile.value?.profileType === 'SwitchProfile') return 'Auto Switch';\n  if (activeProfile.value?.profileType === 'DirectProfile') return 'Direct';\n  return 'Manual';\n});\n\nconst proxyType = computed(() => {\n  if (activeProfile.value?.profileType === 'FixedProfile' && 'proxyType' in activeProfile.value) {\n    return activeProfile.value.proxyType;\n  }\n  return undefined;\n});\n\nconst proxyHost = computed(() => {\n  if (activeProfile.value?.profileType === 'FixedProfile' && 'host' in activeProfile.value) {\n    return `${activeProfile.value.host}:${activeProfile.value.port}`;\n  }\n  return undefined;\n});\n\n// Switch Profile Rules Management\nconst switchProfileRules = computed({\n  get() {\n    if (selectedProfile.value?.profileType === 'SwitchProfile' && 'rules' in selectedProfile.value) {\n      return selectedProfile.value.rules || [];\n    }\n    return [];\n  },\n  set(newRules) {\n    if (selectedProfile.value?.profileType === 'SwitchProfile' && 'rules' in selectedProfile.value) {\n      selectedProfile.value.rules = newRules;\n      hasUnsavedChanges.value = true;\n    }\n  }\n});\n\nconst switchProfileDefault = computed({\n  get() {\n    if (selectedProfile.value?.profileType === 'SwitchProfile' && 'defaultProfileName' in selectedProfile.value) {\n      return selectedProfile.value.defaultProfileName;\n    }\n    return '';\n  },\n  set(newDefault) {\n    if (selectedProfile.value?.profileType === 'SwitchProfile' && 'defaultProfileName' in selectedProfile.value) {\n      selectedProfile.value.defaultProfileName = newDefault;\n      hasUnsavedChanges.value = true;\n    }\n  }\n});\n\nlet draggedRuleIndex: number | null = null;\n\nfunction handleRuleDragStart(index: number) {\n  draggedRuleIndex = index;\n  Logger.debug('Drag started for rule', { index });\n}\n\nfunction handleRuleDrop(dropIndex: number) {\n  if (draggedRuleIndex === null || draggedRuleIndex === dropIndex) return;\n  \n  Logger.debug('Moving rule', { from: draggedRuleIndex, to: dropIndex });\n  const rules = [...switchProfileRules.value];\n  const [movedRule] = rules.splice(draggedRuleIndex, 1);\n  rules.splice(dropIndex, 0, movedRule);\n  switchProfileRules.value = rules;\n  draggedRuleIndex = null;\n}\n\nfunction updateRuleConditionType(index: number, conditionType: string) {\n  Logger.debug('Update rule condition type', { index, conditionType });\n  const rules = [...switchProfileRules.value];\n  const rule = rules[index];\n  \n  // Create new condition based on type\n  if (conditionType === 'HostWildcardCondition') {\n    rule.condition = { conditionType: 'HostWildcardCondition', pattern: '' };\n  } else if (conditionType === 'HostRegexCondition') {\n    rule.condition = { conditionType: 'HostRegexCondition', pattern: '' };\n  } else if (conditionType === 'UrlWildcardCondition') {\n    rule.condition = { conditionType: 'UrlWildcardCondition', pattern: '' };\n  } else if (conditionType === 'UrlRegexCondition') {\n    rule.condition = { conditionType: 'UrlRegexCondition', pattern: '' };\n  } else if (conditionType === 'KeywordCondition') {\n    rule.condition = { conditionType: 'KeywordCondition', pattern: '' };\n  } else if (conditionType === 'HostLevelsCondition') {\n    rule.condition = { conditionType: 'HostLevelsCondition', minValue: 1, maxValue: 2 };\n  } else if (conditionType === 'BypassCondition') {\n    rule.condition = { conditionType: 'BypassCondition' };\n  }\n  \n  switchProfileRules.value = rules;\n}\n\nfunction updateRulePattern(index: number, pattern: string) {\n  // Trim whitespace to avoid accidental non-matching patterns\n  const trimmed = typeof pattern === 'string' ? pattern.trim() : pattern;\n  Logger.debug('Update rule pattern', { index, pattern: trimmed });\n  const rules = [...switchProfileRules.value];\n  const rule = rules[index];\n  if ('pattern' in rule.condition) {\n    rule.condition.pattern = trimmed;\n  }\n  switchProfileRules.value = rules;\n}\n\nfunction updateRuleHostLevels(index: number, type: 'min' | 'max', value: string) {\n  Logger.debug('Update rule host levels', { index, type, value });\n  const rules = [...switchProfileRules.value];\n  const rule = rules[index];\n  if (rule.condition.conditionType === 'HostLevelsCondition') {\n    const numValue = parseInt(value, 10);\n    if (type === 'min') {\n      rule.condition.minValue = isNaN(numValue) ? undefined : numValue;\n    } else {\n      rule.condition.maxValue = isNaN(numValue) ? undefined : numValue;\n    }\n  }\n  switchProfileRules.value = rules;\n}\n\nfunction updateRuleProfile(index: number, profileName: string) {\n  Logger.debug('Update rule profile', { index, profileName });\n  const rules = [...switchProfileRules.value];\n  rules[index].profileName = profileName;\n  switchProfileRules.value = rules;\n}\n\nfunction moveRuleUp(index: number) {\n  if (index === 0) return;\n  Logger.debug('Move rule up', { index });\n  const rules = [...switchProfileRules.value];\n  [rules[index - 1], rules[index]] = [rules[index], rules[index - 1]];\n  switchProfileRules.value = rules;\n}\n\nfunction moveRuleDown(index: number) {\n  if (index >= switchProfileRules.value.length - 1) return;\n  Logger.debug('Move rule down', { index });\n  const rules = [...switchProfileRules.value];\n  [rules[index], rules[index + 1]] = [rules[index + 1], rules[index]];\n  switchProfileRules.value = rules;\n}\n\nfunction deleteRule(index: number) {\n  Logger.debug('Delete rule', { index });\n  const rules = [...switchProfileRules.value];\n  rules.splice(index, 1);\n  switchProfileRules.value = rules;\n  toastRef.value?.success('Rule deleted', 'Success', 3000);\n}\n\nfunction addNewRule() {\n  Logger.debug('Add new rule');\n  const rules = [...switchProfileRules.value];\n  rules.push({\n    condition: { conditionType: 'HostWildcardCondition', pattern: '' },\n    profileName: ''\n  });\n  switchProfileRules.value = rules;\n  toastRef.value?.info('New rule added', 'Info', 3000);\n}\n\nfunction updateDefaultProfile(profileName: string) {\n  Logger.debug('Update default profile', { profileName });\n  switchProfileDefault.value = profileName;\n}\n\nfunction configureShortcut() {\n  Logger.info('Opening keyboard shortcuts configuration');\n  chrome.tabs.create({ url: 'chrome://extensions/shortcuts' });\n  toastRef.value?.info('Opening Chrome shortcuts settings...', 'Keyboard Shortcuts', 3000);\n}\n\nonMounted(async () => {\n  Logger.info('Loading data from storage');\n  \n  // Load current log level and max lines\n  currentLogLevel.value = await getLogLevel();\n  currentLogMaxLines.value = await getLogMaxLines();\n  \n  // Check if we should open add profile dialog\n  const urlParams = new URLSearchParams(window.location.search);\n  const action = urlParams.get('action');\n  if (action === 'addProfile') {\n    // Open profile editor after data loads\n    setTimeout(() => {\n      showProfileEditor.value = true;\n      editingProfile.value = undefined;\n    }, 100);\n  }\n  \n  try {\n    // Load profiles from local storage, other settings from sync\n    const localResult = await chrome.storage.local.get(['profiles']);\n    const syncResult = await chrome.storage.sync.get(['activeProfileId', 'settings']);\n    \n    Logger.debug('Local storage result', { \n      hasProfiles: !!localResult.profiles, \n      profilesCount: localResult.profiles?.length,\n      keys: Object.keys(localResult)\n    });\n    \n    Logger.debug('Sync storage result', { \n      hasActiveProfile: !!syncResult.activeProfileId,\n      hasSettings: !!syncResult.settings,\n      keys: Object.keys(syncResult)\n    });\n    \n    const result = { ...localResult, ...syncResult };\n    \n    Logger.debug('Loaded data', result);\n    Logger.debug('Combined storage result', { \n      hasProfiles: !!result.profiles, \n      profilesType: typeof result.profiles,\n      profilesLength: result.profiles?.length,\n      profilesIsArray: Array.isArray(result.profiles)\n    });\n    \n    // Load profiles from storage or keep defaults\n    if (result.profiles && result.profiles.length > 0) {\n      // Decrypt profiles on load\n      profiles.value = await Promise.all(\n        result.profiles.map((profile: Profile) => decryptProfile(profile))\n      );\n      const msg = `Loaded ${result.profiles.length} profiles from storage`;\n      Logger.info(msg);\n      \n      // Migration: Update profile name capitalization\n      let needsSave = false;\n      profiles.value.forEach((p: any) => {\n        if (p.name === 'auto switch') {\n          p.name = 'Auto Switch';\n          needsSave = true;\n          Logger.info('Migrated profile name: \"auto switch\" ΓåÆ \"Auto Switch\"');\n        }\n        if (p.name === 'Builtin') {\n          p.name = 'Direct';\n          needsSave = true;\n          Logger.info('Migrated profile name: \"Builtin\" ΓåÆ \"Direct\"');\n        }\n      });\n      \n      // Migrate defaultProfileName in SwitchProfiles\n      profiles.value.forEach((p: any) => {\n        if (p.profileType === 'SwitchProfile' && p.defaultProfileName === 'Builtin') {\n          p.defaultProfileName = 'Direct';\n          needsSave = true;\n          Logger.info('Migrated default profile name in Auto Switch');\n        }\n      });\n      \n      // Save if migrations were applied\n      if (needsSave) {\n        const encryptedProfiles = await Promise.all(\n          profiles.value.map((profile: Profile) => encryptProfile(profile))\n        );\n        await chrome.storage.local.set({ profiles: encryptedProfiles });\n        Logger.info('Profile migrations saved');\n      }\n      \n      // Log bypass lists\n      result.profiles.forEach((p: any, i: number) => {\n        if (p.profileType === 'FixedProfile' && p.bypassList) {\n          const bypassMsg = `Profile \"${p.name}\" has ${p.bypassList.length} bypass rules`;\n          Logger.debug(bypassMsg, p.bypassList);\n        }\n      });\n    } else {\n      // Keep default profiles and save them to storage\n      Logger.info('No profiles in storage, using defaults');\n      const encryptedProfiles = await Promise.all(\n        profiles.value.map((profile: Profile) => encryptProfile(profile))\n      );\n      await chrome.storage.local.set({ profiles: encryptedProfiles });\n    }\n    \n    if (result.activeProfileId) {\n      activeProfileId.value = result.activeProfileId;\n    }\n    if (result.settings) {\n      Object.assign(settings.value, result.settings);\n    }\n    \n    // Apply theme from settings\n    const theme = settings.value.theme || 'light';\n    if (theme === 'auto') {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      isDark.value = prefersDark;\n      if (prefersDark) {\n        document.documentElement.classList.add('dark');\n      } else {\n        document.documentElement.classList.remove('dark');\n      }\n    } else if (theme === 'dark') {\n      isDark.value = true;\n      document.documentElement.classList.add('dark');\n    } else {\n      isDark.value = false;\n      document.documentElement.classList.remove('dark');\n    }\n    \n    Logger.info('Data loaded successfully');\n    \n    // Load debug test conflict state\n    const debugResult = await chrome.storage.local.get(['testConflictActive']);\n    if (debugResult.testConflictActive !== undefined) {\n      testConflictActive.value = debugResult.testConflictActive;\n    }\n    \n    // Load current log level\n    currentLogLevel.value = await getLogLevel();\n    Logger.debug('Initial log level loaded', { level: LogLevelMetadata[currentLogLevel.value].name });\n    \n    // Calculate storage usage\n    calculateStorageUsed();\n  } catch (error) {\n    Logger.error('Failed to load data', error);\n  }\n\n  // Start auto-refresh if we're already on the debug view\n  if (currentView.value === 'debug') {\n    startLogAutoRefresh();\n  }\n});\n\nasync function toggleShowInPopup(profile: Profile) {\n  Logger.info('Toggling showInPopup', { name: profile.name, currentValue: profile.showInPopup });\n  \n  // Toggle the showInPopup property\n  profile.showInPopup = profile.showInPopup === false ? true : false;\n  \n  // Save changes immediately\n  try {\n    await saveProfiles();\n    hasUnsavedChanges.value = false; // Reset since we just saved\n    const status = profile.showInPopup ? 'shown in' : 'hidden from';\n    toastRef.value?.success(`\"${profile.name}\" will be ${status} popup menu`, 'Updated', 2000);\n    Logger.info('showInPopup toggled successfully', { name: profile.name, newValue: profile.showInPopup });\n  } catch (error) {\n    Logger.error('Failed to toggle showInPopup', error);\n    toastRef.value?.error('Failed to save changes', 'Error');\n    // Revert the change on error\n    profile.showInPopup = !profile.showInPopup;\n  }\n}\n\nasync function saveProfiles() {\n  const logMsg = `Saving profiles: ${profiles.value.length} profiles`;\n  Logger.info(logMsg);\n  \n  // Log each profile with bypass list details\n  profiles.value.forEach((p, i) => {\n    if (p.profileType === 'FixedProfile') {\n      const msg = `Profile ${i}: ${p.name} - bypassList: ${((p as unknown as Record<string, unknown>).bypassList as Array<unknown>)?.length || 0} items`; \n      Logger.debug(msg, (p as unknown as Record<string, unknown>).bypassList);\n    }\n  });\n  \n  try {\n    // Serialize to plain objects to avoid Vue reactivity proxy issues\n    const plainProfiles = JSON.parse(JSON.stringify(profiles.value));\n    Logger.info('Serialized profiles for storage');\n    Logger.debug('Serialized data size', {\n      profilesCount: plainProfiles.length,\n      jsonSize: JSON.stringify(plainProfiles).length,\n      quotaEstimate: `${(JSON.stringify(plainProfiles).length / 1024).toFixed(2)} KB`\n    });\n    \n    // Encrypt sensitive credentials before storage\n    const encryptedProfiles = await Promise.all(\n      plainProfiles.map((profile: Profile) => encryptProfile(profile))\n    );\n    \n    // Use chrome.storage.local for profiles (larger quota: 5MB vs 100KB for sync)\n    // This prevents quota exceeded errors with large profile configurations\n    await chrome.storage.local.set({ profiles: encryptedProfiles });\n    Logger.info('Profiles saved successfully to local storage');\n    \n    // Verify what was saved\n    const saved = await chrome.storage.local.get(['profiles']);\n    Logger.debug('Verification - saved profiles', saved);\n    Logger.info(`Verification - profiles count: ${saved.profiles?.length || 0}`);\n    \n    if (saved.profiles && saved.profiles.length > 0) {\n      saved.profiles.forEach((p: any, i: number) => {\n        if (p.profileType === 'FixedProfile') {\n          const msg = `Verified profile ${i}: ${p.name} - bypassList: ${p.bypassList?.length || 0} items`;\n          Logger.debug(msg, p.bypassList);\n        }\n      });\n    }\n  } catch (error) {\n    Logger.error('Failed to save profiles', error);\n    throw error;\n  }\n}\n\nasync function handleProfileSwitch(profile: Profile) {\n  activeProfileId.value = profile.id;\n  lastSwitched.value = new Date();\n  \n  try {\n    await chrome.storage.sync.set({ activeProfileId: profile.id });\n    toastRef.value?.success(`Switched to \"${profile.name}\"`, 'Profile Changed', 2000);\n  } catch (error) {\n    toastRef.value?.error('Failed to switch profile', 'Error');\n  }\n}\n\nfunction handleEditProfile(profile: Profile) {\n  editingProfile.value = profile;\n  showEditor.value = true;\n}\n\nasync function handleDeleteProfile(profile: Profile) {\n  const index = profiles.value.findIndex(p => p.id === profile.id);\n  if (index !== -1) {\n    profiles.value.splice(index, 1);\n    await saveProfiles();\n    toastRef.value?.success(`Profile \"${profile.name}\" deleted`, 'Deleted', 2000);\n  }\n}\n\nasync function handleSaveProfile(profileData: Partial<Profile>) {\n  if (editingProfile.value) {\n    // Update existing\n    const index = profiles.value.findIndex(p => p.id === editingProfile.value!.id);\n    if (index !== -1) {\n      profiles.value[index] = {\n        ...profiles.value[index],\n        ...profileData,\n      };\n      toastRef.value?.success(`Profile \"${profileData.name}\" updated`, 'Saved', 3000);\n    }\n  } else {\n    // Create new\n    const newProfile: Profile = {\n      id: generateId('profile'),\n      ...profileData,\n    } as Profile;\n    profiles.value.push(newProfile);\n    toastRef.value?.success(`Profile \"${profileData.name}\" created`, 'Created', 3000);\n  }\n  \n  await saveProfiles();\n  showProfileEditor.value = false;\n  editingProfile.value = undefined;\n}\n\nasync function handleCreateFromTemplate(profileData: Partial<Profile>) {\n  const newProfile: Profile = {\n    id: generateId('profile'),\n    ...profileData,\n  } as Profile;\n  profiles.value.push(newProfile);\n  await saveProfiles();\n  toastRef.value?.success(`Profile \"${profileData.name}\" created from template`, 'Created', 3000);\n  showTemplates.value = false;\n}\n\nasync function handleImportProfiles(importedProfiles: Profile[], replace: boolean) {\n  // Filter out Direct profile from imports (it should never be imported)\n  const filteredProfiles = importedProfiles.filter(p => p.name !== 'Direct');\n  \n  if (replace) {\n    // Always preserve Direct profile\n    const directProfile = profiles.value.find(p => p.name === 'Direct');\n    profiles.value = directProfile ? [directProfile, ...filteredProfiles] : filteredProfiles;\n    toastRef.value?.success(`Replaced with ${filteredProfiles.length} profiles`, 'Imported', 3000);\n  } else {\n    profiles.value.push(...filteredProfiles);\n    toastRef.value?.success(`Added ${filteredProfiles.length} profiles`, 'Imported', 3000);\n  }\n  await saveProfiles();\n}\n\nfunction handleExportComplete() {\n  toastRef.value?.success('Profiles exported successfully', 'Export Complete', 2000);\n}\n\nfunction getSidebarItemClass(id: string) {\n  const isActive = currentView.value === id || \n                   (selectedProfile.value && `profile-${selectedProfile.value.id}` === id);\n  return isActive \n    ? 'bg-zinc-950/50 text-white' \n    : 'text-zinc-500 hover:bg-zinc-950/30 hover:text-zinc-300';\n}\n\nfunction getProfileIcon(profile: Profile) {\n  switch (profile.profileType) {\n    case 'DirectProfile': return Zap;\n    case 'SystemProfile': return Monitor;\n    case 'FixedProfile': return Server;\n    case 'SwitchProfile': return Shuffle;\n    default: return Globe;\n  }\n}\n\nfunction getProfileTypeLabel(profile: Profile): string {\n  switch (profile.profileType) {\n    case 'DirectProfile': return 'Direct';\n    case 'SystemProfile': return 'System';\n    case 'FixedProfile': return 'Fixed';\n    case 'SwitchProfile': return 'Auto';\n    case 'PacProfile': return 'PAC';\n    default: return 'Custom';\n  }\n}\n\nfunction getProfileTypeBadgeClass(profile: Profile): string {\n  switch (profile.profileType) {\n    case 'DirectProfile': return 'bg-zinc-900 text-zinc-500';\n    case 'SwitchProfile': return 'bg-emerald-900/30 text-emerald-400';\n    case 'FixedProfile': return 'bg-blue-900/30 text-blue-400';\n    default: return 'bg-zinc-900 text-zinc-500';\n  }\n}\n\nfunction getProfileColor(profile: Profile): string {\n  const colors: Record<string, string> = {\n    gray: '#9ca3af',\n    blue: '#3b82f6',\n    green: '#22c55e',\n    red: '#ef4444',\n    yellow: '#eab308',\n    purple: '#a855f7',\n  };\n  return colors[profile.color || 'blue'] || colors.blue;\n}\n\nfunction selectProfile(profile: Profile) {\n  if (!profile) {\n    Logger.warn('Attempted to select undefined profile');\n    return;\n  }\n  Logger.info('Selected profile', { name: profile.name });\n  selectedProfile.value = profile;\n  currentView.value = `profile-${profile.id}`;\n  \n  // Load bypass list if this is a FixedProfile\n  if (profile.profileType === 'FixedProfile') {\n    loadBypassListText(profile as FixedProfile);\n  }\n}\n\nfunction loadBypassListText(profile: FixedProfile) {\n  if (profile.bypassList && Array.isArray(profile.bypassList)) {\n    // Convert BypassCondition array to text (one pattern per line)\n    bypassListText.value = profile.bypassList\n      .map((condition: any) => condition.pattern || '')\n      .filter(pattern => pattern)\n      .join('\\n');\n  } else {\n    bypassListText.value = '';\n  }\n}\n\nfunction updateBypassList() {\n  if (!selectedProfile.value || selectedProfile.value.profileType !== 'FixedProfile') {\n    return;\n  }\n  \n  hasUnsavedChanges.value = true;\n  \n  // Convert text to BypassCondition array\n  const lines = bypassListText.value\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line && !line.startsWith('#')); // Filter empty lines and comments\n  \n  const bypassList = lines.map(pattern => ({\n    conditionType: 'BypassCondition',\n    pattern\n  }));\n  \n  const msg = `Updated bypass list for ${selectedProfile.value.name}: ${bypassList.length} items`;\n  Logger.info(msg, lines);\n  (selectedProfile.value as unknown as Record<string, unknown>).bypassList = bypassList;\n}\n\nfunction setTheme(theme: 'light' | 'dark' | 'auto') {\n  Logger.info('Setting theme', { theme });\n  settings.value.theme = theme;\n  hasUnsavedChanges.value = true;\n  \n  // Apply theme immediately\n  if (theme === 'auto') {\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n    isDark.value = prefersDark;\n    if (prefersDark) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  } else if (theme === 'dark') {\n    isDark.value = true;\n    document.documentElement.classList.add('dark');\n  } else {\n    isDark.value = false;\n    document.documentElement.classList.remove('dark');\n  }\n}\n\nasync function saveSettings() {\n  Logger.debug('Saving settings', settings.value);\n  try {\n    await chrome.storage.sync.set({ settings: settings.value });\n    Logger.info('Settings saved');\n  } catch (error) {\n    Logger.error('Failed to save settings', error);\n    throw error;\n  }\n}\n\nfunction editProfile(profile: Profile) {\n  Logger.info('Editing profile', { name: profile.name });\n  editingProfile.value = profile;\n  showProfileEditor.value = true;\n}\n\nasync function exportProfileAsPac(profile: Profile) {\n  Logger.info('Exporting PAC for profile', { name: profile.name, type: profile.profileType });\n  try {\n    // Generate PAC script\n    const pacScript = generatePacScript(profile, profiles.value);\n    \n    // Sanitize filename: replace spaces and special chars with underscores\n    const safeName = profile.name.replace(/[^a-zA-Z0-9-_]/g, '_');\n    const filename = `${safeName}.pac`;\n    \n    // Create blob and download with save dialog\n    const blob = new Blob([pacScript], { type: 'application/x-ns-proxy-autoconfig' });\n    const url = URL.createObjectURL(blob);\n    \n    // Use <a download> to trigger save dialog\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    \n    // Clean up the blob URL after a short delay\n    setTimeout(() => URL.revokeObjectURL(url), 100);\n    \n    toastRef.value?.success(`PAC script exported: ${filename}`, 'Exported', 3000);\n    Logger.info('PAC export successful', { filename });\n  } catch (error) {\n    Logger.error('Failed to export PAC', error);\n    toastRef.value?.error('Failed to export PAC script', 'Error');\n  }\n}\n\nasync function deleteProfile(profile: Profile) {\n  // Prevent deletion of built-in profiles\n  if (profile.isBuiltIn) {\n    toastRef.value?.error('Built-in profiles cannot be deleted', 'Not Allowed');\n    return;\n  }\n  \n  Logger.info('Deleting profile', { name: profile.name });\n  if (settings.value.confirmDelete && !confirm(`Delete profile \"${profile.name}\"?`)) {\n    return;\n  }\n  const index = profiles.value.findIndex(p => p.id === profile.id);\n  if (index !== -1) {\n    profiles.value.splice(index, 1);\n    await saveProfiles();\n    selectedProfile.value = undefined;\n    currentView.value = 'interface';\n    toastRef.value?.success(`Profile \"${profile.name}\" deleted`, 'Deleted', 2000);\n  }\n}\n\nasync function applyChanges() {\n  Logger.info('Applying changes');\n  savingChanges.value = true;\n  try {\n    await saveProfiles();\n    await saveSettings();\n    hasUnsavedChanges.value = false;\n    Logger.info('Changes applied successfully');\n    toastRef.value?.success('Changes applied successfully', 'Saved', 2000);\n  } catch (error) {\n    Logger.error('Failed to apply changes', error);\n    toastRef.value?.error('Failed to save changes', 'Error');\n  } finally {\n    savingChanges.value = false;\n  }\n}\n\nfunction discardChanges() {\n  Logger.info('Discarding changes');\n  if (hasUnsavedChanges.value && !confirm('Discard all unsaved changes?')) {\n    return;\n  }\n  window.location.reload();\n}\n\n// Watch for changes\nwatch(settings, async () => {\n  hasUnsavedChanges.value = true;\n  Logger.debug('Settings changed');\n  \n  // Save settings to sync storage\n  try {\n    await chrome.storage.sync.set({ settings: settings.value });\n  } catch (error) {\n    Logger.error('Failed to save settings', error);\n  }\n}, { deep: true });\n\nwatch(profiles, () => {\n  hasUnsavedChanges.value = true;\n  Logger.debug('Profiles changed');\n}, { deep: true });\n\n// Watcher to start/stop log auto-refresh when user navigates to Debug view\nwatch(currentView, (newVal) => {\n  if (newVal === 'debug') {\n    startLogAutoRefresh();\n  } else {\n    stopLogAutoRefresh();\n  }\n});\n\nonBeforeUnmount(() => {\n  stopLogAutoRefresh();\n});\n</script>\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\options\\options.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\popup\\PopupApp.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":369,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":369,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12907,12910],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12907,12910],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":434,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":434,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15105,15108],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15105,15108],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":498,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":498,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17107,17110],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17107,17110],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'versionWithPrefix' is defined but never used.","line":158,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":158,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Settings' is defined but never used.","line":160,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":160,"endColumn":11,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Plus' is defined but never used.","line":161,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":7,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sortedProfiles' is assigned a value but never used.","line":187,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":187,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeProfileName' is assigned a value but never used.","line":208,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":208,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusText' is assigned a value but never used.","line":210,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":210,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'connectionModeText' is assigned a value but never used.","line":216,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":216,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'statusIcon' is assigned a value but never used.","line":229,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":229,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeProfileColor' is assigned a value but never used.","line":238,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":238,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":307,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":307,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileIcon' is defined but never used.","line":307,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":307,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileColor' is defined but never used.","line":318,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":318,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":330,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":330,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":351,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":351,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleTakeControl' is defined but never used.","line":351,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":351,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileSubtitle' is defined but never used.","line":418,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":418,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":454,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":454,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileIconBg' is defined but never used.","line":454,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":454,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'profile' is defined but never used.","line":454,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":454,"endColumn":34,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":458,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":458,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileIconColor' is defined but never used.","line":458,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":458,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'profile' is defined but never used.","line":458,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":458,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":462,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":462,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProfileButtonClass' is defined but never used.","line":462,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":462,"endColumn":31,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":472,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":472,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleProfileSwitch' is defined but never used.","line":472,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":472,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":552,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":552,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'openOptions' is defined but never used.","line":552,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":552,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":556,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":556,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'openAddProfile' is defined but never used.","line":556,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":556,"endColumn":24,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<!-- eslint-disable vue/valid-v-for -->\n<template>\n  <div class=\"w-60 bg-white dark:bg-neutral-900 text-slate-900 dark:text-white font-sans antialiased flex flex-col\">\n    <!-- Header -->\n    <div class=\"px-3 pt-4 pb-3\">\n      <div class=\"flex items-baseline gap-2\">\n        <h1 class=\"text-[17px] font-bold tracking-tight text-slate-900 dark:text-white\">\n          Proxy Switcher\n        </h1>\n        <div class=\"text-[9px] text-zinc-500 dark:text-zinc-500\">\n          {{ versionWithPrefix }}\n        </div>\n      </div>\n    </div>\n\n    <!-- Conflict Warning -->\n    <div\n      v-if=\"hasConflict\"\n      class=\"mx-3 mb-2\"\n    >\n      <div class=\"px-3 py-2.5 rounded-lg bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900\">\n        <div class=\"flex items-start gap-2 mb-2\">\n          <svg\n            class=\"w-4 h-4 text-red-600 dark:text-red-500 flex-shrink-0 mt-0.5\"\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n          <div class=\"flex-1\">\n            <div class=\"text-[12px] font-semibold text-red-800 dark:text-red-400 mb-0.5\">\n              Proxy Conflict Detected\n            </div>\n            <div class=\"text-[11px] text-red-700 dark:text-red-500\">\n              {{ conflictMessage }}\n            </div>\n          </div>\n        </div>\n        <button\n          class=\"w-full px-3 py-1.5 rounded-md text-[12px] font-medium text-white bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 transition-colors\"\n          @click=\"handleTakeControl\"\n        >\n          Take Control\n        </button>\n      </div>\n    </div>\n\n    <!-- Divider -->\n    <div class=\"px-3 pb-2\">\n      <div class=\"border-t border-gray-200 dark:border-zinc-800\" />\n    </div>\n\n    <!-- Active Profile Section Label -->\n    <div class=\"px-3 pt-2 pb-2\">\n      <h2 class=\"text-[11px] font-semibold text-zinc-500 dark:text-zinc-500 uppercase tracking-wider\">\n        Active Profile\n      </h2>\n    </div>\n\n    <!-- Active Profile Card -->\n    <div class=\"px-3 pb-2\">\n      <div \n        class=\"relative px-4 py-3.5 rounded-lg bg-gray-100 dark:bg-neutral-800 border-l-4 transition-all duration-300\"\n        :style=\"{ borderLeftColor: activeProfileColor }\"\n      >\n        <div class=\"flex items-start gap-3\">\n          <div class=\"flex-shrink-0 mt-0.5\">\n            <component\n              :is=\"statusIcon\"\n              class=\"h-7 w-7 text-slate-900 dark:text-white\"\n            />\n          </div>\n          <div class=\"flex-1 min-w-0\">\n            <div class=\"text-[16px] font-semibold leading-tight text-slate-900 dark:text-white mb-1\">\n              {{ activeProfileName }}\n            </div>\n            <div class=\"text-[12px] leading-tight text-zinc-600 dark:text-zinc-400\">\n              {{ connectionModeText }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Divider -->\n    <div class=\"px-3 pb-2\">\n      <div class=\"border-t border-gray-200 dark:border-zinc-800\" />\n    </div>\n\n    <!-- Options Section Label -->\n    <div class=\"px-3 pt-1 pb-2\">\n      <h2 class=\"text-[13px] font-semibold text-slate-900 dark:text-white tracking-tight\">\n        Options\n      </h2>\n    </div>\n\n    <!-- Profile List -->\n    <div class=\"px-3 pb-3 space-y-1.5\">\n      <button\n        v-for=\"(profile, idx) in sortedProfiles\"\n        :key=\"profile.id\"\n        class=\"w-full px-3 py-2.5 rounded-lg transition-all duration-200 flex items-center gap-3 group\"\n        :class=\"getProfileButtonClass(profile)\"\n        @click=\"handleProfileSwitch(profile)\"\n      >\n        <div \n          class=\"w-2 h-2 rounded-full flex-shrink-0\"\n          :style=\"{ backgroundColor: getProfileColor(profile) }\"\n        />\n        <div class=\"flex-shrink-0\">\n          <component\n            :is=\"getProfileIcon(profile)\"\n            class=\"h-5 w-5 text-zinc-400\"\n          />\n        </div>\n        \n        <div class=\"flex-1 text-left min-w-0\">\n          <div class=\"text-[14px] font-medium leading-tight text-slate-900 dark:text-white\">\n            {{ profile.name }}\n          </div>\n          <div class=\"text-[11px] leading-tight text-zinc-600 dark:text-zinc-500\">\n            {{ getProfileSubtitle(profile) }}\n          </div>\n        </div>\n      </button>\n    </div>\n\n    <!-- Footer -->\n    <div class=\"border-t border-gray-200 dark:border-zinc-800 bg-white dark:bg-neutral-900\">\n      <div class=\"flex items-center p-2.5 gap-2\">\n        <button\n          class=\"flex-1 px-3 py-2 rounded-lg text-[13px] font-medium text-zinc-300 bg-neutral-800 hover:bg-neutral-700 transition-colors flex items-center justify-center gap-2\"\n          @click=\"openOptions\"\n        >\n          <Settings class=\"h-3.5 w-3.5\" />\n          Settings\n        </button>\n        <button\n          class=\"flex-1 px-3 py-2 rounded-lg text-[13px] font-medium text-zinc-300 bg-neutral-800 hover:bg-neutral-700 transition-colors flex items-center justify-center gap-2\"\n          @click=\"openAddProfile\"\n        >\n          Add Profile\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/explicit-function-return-type */\nimport { ref, computed, onMounted } from 'vue';\nimport { generatePacScript } from '@/core/pac/pac-generator';\nimport { Logger } from '@/utils/Logger';\nimport { VERSION_PREFIXED as versionWithPrefix } from '@/utils/version';\nimport { \n  Settings, \n  Plus, \n  Zap, \n  Network,\n  Globe2,\n  Monitor,\n  Server,\n  Shuffle,\n  Layers,\n  Cloud\n} from 'lucide-vue-next';\nimport type { Profile, FixedProfile } from '@/core/schema';\n\nLogger.setComponentPrefix('Popup');\n\nconst activeProfileId = ref<string>('profile-1');\n\n// Profiles loaded from chrome.storage\nconst profiles = ref<Profile[]>([]);\nconst hasConflict = ref(false);\nconst conflictMessage = ref('Another extension is controlling the proxy');\n\nconst activeProfile = computed(() => {\n  if (!Array.isArray(profiles.value)) return undefined;\n  return profiles.value.find(p => p.id === activeProfileId.value);\n});\n\nconst sortedProfiles = computed(() => {\n  if (!Array.isArray(profiles.value)) return [];\n  \n  // Filter to only show profiles marked as visible in popup (default: true if not set)\n  const visibleProfiles = profiles.value.filter(p => p.showInPopup !== false);\n  \n  // Sort: Direct first, System Proxy second, then alphabetically\n  const direct = visibleProfiles.find(p => p.profileType === 'DirectProfile');\n  const system = visibleProfiles.find(p => p.profileType === 'SystemProfile');\n  const others = visibleProfiles\n    .filter(p => p.profileType !== 'DirectProfile' && p.profileType !== 'SystemProfile')\n    .sort((a, b) => a.name.localeCompare(b.name));\n  \n  const sorted = [];\n  if (direct) sorted.push(direct);\n  if (system) sorted.push(system);\n  sorted.push(...others);\n  \n  return sorted;\n});\n\nconst activeProfileName = computed(() => activeProfile.value?.name || 'No Profile');\n\nconst statusText = computed(() => {\n  if (!activeProfile.value) return 'Inactive';\n  if (activeProfile.value.profileType === 'DirectProfile') return 'Direct';\n  return 'Active';\n});\n\nconst connectionModeText = computed(() => {\n  if (!activeProfile.value) return 'Not connected';\n  if (activeProfile.value.profileType === 'DirectProfile') return 'No proxy';\n  if (activeProfile.value.profileType === 'SystemProfile') return 'System';\n  if (activeProfile.value.profileType === 'FixedProfile') {\n    const fixed = activeProfile.value as FixedProfile;\n    return `${fixed.host}:${fixed.port}`;\n  }\n  if (activeProfile.value.profileType === 'SwitchProfile') return 'Auto-switching by rules';\n  if (activeProfile.value.profileType === 'PacProfile') return 'PAC script active';\n  return 'Unknown';\n});\n\nconst statusIcon = computed(() => {\n  if (!activeProfile.value) return Globe2;\n  if (activeProfile.value.profileType === 'DirectProfile') return Zap;\n  if (activeProfile.value.profileType === 'SystemProfile') return Monitor;\n  if (activeProfile.value.profileType === 'FixedProfile') return Server;\n  if (activeProfile.value.profileType === 'SwitchProfile') return Shuffle;\n  return Network;\n});\n\nconst activeProfileColor = computed(() => {\n  if (!activeProfile.value) return '#a1a1aa'; // zinc-400\n  const colors: Record<string, string> = {\n    gray: '#9ca3af',\n    blue: '#3b82f6',\n    green: '#22c55e',\n    red: '#ef4444',\n    yellow: '#eab308',\n    purple: '#a855f7',\n  };\n  return colors[activeProfile.value.color || 'blue'] || colors.blue;\n});\n\nonMounted(async () => {\n  // Check for proxy conflicts on load\n  checkProxyConflict();\n  \n  // Load active profile from storage\n  try {\n    // Load profiles from local storage (larger quota), settings from sync\n    const localResult = await chrome.storage.local.get(['profiles', 'testConflictActive']);\n    const syncResult = await chrome.storage.sync.get(['activeProfileId', 'settings']);\n    const result = { ...localResult, ...syncResult };\n    \n    // Check if test conflict is active (for debug purposes)\n    if (result.testConflictActive) {\n      hasConflict.value = true;\n      conflictMessage.value = 'Test conflict: Another extension is controlling the proxy';\n    }\n    \n    if (result.profiles && Array.isArray(result.profiles)) {\n      profiles.value = result.profiles;\n    }\n    \n    // Initialize activeProfileId if undefined or invalid\n    if (profiles.value.length > 0) {\n      if (!result.activeProfileId || !profiles.value.find(p => p.id === result.activeProfileId)) {\n        activeProfileId.value = profiles.value[0].id;\n        await chrome.storage.sync.set({ activeProfileId: activeProfileId.value });\n      } else {\n        activeProfileId.value = result.activeProfileId;\n      }\n    }\n    \n    // Apply theme from settings\n    if (result.settings?.theme) {\n      const theme = result.settings.theme;\n      if (theme === 'auto') {\n        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n        if (prefersDark) {\n          document.documentElement.classList.add('dark');\n        } else {\n          document.documentElement.classList.remove('dark');\n        }\n      } else if (theme === 'dark') {\n        document.documentElement.classList.add('dark');\n      } else {\n        document.documentElement.classList.remove('dark');\n      }\n    } else {\n      // Default to light theme\n      document.documentElement.classList.remove('dark');\n    }\n  } catch (error) {\n    Logger.error('Failed to load profiles', error);\n  }\n});\n\n\nfunction getProfileIcon(profile: Profile) {\n  switch (profile.profileType) {\n    case 'DirectProfile': return Zap;\n    case 'SystemProfile': return Monitor;\n    case 'FixedProfile': return Server;\n    case 'SwitchProfile': return Layers;\n    case 'PacProfile': return Cloud;\n    default: return Globe2;\n  }\n}\n\nfunction getProfileColor(profile: Profile): string {\n  const colors: Record<string, string> = {\n    gray: '#9ca3af',\n    blue: '#3b82f6',\n    green: '#22c55e',\n    red: '#ef4444',\n    yellow: '#eab308',\n    purple: '#a855f7',\n  };\n  return colors[profile.color || 'blue'] || colors.blue;\n}\n\nasync function checkProxyConflict() {\n  try {\n    const proxySettings = await chrome.proxy.settings.get({}) as unknown as Record<string, unknown>;\n    const levelOfControl = proxySettings.levelOfControl;\n    \n    Logger.debug('Checking conflict', { levelOfControl });\n    \n    if (levelOfControl === 'controlled_by_other_extensions') {\n      hasConflict.value = true;\n      conflictMessage.value = 'Another extension is controlling the proxy';\n    } else if (levelOfControl === 'not_controllable') {\n      hasConflict.value = true;\n      conflictMessage.value = 'Proxy is controlled by system policy';\n    } else {\n      hasConflict.value = false;\n    }\n  } catch (error) {\n    Logger.error('Failed to check conflict', error);\n  }\n}\n\nasync function handleTakeControl() {\n  if (!activeProfile.value) return;\n  \n  try {\n    // Build the same proxy config as handleProfileSwitch\n    const profile = activeProfile.value;\n    let config: chrome.proxy.ProxyConfig;\n    \n    if (profile.profileType === 'DirectProfile') {\n      config = { mode: 'direct' };\n    } else if (profile.profileType === 'SystemProfile') {\n      config = { mode: 'system' };\n    } else if (profile.profileType === 'FixedProfile' && 'host' in profile) {\n      const fixedProfile = profile as unknown as Record<string, unknown>;\n      \n      // Build bypass list from BypassConditions\n      const bypassList: string[] = [];\n      if (fixedProfile.bypassList && Array.isArray(fixedProfile.bypassList)) {\n        fixedProfile.bypassList.forEach((condition: any) => {\n          if (condition.conditionType === 'BypassCondition' && condition.pattern) {\n            bypassList.push(condition.pattern);\n          }\n        });\n      }\n      \n      config = {\n        mode: 'fixed_servers',\n        rules: {\n          singleProxy: {\n            scheme: fixedProfile.proxyType?.toLowerCase() || 'http',\n            host: fixedProfile.host || 'localhost',\n            port: fixedProfile.port || 8080,\n          },\n          bypassList: bypassList.length > 0 ? bypassList : undefined,\n        },\n      };\n    } else if (profile.profileType === 'SwitchProfile') {\n      // Apply PAC generated from Auto Switch\n      try {\n        const pacScript = generatePacScript(profile, profiles.value);\n        config = {\n          mode: 'pac_script',\n          pacScript: { data: pacScript }\n        };\n      } catch (err) {\n        Logger.error('Failed to generate PAC script for SwitchProfile in takeControl', err);\n        config = { mode: 'direct' };\n      }\n    } else {\n      // Default to direct for unsupported types\n      config = { mode: 'direct' };\n    }\n    \n    // Re-apply the current active profile to take control\n    await chrome.runtime.sendMessage({\n      action: 'setProxy',\n      config,\n      profileColor: profile.color || 'blue'\n    });\n    \n    // Wait a moment and check again (this will clear the conflict if successful)\n    setTimeout(() => checkProxyConflict(), 500);\n  } catch (error) {\n    Logger.error('Failed to take control', error);\n  }\n}\n\nfunction getProfileSubtitle(profile: Profile): string {\n  switch (profile.profileType) {\n    case 'DirectProfile': return 'No proxy';\n    case 'SystemProfile': return 'System';\n    case 'FixedProfile': {\n      const fixed = profile as FixedProfile;\n      if (fixed.host && fixed.port) {\n        return `${fixed.host}:${fixed.port}`;\n      }\n      return fixed.proxyType || 'HTTP';\n    }\n    case 'SwitchProfile': {\n      const switchProfile = profile as unknown as Record<string, unknown>;\n      if (switchProfile.rules && Array.isArray(switchProfile.rules)) {\n        // Get unique profile names from rules\n        const profileNames = new Set<string>();\n        switchProfile.rules.forEach((rule: any) => {\n          if (rule.profileName) {\n            profileNames.add(rule.profileName);\n          }\n        });\n        if (switchProfile.defaultProfileName) {\n          profileNames.add(switchProfile.defaultProfileName);\n        }\n        const names = Array.from(profileNames);\n        if (names.length > 0) {\n          return names.join(', ');\n        }\n      }\n      return 'Auto-switching by rules';\n    }\n    case 'PacProfile': return 'PAC Script';\n    default: return 'Custom';\n  }\n}\n\nfunction getProfileIconBg(profile: Profile) {\n  return '';\n}\n\nfunction getProfileIconColor(profile: Profile) {\n  return '';\n}\n\nfunction getProfileButtonClass(profile: Profile) {\n  const isActive = activeProfileId.value === profile.id;\n  if (isActive) {\n    return 'bg-gray-100 dark:bg-neutral-800';\n  }\n  return 'bg-transparent hover:bg-gray-100 dark:hover:bg-neutral-800';\n}\n\nconst switchingProfile = ref(false);\n\nasync function handleProfileSwitch(profile: Profile) {\n  Logger.info('Switching to profile', { name: profile.name, id: profile.id });\n  \n  // Immediate UI feedback\n  switchingProfile.value = true;\n  const previousProfile = activeProfileId.value;\n  activeProfileId.value = profile.id;\n  \n  try {\n    Logger.debug('Saving to storage', { activeProfileId: profile.id });\n    // Save to storage\n    await chrome.storage.sync.set({ activeProfileId: profile.id });\n\n    // Apply proxy settings\n    let config: chrome.proxy.ProxyConfig;\n    \n    if (profile.profileType === 'DirectProfile') {\n      config = { mode: 'direct' };\n    } else if (profile.profileType === 'SystemProfile') {\n      config = { mode: 'system' };\n    } else if (profile.profileType === 'FixedProfile' && 'host' in profile) {\n      const fixedProfile = profile as unknown as Record<string, unknown>;\n      \n      // Build bypass list from BypassConditions\n      const bypassList: string[] = [];\n      if (fixedProfile.bypassList && Array.isArray(fixedProfile.bypassList)) {\n        fixedProfile.bypassList.forEach((condition: any) => {\n          if (condition.conditionType === 'BypassCondition' && condition.pattern) {\n            bypassList.push(condition.pattern);\n          }\n        });\n      }\n      \n      config = {\n        mode: 'fixed_servers',\n        rules: {\n          singleProxy: {\n            scheme: fixedProfile.proxyType?.toLowerCase() || 'http',\n            host: fixedProfile.host || 'localhost',\n            port: fixedProfile.port || 8080,\n          },\n          bypassList: bypassList.length > 0 ? bypassList : undefined,\n        },\n      };\n} else if (profile.profileType === 'SwitchProfile') {\n      // Generate PAC script from switch rules and apply as pac_script\n      try {\n        const pacScript = generatePacScript(profile, profiles.value);\n        Logger.debug('Generated PAC script', { profile: profile.name, length: pacScript.length });\n        config = {\n          mode: 'pac_script',\n          pacScript: { data: pacScript },\n        };\n      } catch (err) {\n        Logger.error('Failed to generate PAC script for SwitchProfile', err);\n        config = { mode: 'direct' };\n      }\n    } else {\n      config = { mode: 'direct' };\n    }\n\n    // Send message to background script\n    Logger.debug('Applying proxy config', config);\n    await chrome.runtime.sendMessage({\n      action: 'setProxy',\n      config,\n      profileColor: profile.color || 'blue',\n    });\n    Logger.info('Profile switch complete');\n    \n    // Check for conflicts after switching to update UI\n    setTimeout(() => checkProxyConflict(), 500);\n  } catch (error) {\n    Logger.error('Failed to switch profile', error);\n    activeProfileId.value = previousProfile; // Rollback\n  } finally {\n    switchingProfile.value = false;\n  }\n}\n\nfunction openOptions() {\n  chrome.runtime.openOptionsPage();\n}\n\nfunction openAddProfile() {\n  chrome.tabs.create({ url: chrome.runtime.getURL('src/options/options.html?action=addProfile') });\n}\n</script>\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\popup\\popup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\types\\safe-regex.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\types\\vue-shim.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\utils\\Logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\utils\\crypto.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\utils\\migration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\src\\utils\\version.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\auto-switch.spec.ts","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":38,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'vitest';\r\nimport { PacCompiler } from '@/core/pac/pac-generator';\r\nimport type { Profile } from '@/core/schema';\r\nimport * as vm from 'vm';\r\n\r\ndescribe('Auto Switch Integration', () => {\r\n  it('should route *.indemo.io to Squid Route via auto switch', (): void => {\r\n    const profiles: Profile[] = [\r\n      {\r\n        name: 'Direct',\r\n        profileType: 'DirectProfile',\r\n        color: 'gray'\r\n      },\r\n      {\r\n        name: 'Squid Route',\r\n        profileType: 'FixedProfile',\r\n        color: 'blue',\r\n        fallbackProxy: { scheme: 'http', host: '192.168.50.30', port: 8213 }\r\n      },\r\n      {\r\n        name: 'Auto',\r\n        profileType: 'SwitchProfile',\r\n        color: 'purple',\r\n        defaultProfileName: 'Direct',\r\n        rules: [\r\n          { condition: { conditionType: 'HostWildcardCondition', pattern: '*.indemo.io' }, profileName: 'Squid Route' }\r\n        ]\r\n      }\r\n    ];\r\n\r\n    const compiler = new PacCompiler(profiles);\r\n    const pac = compiler.compilePacScript('Auto');\r\n\r\n    // Execute the generated PAC script in a small VM to get the FindProxyForURL function\r\n    // Replace isInNet and other helpers with simple mocks if necessary\r\n    const sandbox: Record<string, unknown> & { isInNet?: (...args: unknown[]) => boolean; FindProxyForURL?: (url: string, host: string) => string } = {};\r\n    // Provide a minimal isInNet implementation to avoid ReferenceError\r\n    sandbox.isInNet = () => false;\r\n    vm.createContext(sandbox as unknown as Record<string, unknown>);\r\n\r\n    // Run the PAC script to populate FindProxyForURL\r\n    vm.runInContext(pac + '\\nglobalThis.FindProxyForURL = FindProxyForURL;', sandbox as unknown as Record<string, unknown>);\r\n\r\n    const find = sandbox.FindProxyForURL as ((url: string, host: string) => string) | undefined;\r\n    expect(find).toBeDefined();\r\n\r\n    const result = find!('https://cdt.indemo.io/deployment-assistant', 'cdt.indemo.io');\r\n\r\n    expect(result).toContain('PROXY 192.168.50.30:8213');\r\n  });\r\n});","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\conditions.spec.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\conditions.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\conditions.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\pac-compiler.spec.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\pac-compiler.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\pac-compiler.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\schema.spec.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\schema.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\core\\schema.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\edge-cases\\profile-switching.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\security\\pac-fuzzing.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\security\\regexSafe.spec.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\security\\regexSafe.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\security\\regexSafe.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\security\\wildcardMatcher.spec.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\security\\wildcardMatcher.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\security\\wildcardMatcher.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\utils\\crypto.spec.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\utils\\crypto.spec.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\tests\\utils\\crypto.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[229,232],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[229,232],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[485,488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[485,488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[672,675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[672,675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'vitest';\r\nimport { encryptData, decryptData, isEncrypted, encryptProfile, decryptProfile } from '../../src/utils/crypto';\r\n\r\n// Mock chrome API for testing\r\nconst mockStorage: Record<string, any> = {};\r\nglobal.chrome = {\r\n  runtime: {\r\n    id: 'test-extension-id-12345',\r\n  },\r\n  storage: {\r\n    local: {\r\n      get: async (key: string | string[]) => {\r\n        const keys = Array.isArray(key) ? key : [key];\r\n        const result: Record<string, any> = {};\r\n        keys.forEach(k => {\r\n          if (mockStorage[k]) result[k] = mockStorage[k];\r\n        });\r\n        return result;\r\n      },\r\n      set: async (items: Record<string, any>) => {\r\n        Object.assign(mockStorage, items);\r\n      },\r\n    },\r\n  },\r\n} as unknown as Record<string, unknown>;\r\n\r\ndescribe('Crypto Utilities', () => {\r\n  describe('encryptData / decryptData', () => {\r\n    it('should encrypt and decrypt simple text', async () => {\r\n      const plaintext = 'my-secret-password';\r\n      const encrypted = await encryptData(plaintext);\r\n      const decrypted = await decryptData(encrypted);\r\n\r\n      expect(encrypted).not.toBe(plaintext);\r\n      expect(encrypted.length).toBeGreaterThan(20);\r\n      expect(decrypted).toBe(plaintext);\r\n    });\r\n\r\n    it('should produce different ciphertexts for same plaintext (random IV)', async () => {\r\n      const plaintext = 'test-password';\r\n      const encrypted1 = await encryptData(plaintext);\r\n      const encrypted2 = await encryptData(plaintext);\r\n\r\n      expect(encrypted1).not.toBe(encrypted2);\r\n      \r\n      // Both should decrypt correctly\r\n      expect(await decryptData(encrypted1)).toBe(plaintext);\r\n      expect(await decryptData(encrypted2)).toBe(plaintext);\r\n    });\r\n\r\n    it('should handle empty strings', async () => {\r\n      expect(await encryptData('')).toBe('');\r\n      expect(await decryptData('')).toBe('');\r\n    });\r\n\r\n    it('should handle special characters', async () => {\r\n      const special = 'p@ssw0rd!#$%^&*(){}[]|\\\\:;\"\\'<>,.?/~`';\r\n      const encrypted = await encryptData(special);\r\n      const decrypted = await decryptData(encrypted);\r\n\r\n      expect(decrypted).toBe(special);\r\n    });\r\n\r\n    it('should handle Unicode characters', async () => {\r\n      const unicode = 'σ»åτáü≡ƒöÆΣ╕¡µûçπâæπé╣πâ»πâ╝πâë';\r\n      const encrypted = await encryptData(unicode);\r\n      const decrypted = await decryptData(encrypted);\r\n\r\n      expect(decrypted).toBe(unicode);\r\n    });\r\n\r\n    it('should produce base64-encoded output', async () => {\r\n      const encrypted = await encryptData('test');\r\n      const base64Pattern = /^[A-Za-z0-9+/]+=*$/;\r\n      \r\n      expect(base64Pattern.test(encrypted)).toBe(true);\r\n    });\r\n\r\n    it('should throw error on invalid encrypted data', async () => {\r\n      await expect(decryptData('invalid-base64-!@#')).rejects.toThrow();\r\n      await expect(decryptData('dG9vc2hvcnQ=')).rejects.toThrow(); // Too short\r\n    });\r\n  });\r\n\r\n  describe('isEncrypted', () => {\r\n    it('should identify encrypted strings', async () => {\r\n      const encrypted = await encryptData('password123');\r\n      expect(isEncrypted(encrypted)).toBe(true);\r\n    });\r\n\r\n    it('should reject plaintext strings', () => {\r\n      expect(isEncrypted('plaintext')).toBe(false);\r\n      expect(isEncrypted('user@example.com')).toBe(false);\r\n      expect(isEncrypted('short')).toBe(false);\r\n    });\r\n\r\n    it('should handle edge cases', () => {\r\n      expect(isEncrypted('')).toBe(false);\r\n      expect(isEncrypted(undefined)).toBe(false);\r\n      expect(isEncrypted('abc')).toBe(false); // Too short\r\n    });\r\n\r\n    it('should reject invalid base64', () => {\r\n      expect(isEncrypted('not-base64-!@#$%^&*()')).toBe(false);\r\n      expect(isEncrypted('has spaces in it')).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('encryptProfile / decryptProfile', () => {\r\n    const testProfile = {\r\n      id: 'test-profile-1',\r\n      name: 'Test Proxy',\r\n      type: 'FixedProfile',\r\n      color: 'blue',\r\n      host: 'proxy.example.com',\r\n      port: 8080,\r\n      proxyType: 'HTTP',\r\n      username: 'testuser',\r\n      password: 'testpass123',\r\n    };\r\n\r\n    it('should encrypt username and password', async () => {\r\n      const encrypted = await encryptProfile(testProfile);\r\n\r\n      expect(encrypted.username).not.toBe(testProfile.username);\r\n      expect(encrypted.password).not.toBe(testProfile.password);\r\n      expect(isEncrypted(encrypted.username)).toBe(true);\r\n      expect(isEncrypted(encrypted.password)).toBe(true);\r\n\r\n      // Other fields unchanged\r\n      expect(encrypted.id).toBe(testProfile.id);\r\n      expect(encrypted.name).toBe(testProfile.name);\r\n      expect(encrypted.host).toBe(testProfile.host);\r\n      expect(encrypted.port).toBe(testProfile.port);\r\n    });\r\n\r\n    it('should decrypt username and password', async () => {\r\n      const encrypted = await encryptProfile(testProfile);\r\n      const decrypted = await decryptProfile(encrypted);\r\n\r\n      expect(decrypted.username).toBe(testProfile.username);\r\n      expect(decrypted.password).toBe(testProfile.password);\r\n      expect(decrypted.id).toBe(testProfile.id);\r\n      expect(decrypted.name).toBe(testProfile.name);\r\n    });\r\n\r\n    it('should handle profiles without credentials', async () => {\r\n      const noCredentials = {\r\n        id: 'direct-profile',\r\n        name: 'Direct',\r\n        type: 'DirectProfile',\r\n        color: 'gray',\r\n      };\r\n\r\n      const encrypted = await encryptProfile(noCredentials);\r\n      const decrypted = await decryptProfile(encrypted);\r\n\r\n      expect(encrypted).toEqual(noCredentials);\r\n      expect(decrypted).toEqual(noCredentials);\r\n    });\r\n\r\n    it('should not double-encrypt already encrypted fields', async () => {\r\n      const encrypted = await encryptProfile(testProfile);\r\n      const doubleEncrypted = await encryptProfile(encrypted);\r\n\r\n      // Should not change (already encrypted)\r\n      expect(doubleEncrypted.username).toBe(encrypted.username);\r\n      expect(doubleEncrypted.password).toBe(encrypted.password);\r\n    });\r\n\r\n    it('should handle decryption errors gracefully', async () => {\r\n      const malformed = {\r\n        ...testProfile,\r\n        username: 'VGhpc0lzTm90VmFsaWRFbmNyeXB0ZWREYXRh', // Valid base64 but not encrypted\r\n        password: 'QW5vdGhlckludmFsaWRFbmNyeXB0ZWRTdHJpbmc=',\r\n      };\r\n\r\n      // Should not throw, but log warnings\r\n      const decrypted = await decryptProfile(malformed);\r\n      \r\n      // Should return encrypted values as-is when decryption fails\r\n      expect(decrypted.username).toBe(malformed.username);\r\n      expect(decrypted.password).toBe(malformed.password);\r\n    });\r\n\r\n    it('should roundtrip multiple profiles', async () => {\r\n      const profiles = [\r\n        { ...testProfile, id: '1', username: 'user1', password: 'pass1' },\r\n        { ...testProfile, id: '2', username: 'user2', password: 'pass2' },\r\n        { ...testProfile, id: '3', username: 'user3', password: 'pass3' },\r\n      ];\r\n\r\n      const encrypted = await Promise.all(profiles.map(encryptProfile));\r\n      const decrypted = await Promise.all(encrypted.map(decryptProfile));\r\n\r\n      for (let i = 0; i < profiles.length; i++) {\r\n        expect(decrypted[i].username).toBe(profiles[i].username);\r\n        expect(decrypted[i].password).toBe(profiles[i].password);\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('Security properties', () => {\r\n    it('should use unique IVs for each encryption', async () => {\r\n      const plaintext = 'same-password';\r\n      const encrypted1 = await encryptData(plaintext);\r\n      const encrypted2 = await encryptData(plaintext);\r\n\r\n      // Different ciphertexts due to unique IVs\r\n      expect(encrypted1).not.toBe(encrypted2);\r\n      \r\n      // Both decrypt correctly\r\n      expect(await decryptData(encrypted1)).toBe(plaintext);\r\n      expect(await decryptData(encrypted2)).toBe(plaintext);\r\n    });\r\n\r\n    it('should derive consistent key from extension ID', async () => {\r\n      const plaintext = 'test-consistency';\r\n      const encrypted = await encryptData(plaintext);\r\n      \r\n      // Multiple decryptions should work (same key derived)\r\n      expect(await decryptData(encrypted)).toBe(plaintext);\r\n      expect(await decryptData(encrypted)).toBe(plaintext);\r\n      expect(await decryptData(encrypted)).toBe(plaintext);\r\n    });\r\n\r\n    it('should handle long credentials', async () => {\r\n      const longPassword = 'a'.repeat(1000);\r\n      const encrypted = await encryptData(longPassword);\r\n      const decrypted = await decryptData(encrypted);\r\n\r\n      expect(decrypted).toBe(longPassword);\r\n      expect(decrypted.length).toBe(1000);\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"E:\\Github\\SwitchyMalaccamax\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]}]
